(this.webpackJsonpmagic=this.webpackJsonpmagic||[]).push([[0],{213:function(e,t,a){},283:function(e,t,a){},296:function(e,t,a){},321:function(e,t,a){},501:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(13),c=a.n(r),i=(a(283),a(12)),l=a(24),o=a(25),d=a(27),u=a(26),h=a(37),m=a(45),j=a(21),b=a(31),g=a(267),p=a(138),f=a(231),x=a(8),O=a.n(x),y=(a(296),a(269)),v=a.n(y);O.a.addPlugin(v.a);O.a.defaults({"setting-disclaimerDismissed":!1,"setting-displayText":!1,"setting-displayImages":!0,"setting-devTools":!1,"setting-displayGatherer":!1});var k=function(e){return O.a.get("setting-".concat(e))},C=function(e,t){return O.a.set("setting-".concat(e),t)},S=function(e){var t=k(e);return C(e,!t)},w=a(62),D=a(1),N=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).componentDidMount=function(){},e}return Object(o.a)(a,[{key:"render",value:function(){return Object(D.jsxs)("div",{className:"home",children:[Object(D.jsx)(h.a,{title:"Magic",children:Object(D.jsx)("link",{rel:"manifest",href:"/manifest.json"})}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsxs)(w.a,{as:m.b,exact:!0,to:"/planechase",block:!0,variant:"info",size:"lg",children:[Object(D.jsx)("i",{className:"ms ms-planeswalker ms-4x mx-2 d-block"}),Object(D.jsx)("span",{className:"d-block",children:"Planechase"})]}),Object(D.jsxs)(w.a,{as:m.b,exact:!0,to:"/archenemy",block:!0,variant:"danger",size:"lg",children:[Object(D.jsx)("i",{className:"ss ss-arc ss-3x mx-2 d-block"}),Object(D.jsx)("span",{className:"d-block",children:"Archenemy"})]}),Object(D.jsxs)(w.a,{as:m.b,exact:!0,to:"/syb",block:!0,variant:"success",size:"lg",children:[Object(D.jsx)("i",{className:"ss ss-s00 ss-3x mx-2 d-block"}),Object(D.jsx)("span",{className:"d-block",children:"SYB"})]}),Object(D.jsxs)(w.a,{as:m.b,exact:!0,to:"/formats",block:!0,variant:"primary",size:"lg",children:[Object(D.jsx)("i",{className:"ss ss-evg ss-3x mx-2 d-block"}),Object(D.jsx)("span",{className:"d-block",children:"Formats"})]})]})]})}}]),a}(n.Component),T=a(20),_=a.n(T),F=a(39),E=a(32),P=a(215),I=a(230),M=a(88),A=a(266),H=function(e){return O.a.get("".concat(e,"-currentCard"))},B=function(e,t){return O.a.set("".concat(e,"-currentCard"),t)},z=function(e){return O.a.get("".concat(e,"-revealedCards"))},Y=function(e,t){return O.a.set("".concat(e,"-revealedCards"),t)},R=function(e){return O.a.get("".concat(e,"-additionalCards"))},L=function(e,t){return O.a.set("".concat(e,"-additionalCards"),t)},G=function(e){return O.a.get("".concat(e,"-scryCards"))},W=function(e,t){return O.a.set("".concat(e,"-scryCards"),t)},U=function(e,t){return t&&t.customProperties.find((function(t){return t.name===e}))},J=function(e){return"https://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=".concat(e.multiverse_ids[0],"&type=card")},V=function(e){var t=e.planes;return Object(D.jsxs)(h.a,{title:"Planechase",children:[Object(D.jsx)("link",{rel:"shortcut icon",href:"mtg/icon/planechase.ico"}),Object(D.jsx)("link",{rel:"apple-touch-icon",href:"mtg/icon/planechase_256.png"}),Object(D.jsx)("link",{rel:"apple-touch-icon",sizes:"64x64",href:"mtg/icon/planechase_64.png"}),Object(D.jsx)("link",{rel:"apple-touch-icon",sizes:"128x128",href:"mtg/icon/planechase_128.png"}),Object(D.jsx)("link",{rel:"apple-touch-icon",sizes:"256x256",href:"mtg/icon/planechase_256.png"}),Object(D.jsx)("link",{rel:"manifest",href:"/planechase-manifest.json"}),t&&t.map((function(e){return Object(D.jsx)("link",{rel:"preload",href:J(e),as:"image"},e.id)}))]})},q=a(271),K=a.n(q),X=function(e,t,a){var n=Q(e);n.splice(a,0,n.splice(t,1)[0]),Z(e,n)},$=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Q(e);if(!n||a){console.log("Creating New ".concat(e," Deck"));var s=JSON.parse(JSON.stringify(t));s.forEach((function(e){return e.deck_card_id=K()()})),n=ue(s),O.a.set("".concat(e,"-history"),[]),Z(e,n)}return n},Q=function(e){return O.a.get("".concat(e,"-deck"))},Z=function(e,t){return O.a.set("".concat(e,"-deck"),t)},ee=function(e){var t=Q(e),a=t.shift();return a&&te(e,a),Z(e,t),a},te=function(e,t){var a=O.a.get("".concat(e,"-history"));a.push(t),O.a.set("".concat(e,"-history"),a)},ae=function(e,t){return O.a.get("".concat(e,"-history"))},ne=function(e){var t=O.a.get("".concat(e,"-history")),a=t.pop();return a&&se(e,[a]),O.a.set("".concat(e,"-history"),t),t[t.length-1]},se=function(e,t){var a=Q(e);Z(e,t.concat(a))},re=function(e,t){var a=Q(e);Z(e,a.concat(t))},ce=function(e,t){return Q(e).find((function(e){return e.deck_card_id===t}))},ie=function(e,t){var a=ce(e,t);a&&(oe(e,[a]),se(e,[a]))},le=function(e,t){var a=ce(e,t);a&&(oe(e,[a]),re(e,[a]))},oe=function(e,t){var a=Q(e).filter((function(e){return!t.find((function(t){return t.deck_card_id===e.deck_card_id}))}));Z(e,a)},de=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[],s=Q(e),r=Math.min(s.length,t),c=0,i=r,l=0;l<i;l++)n.push(s[l]),a&&(s[l].type_line.search("Plane")>=0&&c++,l===i-1&&c<r&&i++);return n},ue=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e},he=a(272),me=a.n(he),je=a(159),be=a.n(je),ge=me.a.create(),pe=function(){var e=Object(F.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=Oe("planes")){e.next=12;break}return console.log("Loading from Axios"),e.next=6,ge.get("https://api.scryfall.com/cards/search?include_extras=1&q=t%3Aplane+or+t%3Aphenomenon&unique=cards");case 6:a=e.sent,ye("planes",t=(t=a.data.data).map((function(e){return xe(e)}))),e.next=13;break;case 12:console.log("Loaded from store");case 13:return e.abrupt("return",t);case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(F.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=Oe("schemes")){e.next=12;break}return console.log("Loading from Axios"),e.next=6,ge.get("https://api.scryfall.com/cards/search?include_extras=1&q=t%3Ascheme&unique=cards");case 6:a=e.sent,ye("schemes",t=(t=a.data.data).map((function(e){return xe(e)}))),e.next=13;break;case 12:console.log("Loaded from store");case 13:return e.abrupt("return",t);case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();function xe(e){var t={Aretopolis:[{name:"counter",type:"Scroll"}],"Chaotic Aether":[{name:"all-chaos"}],"Interplanar Tunnel":[{name:"top-5"}],"Kilnspire District":[{name:"counter",type:"Charge"}],"Mount Keralia":[{name:"counter",type:"Pressure"}],"Naar Isle":[{name:"counter",type:"Flame"}],"Spatial Merging":[{name:"two-planes"}],"Stairs to Infinity":[{name:"chaos-trigger"},{name:"scry-1"}],"Pools of Becoming":[{name:"chaos-trigger"},{name:"triple-chaos"}],"Your Inescapable Doom":[{name:"unabandonable"},{name:"counter",type:"Doom"}]};return t[e.name]?e.customProperties=t[e.name]:e.customProperties=[],e.oracle_html={__html:e.oracle_text.replace(/\r\n/g,"<br />").replace(/[\r\n]/g,"<br />").replace(/{CHAOS}/g,'<i class="ms ms-chaos"></i>').replace(/CHAOS/g,'<i class="ms ms-chaos"></i>').replace(/{W}/g,'<i class="ms ms-w ms-cost"></i>').replace(/{U}/g,'<i class="ms ms-u ms-cost"></i>').replace(/{B}/g,'<i class="ms ms-b ms-cost"></i>').replace(/{R}/g,'<i class="ms ms-r ms-cost"></i>').replace(/{G}/g,'<i class="ms ms-g ms-cost"></i>').replace(/\{1\}/g,'<i class="ms ms-1 ms-cost"></i>').replace(/\{2\}/g,'<i class="ms ms-2 ms-cost"></i>').replace(/\{3\}/g,'<i class="ms ms-3 ms-cost"></i>').replace(/\{T\}/g,'<i class="ms ms-tap"></i>').replace(/{X}/g,'<i class="ms ms-x ms-cost"></i>').replace(/X/g,'<i class="ms ms-x"></i>').replace(/\((.*)\)/g,"<small><em>($1)</em></small>")},e}function Oe(e){var t,a=O.a.get(e),n=O.a.get("".concat(e,"-fetched"));return!a||(t=n)&&be()().diff(be.a.unix(t),"days")>5?null:a}function ye(e,t){O.a.set(e,t),O.a.set("".concat(e,"-fetched"),be()().unix())}var ve=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={dotsCount:e.start||0},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.interval,a=void 0===t?500:t;this.dotsInterval=setInterval((function(){e.setState({dotsCount:e.state.dotsCount+1})}),a)}},{key:"componentWillUnmount",value:function(){clearInterval(this.dotsInterval)}},{key:"getDotString",value:function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=e%(t+1),s="",r=0;r<n;r++)s+=a;return s}},{key:"render",value:function(){var e=this.props,t=e.label,a=void 0===t?"Loading":t,n=e.className,s=e.numDots,r=void 0===s?3:s,c=this.state.dotsCount,i=this.getDotString(c,r,"."),l="loading-dots ".concat(n);return Object(D.jsxs)("span",{className:l,children:[a,i]})}}]),a}(n.Component),ke=a(155),Ce=a(134),Se=function(e){var t=e.onConfirm,a=e.triggerButtonParams,s=e.triggerText,r=e.headerText,c=e.bodyText,l=e.confirmText,o=e.confirmVariant,d=Object(n.useState)(!1),u=Object(ke.a)(d,2),h=u[0],m=u[1],j=function(e){m(!1),e&&t()},b=Object(D.jsx)(A.a.Header,{children:Object(D.jsx)(A.a.Title,{children:r||"Confirm?"})}),g=Object(D.jsx)(A.a.Body,{children:c||"Confirm?"});return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(A.a,{show:h,onHide:j,animation:!0,contentClassName:"bg-dark text-light noselect",children:[b,c&&g,Object(D.jsxs)(A.a.Footer,{children:[Object(D.jsx)(Ce.a,{children:Object(D.jsx)(w.a,{variant:"secondary",onClick:function(){return j(!1)},block:!0,children:"Close"})}),Object(D.jsx)(Ce.a,{children:Object(D.jsx)(w.a,{variant:o||"primary",onClick:function(){return j(!0)},block:!0,children:l||"Save"})})]})]}),Object(D.jsx)(w.a,Object(i.a)(Object(i.a)({onClick:function(){return m(!0)}},a),{},{children:s}))]})},we=a(214),De=a.p+"static/media/planechase-back.dbcf0de1.jpg",Ne=function(e){var t=e.card,a=Object(n.useState)((null===t||void 0===t?void 0:t.counter)||0),s=Object(ke.a)(a,2),r=s[0],c=s[1],i=function(e){return e.customProperties.find((function(e){return"counter"===e.name})).type}(t);return Object(D.jsxs)("div",{children:[Object(D.jsx)("h1",{className:"text-shadow noselect",children:r}),Object(D.jsx)(w.a,{onClick:function(){t.counter=r+1,c(r+1)},variant:"dark",size:"lg",className:"btn-translucent",children:Object(D.jsxs)("h3",{className:"mb-0",children:["Add ",i," Counter"]})})]})},Te=(a(213),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={modalOpen:!1,fullscreen:!1},e.toggleModal=function(){console.log("Toggle Modal"),e.setState({modalOpen:!e.state.modalOpen})},e.toggleFullScreen=function(){console.log("Toggle FullScreen"),e.setState({fullscreen:!e.state.fullscreen})},e.renderCardImage=function(){return Object(D.jsx)(we.a.Img,{variant:"top",width:"100%",src:e.imageURI(),className:"mtg-card mtg-card-plane"})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.listDisplay,n=e.card,s=e.children;return t?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(P.a.Item,{variant:"dark",onClick:this.toggleModal,children:Object(D.jsx)("div",{children:n.name})}),Object(D.jsx)(A.a,{show:this.state.modalOpen,onHide:this.toggleModal,size:"md",backdrop:!0,dialogClassName:"modal-content-no-border",children:Object(D.jsxs)(A.a.Body,{className:"p-0",centered:"true",children:[Object(D.jsx)(a,{card:n}),s]})})]}):Object(D.jsxs)(we.a,{bg:"black",text:"light",className:"mtg-plane-card",children:[this.renderImage(),this.renderCounter(),this.renderChildren(),this.renderBody(),this.renderActions()]})}},{key:"renderBody",value:function(){var e=this.renderText();return e&&Object(D.jsx)(we.a.Body,{children:e})}},{key:"renderCounter",value:function(){var e=this.props,t=e.card,a=e.renderActions,n=k("displayImages"),s=U("counter",t);if(a&&s)return n?Object(D.jsx)("div",{onDoubleClick:this.toggleFullScreen,children:Object(D.jsx)(we.a.ImgOverlay,{className:"text-center plane-overlay counter-overlay",children:Object(D.jsx)(we.a.Title,{className:"text-center",children:Object(D.jsx)(Ne,{card:t})})})}):Object(D.jsx)(we.a.Body,{className:"text-center pb-0",children:Object(D.jsx)(Ne,{card:t})})}},{key:"renderChildren",value:function(){var e=this.props.children,t=k("displayImages");if(e)return t?Object(D.jsx)("div",{onDoubleClick:this.toggleFullScreen,children:Object(D.jsx)(we.a.ImgOverlay,{className:"text-center plane-overlay child-overlay",children:Object(D.jsx)(we.a.Title,{className:"text-center",children:e})})}):Object(D.jsx)(we.a.Body,{className:"text-center pb-0",children:e})}},{key:"renderActions",value:function(){var e=this.props.card;if(k("displayGatherer")&&e)return Object(D.jsx)(we.a.Footer,{children:Object(D.jsx)(we.a.Link,{href:e.related_uris.gatherer,target:"_blank",rel:"noopener noreferrer",children:"Gatherer"})})}},{key:"renderText",value:function(){var e=this.props.card;if(k("displayText"))return e?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(we.a.Title,{children:Object(D.jsx)("h5",{children:e.name})}),Object(D.jsx)(we.a.Subtitle,{children:e.type_line}),Object(D.jsx)(we.a.Text,{dangerouslySetInnerHTML:e.oracle_html})]}):Object(D.jsx)(we.a.Title,{children:"None"})}},{key:"renderImage",value:function(){if(k("displayImages"))return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{onDoubleClick:this.toggleFullScreen,children:this.renderCardImage()}),Object(D.jsx)(A.a,{show:this.state.fullscreen,onHide:this.toggleFullScreen,backdrop:!0,dialogClassName:"modal-content-full bg-transparent",centered:!0,children:Object(D.jsx)(A.a.Body,{className:"p-0",centered:"true",onClick:this.toggleFullScreen,children:this.renderCardImage()})})]})}},{key:"imageURI",value:function(){var e=this.props.card;return e?J(e):De}}]),a}(n.Component)),_e=a(273),Fe=a.n(_e),Ee=(a(320),a(321),a(194)),Pe=a.n(Ee),Ie=function(e){var t=e.rollDone,a=void 0===t?Pe.a:t;return Object(D.jsx)("div",{className:"planar",children:Object(D.jsx)(Fe.a,{numDice:1,rollDone:function(e){return a(function(e){switch(e){case 1:return"Planeswalk";case 6:return"Chaos";default:return"Blank"}}(e))},defaultRoll:1,outline:!0,outlineColor:"#808080"})})},Me=a(78),Ae=a(199),He=a.n(Ae),Be=function(e){var t=e.enabled,a=e.backdrop,n=void 0!==a&&a,s=e.style,r=void 0===s?{}:s,c=n?{backgroundColor:"#ffffff"}:{};return Object(D.jsx)("span",{children:t?Object(D.jsx)("i",{className:"ms ms-dfc ms-dfc-day",style:He()({},c,r)}):Object(D.jsx)("i",{className:"ms ms-dfc ms-dfc-night",style:He()({},c,r)})})},ze=function(e){return Object(D.jsx)(w.a,Object(i.a)(Object(i.a)({},e),{},{variant:"secondary",children:Object(D.jsx)("i",{className:"ms ms-loyalty-down ms-loyalty-1 ms-2x"})}))},Ye=function(e){return Object(D.jsx)(w.a,Object(i.a)(Object(i.a)({},e),{},{variant:"secondary",children:Object(D.jsx)("i",{className:"ms ms-loyalty-up ms-loyalty-1 ms-2x"})}))},Re=function(e){var t=e.upProps,a=e.downProps,n=e.reverse,s=Object(Me.a)(e,["upProps","downProps","reverse"]);return Object(D.jsx)(M.a,Object(i.a)(Object(i.a)({},s),{},{children:n?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Ye,Object(i.a)({},t)),Object(D.jsx)(ze,Object(i.a)({},a))]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(ze,Object(i.a)({},a)),Object(D.jsx)(Ye,Object(i.a)({},t))]})}))},Le=function(e){return Object(D.jsx)(w.a,Object(i.a)(Object(i.a)({},e),{},{variant:"secondary",children:Object(D.jsx)("i",{className:"ms ms-untap ms-2x ss-mythic ss-grad"})}))},Ge=function(e){return Object(D.jsx)(w.a,Object(i.a)(Object(i.a)({},e),{},{variant:"secondary",children:Object(D.jsx)("i",{className:"ms ms-tap ms-2x ss-mythic ss-grad"})}))},We=function(e){var t=e.unTapProps,a=e.tapProps,n=e.reverse,s=Object(Me.a)(e,["unTapProps","tapProps","reverse"]);return Object(D.jsx)(M.a,Object(i.a)(Object(i.a)({},s),{},{children:n?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Ge,Object(i.a)({},a)),Object(D.jsx)(Le,Object(i.a)({},t))]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Le,Object(i.a)({},t)),Object(D.jsx)(Ge,Object(i.a)({},a))]})}))},Ue=function(e){var t=e.enabled,a=e.text,n=Object(Me.a)(e,["enabled","text"]);return Object(D.jsxs)(w.a,Object(i.a)(Object(i.a)({},n),{},{block:!0,variant:"secondary",children:[Object(D.jsx)("span",{className:"mr-2",children:a}),Object(D.jsx)(Be,{enabled:t,backdrop:!0})]}))},Je=function(e){var t=e.enabled,a=e.text,n=Object(Me.a)(e,["enabled","text"]);return Object(D.jsxs)(w.a,Object(i.a)(Object(i.a)({size:"sm",block:!0},n),{},{variant:t?"info":"secondary",children:[Object(D.jsx)("div",{className:"float-left",children:t?Object(D.jsx)("i",{className:"ms ms-dfc ms-dfc-day text-light"}):Object(D.jsx)("i",{className:"ms ms-dfc ms-dfc-night text-dark"})}),Object(D.jsx)("div",{className:"d-inline",children:a})]}))},Ve=function(e){return Object(D.jsx)(w.a,Object(i.a)(Object(i.a)({variant:"danger"},e),{},{children:Object(D.jsx)("i",{className:"ss ss-x ss-10e ss-rare ss-grad ss-2x"})}))},qe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,planes:[],deck:null,currentCard:null,revealedCards:[],additionalCards:[],scryCards:[],tripleChaosModalOpen:!1,scryModalOpen:!1,planeswalkDisabled:!1,showHistory:!1,showDeck:!1,showDeckImages:!1,showPlanarDie:!0},e.componentDidMount=Object(F.a)(_.a.mark((function t(){var a,n,s,r,c,i,l,o;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe();case 2:a=t.sent,n=$("planechase",a),s=H("planechase"),r=z("planechase")||[],c=G("planechase")||[],i=R("planechase"),l=!!U("top-5",s),o=c.length>0&&!!U("scry-1",s),e.setState({planes:a,loading:!1,deck:n,currentCard:s,revealedCards:r,additionalCards:i,scryCards:c,planeswalkDisabled:l,scryModalOpen:o});case 11:case"end":return t.stop()}}),t)}))),e.refreshDeck=function(){var t=Q("planechase");e.setState({deck:t})},e.planeswalk=function(){var t=ee("planechase");B("planechase",t);var a=[],n=[];if(U("two-planes",t)){a=de("planechase",2,!0),oe("planechase",a);var s=a.filter((function(e){return e.type_line.search("Plane")>=0})),r=a.filter((function(e){return e.type_line.search("Phenomenon")>=0}));s.forEach((function(e){return te("planechase",e)})),re("planechase",r),a=[],n=s}U("top-5",t)&&(a=de("planechase",5,!0),oe("planechase",a),e.setState({planeswalkDisabled:!0})),Y("planechase",a),L("planechase",n),e.refreshDeck(),e.setState({currentCard:t,revealedCards:a,additionalCards:n})},e.reset=Object(F.a)(_.a.mark((function t(){var a,n,s,r,c,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,pe();case 3:a=t.sent,n=$("planechase",a,!0),s=B("planechase",null),r=Y("planechase",[]),c=W("planechase",[]),i=L("planechase",[]),e.setState({planes:a,loading:!1,deck:n,currentCard:s,revealedCards:r,scryCards:c,additionalCards:i,planeswalkDisabled:!1,scryModalOpen:!1});case 10:case"end":return t.stop()}}),t)}))),e.undo=Object(F.a)(_.a.mark((function t(){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=ne("planechase"),e.refreshDeck(),e.setState({currentCard:a});case 3:case"end":return t.stop()}}),t)}))),e.triggerChaos=function(t){var a=e.state.scryCards;if(console.log("Chaos Triggered"),U("triple-chaos",t)){var n=de("planechase",3,!0);oe("planechase",n);var s=ue(n.slice());re("planechase",s),e.refreshDeck(),Y("planechase",n),e.setState({revealedCards:n,tripleChaosModalOpen:!0})}if(U("scry-1",t)){if(!a||0===a.length){var r=de("planechase",1,!1);oe("planechase",r),W("planechase",r),e.setState({scryCards:r})}e.setState({scryModalOpen:!0})}},e.renderDevTools=function(){if(k("devTools"))return Object(D.jsxs)("div",{className:"my-4",children:[Object(D.jsx)("h5",{className:"text-center noselect",children:"Dev Tools"}),Object(D.jsx)(w.a,{onClick:e.undo,variant:"warning",block:!0,children:"Undo"}),e.renderDeck(),Object(D.jsx)(Ue,{text:"Planar Die",onClick:e.togglePlanarDie,enabled:e.state.showPlanarDie})]})},e.togglePlanarDie=function(){e.setState({showPlanarDie:!e.state.showPlanarDie})},e.toggleDeck=function(){e.setState({showDeck:!e.state.showDeck})},e.toggleDeckImages=function(){e.setState({showDeckImages:!e.state.showDeckImages})},e.manipulateDeck=function(){e.refreshDeck()},e.renderDeck=function(){var t=e.state,a=t.deck,n=t.showDeck,r=t.showDeckImages;return Object(D.jsxs)("div",{className:"my-2",children:[Object(D.jsxs)(w.a,{onClick:e.toggleDeck,variant:"secondary",block:!0,children:[n?"Hide":"Show"," Deck"]}),Object(D.jsx)(E.a,{in:n,children:Object(D.jsx)("div",{children:n&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(w.a,{onClick:e.toggleDeckImages,variant:"secondary",block:!0,children:[r?"Hide":"Show"," Full Card"]}),Object(D.jsx)(P.a,{children:a.map((function(t,n){return Object(D.jsxs)(s.a.Fragment,{children:[Object(D.jsx)(Te,{card:t,listDisplay:!r}),Object(D.jsx)(P.a.Item,{className:"text-center justify-content-center d-flex",children:Object(D.jsxs)(I.a,{children:[Object(D.jsx)(Re,{reverse:!0,downProps:{disabled:n===a.length-1,onClick:function(){return e.manipulateDeck(X("planechase",n,n+1))}},upProps:{disabled:0===n,onClick:function(){return e.manipulateDeck(X("planechase",n,n-1))}}}),Object(D.jsx)(We,{className:"ml-2",unTapProps:{disabled:0===n,onClick:function(){return e.manipulateDeck(ie("planechase",t.deck_card_id))}},tapProps:{disabled:n===a.length-1,onClick:function(){return e.manipulateDeck(le("planechase",t.deck_card_id))}}}),Object(D.jsx)(M.a,{className:"ml-2",children:Object(D.jsx)(Ve,{onClick:function(){return e.manipulateDeck(oe("planechase",[t]))}})})]})})]},t.deck_card_id)}))})]})})})]})},e.toggleHistory=function(){e.setState({showHistory:!e.state.showHistory})},e.renderHistory=function(){var t=e.state.showHistory,a=ae("planechase");return Object(D.jsxs)("div",{className:"my-2",children:[Object(D.jsxs)(w.a,{onClick:e.toggleHistory,variant:"secondary",block:!0,children:[t?"Hide":"Show"," History"]}),Object(D.jsx)(E.a,{in:t,children:Object(D.jsx)("div",{children:t&&a&&Object(D.jsx)(P.a,{children:a.reverse().map((function(e){return Object(D.jsx)(Te,{card:e,listDisplay:!0},e.deck_card_id)}))})})})]})},e.selectPlane=function(t){var a=e.state.revealedCards;oe("planechase",a),se("planechase",[t]);var n=a.filter((function(e){return e.deck_card_id!==t.deck_card_id})),s=ue(n.slice());re("planechase",s),Y("planechase",[]),e.setState({planeswalkDisabled:!1,revealedCards:[]}),e.planeswalk()},e._tripleChaosModalClose=function(){Y("planechase",[]),e.setState({tripleChaosModalOpen:!1,revealedCards:[]})},e._tripleChaosModalToggle=function(){e.state.tripleChaosModalOpen&&e._tripleChaosModalClose()},e._scryModalClose=function(){W("planechase",[]),e.setState({scryModalOpen:!1,scryCards:[]})},e._scryTop=function(){var t=e.state.scryCards;se("planechase",t),console.log("Scry Top",t),e.refreshDeck(),W("planechase",[]),e.setState({scryCards:[],scryModalOpen:!1})},e._scryBottom=function(){var t=e.state.scryCards;re("planechase",t),console.log("Scry Bottom",t),e.refreshDeck(),W("planechase",[]),e.setState({scryCards:[],scryModalOpen:!1})},e.renderScryModal=function(){var t=e.state,a=t.scryCards,n=t.scryModalOpen;if(a&&n)return Object(D.jsxs)(A.a,{show:!!n,size:"md",dialogClassName:"bg-secondary",variant:"secondary",backdrop:"static",children:[Object(D.jsx)(A.a.Header,{className:"justify-content-center text-white noselect",children:Object(D.jsxs)(A.a.Title,{children:[Object(D.jsx)("i",{className:"ms ms-chaos mx-4"}),"Scry Card",Object(D.jsx)("i",{className:"ms ms-chaos mx-4"})]})}),Object(D.jsxs)(A.a.Body,{children:[Object(D.jsx)(w.a,{variant:"info",block:!0,onClick:e._scryTop,children:"Top"}),a.map((function(e){return Object(D.jsx)(Te,{card:e},e.deck_card_id)})),Object(D.jsx)(w.a,{variant:"info",block:!0,onClick:e._scryBottom,children:"Bottom"})]})]})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.planes,n=e.deck,s=e.currentCard,r=e.planeswalkDisabled,c=e.showPlanarDie;return Object(D.jsxs)("div",{className:"planechase",children:[Object(D.jsx)(V,{planes:a}),Object(D.jsx)("div",{className:"fixed-top mt-1 ml-1 w-25 text-left",children:Object(D.jsxs)(w.a,{onClick:this.planeswalk,className:"mb-2",variant:"success",disabled:r||t,block:!0,children:[Object(D.jsx)("i",{className:"ms ms-planeswalker ms-2x mx-2"}),Object(D.jsx)("span",{className:"mx-2 d-none d-md-inline",children:"Planeswalk"})]})}),t?Object(D.jsx)(ve,{className:"text-muted"}):Object(D.jsx)("div",{className:"mb-2",children:s?Object(D.jsx)(E.a,{timeout:100,children:Object(D.jsx)(Te,{card:s,renderActions:"true",children:this.renderChaos(s)})},s.deck_card_id):Object(D.jsx)(Te,{})}),this.renderTwoPlanes(),this.renderFivePlanes(),this.renderTripleChaosModal(),this.renderScryModal(),this.renderHistory(),Object(D.jsxs)("p",{className:"text-center my-3 noselect",children:["There are ",n?n.length:0," cards remaining."]}),Object(D.jsx)(Se,{onConfirm:this.reset,headerText:"Reset Planes?",triggerText:"Reset",confirmText:"Reset",confirmVariant:"danger",triggerButtonParams:{variant:"danger",block:!0}}),this.renderDevTools(),c&&!r&&Object(D.jsx)("div",{className:"position-fixed",style:{bottom:"5px",right:"5px"},children:Object(D.jsx)(Ie,{rollDone:function(e){return console.log("Rolled: ".concat(e))}})})]})}},{key:"renderChaos",value:function(e){var t=this;if(U("chaos-trigger",e))return Object(D.jsxs)(w.a,{onClick:function(){return t.triggerChaos(e)},variant:"info",size:"lg",className:"btn-translucent",children:[Object(D.jsx)("i",{className:"ms ms-chaos ms-2x mx-2"}),Object(D.jsx)("span",{className:"mx-2 d-none d-md-inline",children:"Trigger Chaos"})]})}},{key:"renderTwoPlanes",value:function(){var e=this,t=this.state,a=t.currentCard,n=t.additionalCards;if(U("two-planes",a)){var r=n.filter((function(e){return e.type_line.search("Plane")>=0}));return Object(D.jsxs)("div",{children:[Object(D.jsxs)(f.a,{variant:"info",className:"text-center mb-0",children:[Object(D.jsx)("i",{className:"ms ms-planeswalker mx-2"}),"You Are On Both Planes",Object(D.jsx)("i",{className:"ms ms-planeswalker mx-2"})]}),r.map((function(t){return Object(D.jsx)(s.a.Fragment,{children:Object(D.jsx)(Te,{card:t,renderActions:"true",children:e.renderChaos(t)})},t.deck_card_id)}))]})}}},{key:"renderFivePlanes",value:function(){var e=this,t=this.state,a=t.currentCard,n=t.revealedCards;if(U("top-5",a)){console.log(n);var s=n.filter((function(e){return e.type_line.search("Plane")>=0}));return console.log(s),Object(D.jsxs)("div",{children:[Object(D.jsxs)(f.a,{variant:"info",className:"text-center mb-0",children:[Object(D.jsx)("i",{className:"ms ms-planeswalker mx-2"}),"Pick a Plane to Planeswalk To",Object(D.jsx)("i",{className:"ms ms-planeswalker mx-2"})]}),s.map((function(t){return Object(D.jsx)("div",{children:Object(D.jsx)(Te,{card:t,children:Object(D.jsxs)(w.a,{onClick:function(){return e.selectPlane(t)},variant:"primary",className:"btn-translucent",size:"lg",children:[Object(D.jsx)("i",{className:"ms ms-planeswalker mx-2"}),Object(D.jsx)("span",{className:"mx-2",children:"Planeswalk"})]})})},t.deck_card_id)}))]})}}},{key:"renderTripleChaosModal",value:function(){var e=this,t=this.state,a=t.revealedCards,n=t.tripleChaosModalOpen;if(a&&n){var r=a.filter((function(e){return e.type_line.search("Plane")>=0}));return Object(D.jsxs)(A.a,{show:!!n,onHide:this._tripleChaosModalToggle,size:"md",backdrop:!0,dialogClassName:"bg-secondary",children:[Object(D.jsxs)(A.a.Header,{className:"flex-column text-center text-white noselect",children:[Object(D.jsxs)("div",{className:"modal-title h5 mx-auto",children:[Object(D.jsx)("i",{className:"ms ms-chaos mr-1"}),Object(D.jsx)("i",{className:"ms ms-chaos mr-1"}),Object(D.jsx)("i",{className:"ms ms-chaos mr-1"}),Object(D.jsx)("span",{className:"mx-1",children:"Triple Chaos"}),Object(D.jsx)("i",{className:"ms ms-chaos ml-1"}),Object(D.jsx)("i",{className:"ms ms-chaos ml-1"}),Object(D.jsx)("i",{className:"ms ms-chaos ml-1"})]}),Object(D.jsx)("div",{className:"mx-auto",children:Object(D.jsx)("small",{className:"text-center",children:"You Pick Order"})})]}),Object(D.jsx)(A.a.Body,{className:"text-center",children:r.map((function(t){return Object(D.jsx)(s.a.Fragment,{children:Object(D.jsx)(Te,{card:t,children:e.renderChaos(t)})},t.deck_card_id)}))}),Object(D.jsx)(A.a.Footer,{children:Object(D.jsx)(w.a,{variant:"info",block:!0,"aria-label":"Close",onClick:this._tripleChaosModalClose,children:"Done"})})]})}}}]),a}(n.Component),Ke=a(232),Xe=a(233),$e=a(234),Qe=a(235),Ze=function(e){var t=e.schemes;return Object(D.jsxs)(h.a,{title:"Archenemy",children:[Object(D.jsx)("link",{rel:"shortcut icon",href:"mtg/icon/archenemy.ico"}),Object(D.jsx)("link",{rel:"apple-touch-icon",href:"mtg/icon/archenemy_256.png"}),Object(D.jsx)("link",{rel:"apple-touch-icon",sizes:"64x64",href:"mtg/icon/archenemy_64.png"}),Object(D.jsx)("link",{rel:"apple-touch-icon",sizes:"128x128",href:"mtg/icon/archenemy_128.png"}),Object(D.jsx)("link",{rel:"apple-touch-icon",sizes:"256x256",href:"mtg/icon/archenemy_256.png"}),Object(D.jsx)("link",{rel:"manifest",href:"/archenemy-manifest.json"}),t&&t.map((function(e){return Object(D.jsx)("link",{rel:"preload",href:e.image_uris.large,as:"image"},e.id)}))]})},et=[{name:"Assemble the Doomsday Machine",cards:[["All in Good Time",1],["Behold the Power of Destruction",1],["Embrace My Diabolical Vision",1],["Feed the Machine",2],["I Delight in Your Convulsions",1],["I Know All, I See All",2],["Ignite the Cloneforge!",2],["Introductions Are in Order",1],["The Iron Guardian Stirs",2],["My Genius Knows No Bounds",1],["Nothing Can Stop Me Now",1],["The Pieces Are Coming Together",2],["Realms Befitting My Majesty",1],["Your Fate Is Thrice Sealed",1],["Your Puny Minds Cannot Fathom",1]]},{name:"Scorch the World with Dragonfire",cards:[["All Shall Smolder in My Wake",2],["Approach My Molten Realm",1],["The Fate of the Flammable",1],["I Bask in Your Silent Awe",2],["I Delight in Your Convulsions",1],["Introductions Are in Order",1],["Know Naught but Fire",1],["Look Skyward and Despair",2],["My Crushing Masterstroke",1],["My Wish Is Your Command",2],["Realms Befitting My Majesty",1],["Tooth, Claw, and Tail",1],["Which of You Burns Brightest?",2],["Your Fate Is Thrice Sealed",1],["Your Puny Minds Cannot Fathom",1]]},{name:"Trample Civilization Underfoot",cards:[["Every Last Vestige Shall Rot",2],["Evil Comes to Fruition",1],["I Call on the Ancient Magics",1],["I Delight in Your Convulsions",1],["Into the Earthen Maw",1],["Introductions Are in Order",1],["May Civilization Collapse",1],["Nature Demands an Offering",2],["Nature Shields Its Own",2],["Realms Befitting My Majesty",1],["Roots of All Evil",2],["The Very Soil Shall Shake",1],["Your Fate Is Thrice Sealed",1],["Your Puny Minds Cannot Fathom",1],["Your Will Is Not Your Own",2]]},{name:"Bring About the Undead Apocalypse",cards:[["Choose Your Champion",2],["Dance, Pathetic Marionette",1],["The Dead Shall Serve",2],["Every Hope Shall Vanish",2],["I Delight in Your Convulsions",2],["Introductions Are in Order",1],["Mortal Flesh Is Weak",1],["My Undead Horde Awakens",1],["Only Blood Ends Your Nightmares",2],["Realms Befitting My Majesty",1],["Rotted Ones, Lay Siege",2],["Surrender Your Thoughts",1],["Your Fate Is Thrice Sealed",1],["Your Puny Minds Cannot Fathom",1]]},{name:"Archenemy Nicol Bolas",cards:[["Because I Have Willed It",1],["Behold My Grandeur",1],["Bow to My Command",1],["Choose Your Demise",1],["Delight in the Hunt",1],["Every Dream a Nightmare",1],["For Each of You, a Gift",1],["Know Evil",1],["Make Yourself Useful",1],["The Mighty Will Fall",1],["My Forces Are Innumerable",1],["My Laughter Echoes",1],["No One Will Hear Your Cries",1],["Pay Tribute to Me",1],["Power Without Equal",1],["A Reckoning Approaches",1],["There Is No Refuge",1],["This World Belongs to Me",1],["What's Yours Is Now Mine",1],["When Will You Learn?",1]]}],tt=a.p+"static/media/archenemy-back.6d5cbfc7.jpg",at=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={modalOpen:!1},e.toggleModal=function(){console.log("Toggle Modal"),e.setState({modalOpen:!e.state.modalOpen})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.listDisplay,n=e.card,s=e.children;return t?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(P.a.Item,{variant:"dark",onClick:this.toggleModal,children:n.name}),Object(D.jsx)(A.a,{show:this.state.modalOpen,onHide:this.toggleModal,size:"md",backdrop:!0,dialogClassName:"modal-content-no-border",children:Object(D.jsxs)(A.a.Body,{className:"p-0",centered:"true",children:[Object(D.jsx)(a,{card:n}),s]})})]}):Object(D.jsxs)(we.a,{bg:"black",text:"light",className:"mtg-scheme-card",children:[this.renderImage(),this.renderCounter(),this.renderChildren(),this.renderBody(),this.renderActions()]})}},{key:"renderBody",value:function(){var e=this.renderText();return e&&Object(D.jsx)(we.a.Body,{children:e})}},{key:"renderCounter",value:function(){var e=this.props,t=e.card,a=e.renderActions,n=k("displayImages"),s=U("counter",t);if(a&&s)return n?Object(D.jsx)(we.a.ImgOverlay,{className:"text-center scheme-overlay counter-overlay",children:Object(D.jsx)(we.a.Title,{className:"text-center pt-5 mt-sm-5",children:Object(D.jsx)(Ne,{card:t})})}):Object(D.jsx)(we.a.Body,{className:"text-center pb-0",children:Object(D.jsx)(Ne,{card:t})})}},{key:"renderChildren",value:function(){var e=this.props.children,t=k("displayImages");if(e)return t?Object(D.jsx)(we.a.ImgOverlay,{className:"text-center scheme-overlay child-overlay",children:Object(D.jsx)(we.a.Title,{className:"text-center pt-5 mt-sm-5",children:e})}):Object(D.jsx)(we.a.Body,{className:"text-center pb-0",children:e})}},{key:"renderActions",value:function(){var e=this.props.card;if(k("displayGatherer")&&e)return Object(D.jsx)(we.a.Footer,{children:Object(D.jsx)(we.a.Link,{href:e.related_uris.gatherer,target:"_blank",rel:"noopener noreferrer",children:"Gatherer"})})}},{key:"renderText",value:function(){var e=this.props.card;if(k("displayText"))return e?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(we.a.Title,{children:Object(D.jsx)("h5",{children:e.name})}),Object(D.jsx)(we.a.Subtitle,{children:e.type_line}),Object(D.jsx)(we.a.Text,{dangerouslySetInnerHTML:e.oracle_html})]}):Object(D.jsx)(we.a.Title,{children:"None"})}},{key:"renderImage",value:function(){if(k("displayImages"))return Object(D.jsx)(we.a.Img,{variant:"top",width:"100%",src:this.imageURI(),className:"mtg-card mtg-card-scheme"})}},{key:"imageURI",value:function(){var e=this.props.card;return e?e.image_uris.large:tt}}]),a}(n.Component),nt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0,deck:null,currentCard:null,ongoingSchemes:[],schemes:[],showHistory:!1,showDeck:!1,showDeckImages:!1,abandonedOngoing:!1,deckSelection:!0,customDeck:null},e.componentDidMount=Object(F.a)(_.a.mark((function t(){var a,n,s,r,c,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fe();case 2:a=t.sent,n=Q("archenemy"),s=H("archenemy"),r=R("archenemy")||[],c=!!O.a.get("archenemy-abandonedOngoing"),(i=JSON.parse(JSON.stringify(a))).forEach((function(e){return e.count=0})),e.setState({currentCard:s,deck:n,loading:!1,ongoingSchemes:r,schemes:a,abandonedOngoing:c,deckSelection:!n,customDeck:i});case 10:case"end":return t.stop()}}),t)}))),e.refreshDeck=function(){var t=Q("archenemy");e.setState({deck:t})},e.scheme=function(){var t=e.state,a=t.currentCard,n=t.ongoingSchemes;a&&"Ongoing Scheme"===a.type_line&&n.push(a);var s=ee("archenemy");B("archenemy",s),L("archenemy",n),e.refreshDeck(),e.setState({currentCard:s,ongoingSchemes:n,abandonedOngoing:O.a.set("archenemy-abandonedOngoing",!1)})},e.reset=Object(F.a)(_.a.mark((function t(){var a,n,s,r,c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,fe();case 3:a=t.sent,null,Z("archenemy",null),n=B("archenemy",null),s=L("archenemy",[]),r=O.a.set("archenemy-abandonedOngoing",!1),(c=JSON.parse(JSON.stringify(a))).forEach((function(e){return e.count=0})),e.setState({schemes:a,loading:!1,deck:null,currentCard:n,ongoingSchemes:s,abandonedOngoing:r,deckSelection:!0,customDeck:c});case 12:case"end":return t.stop()}}),t)}))),e.undo=Object(F.a)(_.a.mark((function t(){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=ne("archenemy"),e.refreshDeck(),e.setState({currentCard:a});case 3:case"end":return t.stop()}}),t)}))),e.renderDevTools=function(){if(k("devTools"))return Object(D.jsxs)("div",{className:"my-4",children:[Object(D.jsx)("h5",{className:"text-center noselect",children:"Dev Tools"}),Object(D.jsx)(w.a,{onClick:e.undo,variant:"warning",block:!0,children:"Undo"}),e.renderDeck()]})},e.abandonScheme=function(t){var a=e.state,n=a.ongoingSchemes;if(a.currentCard.deck_card_id===t.deck_card_id){console.log("Abandon Current Scheme",t),B("archenemy",null);var s=O.a.set("archenemy-abandonedOngoing",!0);e.setState({currentCard:null,abandonedOngoing:s})}else{console.log("Abandon Scheme",t);var r=n.filter((function(e){return e.deck_card_id!==t.deck_card_id}));L("archenemy",r),e.setState({ongoingSchemes:r})}},e.toggleHistory=function(){e.setState({showHistory:!e.state.showHistory})},e.renderHistory=function(){var t=e.state.showHistory,a=ae("archenemy");return Object(D.jsxs)("div",{className:"my-2",children:[Object(D.jsxs)(w.a,{onClick:e.toggleHistory,block:!0,variant:"secondary",children:[t?"Hide":"Show"," History"]}),Object(D.jsx)(E.a,{in:t,children:Object(D.jsx)("div",{children:t&&a&&Object(D.jsx)(P.a,{children:a.reverse().map((function(e){return Object(D.jsx)(at,{card:e,listDisplay:!0},e.deck_card_id)}))})})})]})},e.resetCustomDeck=function(){var t=e.state.customDeck;t.forEach((function(e){return e.count=0})),e.setState({customDeck:t})},e.deckCardTitle=function(t){return Object(D.jsxs)(we.a.Title,{className:"d-flex",children:[Object(D.jsx)("div",{className:"h3 text-center align-self-center",children:e.deckIcon(t)}),Object(D.jsx)("div",{className:"flex-grow-1",children:Object(D.jsx)("h3",{className:"text-center",children:t})}),Object(D.jsx)("div",{className:"h3 text-center align-self-center",children:e.deckIcon(t)})]})},e.toggleDeck=function(){e.setState({showDeck:!e.state.showDeck})},e.toggleDeckImages=function(){e.setState({showDeckImages:!e.state.showDeckImages})},e.manipulateDeck=function(){e.refreshDeck()},e.renderDeck=function(){var t=e.state,a=t.deck,n=t.showDeck,r=t.showDeckImages;return Object(D.jsxs)("div",{className:"my-2",children:[Object(D.jsxs)(w.a,{onClick:e.toggleDeck,block:!0,variant:"secondary",children:[n?"Hide":"Show"," Deck"]}),Object(D.jsx)(E.a,{in:n,children:Object(D.jsx)("div",{children:n&&a&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(w.a,{onClick:e.toggleDeckImages,block:!0,variant:"secondary",children:[r?"Hide":"Show"," Full Card"]}),Object(D.jsx)(P.a,{children:a.map((function(t,n){return Object(D.jsxs)(s.a.Fragment,{children:[Object(D.jsx)(at,{card:t,listDisplay:!r}),Object(D.jsx)(P.a.Item,{className:"text-center justify-content-center d-flex",children:Object(D.jsxs)(I.a,{children:[Object(D.jsx)(Re,{reverse:!0,downProps:{disabled:n===a.length-1,onClick:function(){return e.manipulateDeck(X("archenemy",n,n+1))}},upProps:{disabled:0===n,onClick:function(){return e.manipulateDeck(X("archenemy",n,n-1))}}}),Object(D.jsx)(We,{className:"ml-2",unTapProps:{disabled:0===n,onClick:function(){return e.manipulateDeck(ie("archenemy",t.deck_card_id))}},tapProps:{disabled:n===a.length-1,onClick:function(){return e.manipulateDeck(le("archenemy",t.deck_card_id))}}}),Object(D.jsx)(M.a,{className:"ml-2",children:Object(D.jsx)(Ve,{onClick:function(){return e.manipulateDeck(oe("archenemy",[t]))}})})]})})]},t.deck_card_id)}))})]})})})]})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.schemes,n=e.deckSelection;return Object(D.jsxs)("div",{className:"archenemy",children:[Object(D.jsx)(Ze,{schemes:a}),t?Object(D.jsx)(ve,{className:"text-muted"}):n?this.renderDeckSelect():this.renderGamePlay(),this.renderDevTools()]})}},{key:"renderGamePlay",value:function(){var e=this.state,t=e.loading,a=e.deck,n=e.currentCard,s=e.abandonedOngoing;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"fixed-top mt-1 ml-1 w-25 text-left",children:Object(D.jsxs)(w.a,{onClick:this.scheme,className:"mb-2",variant:"success",disabled:t,block:!0,children:[Object(D.jsx)("i",{className:"ss ss-arc ss-3x mx-2"}),Object(D.jsx)("span",{className:"mx-2 d-none d-md-inline",children:"Scheme"})]})}),t?Object(D.jsx)(ve,{className:"text-muted"}):Object(D.jsx)("div",{className:"pt-2 mb-2 d-flex justify-content-center",children:s?Object(D.jsx)(Ke.a,{className:"bg-danger text-center",fluid:!0,children:Object(D.jsx)(Xe.a,{fluid:!0,children:Object(D.jsx)("h1",{children:"Current Scheme Has Been Foiled!"})})}):n?Object(D.jsx)(E.a,{timeout:100,children:Object(D.jsx)(at,{card:n,renderActions:"true",children:this.renderAbandon(n)})},n.deck_card_id):Object(D.jsx)(at,{})}),this.renderOngoingSchemes(),this.renderHistory(),Object(D.jsxs)("p",{className:"text-center my-3 noselect",children:["There are ",a?a.length:0," cards remaining."]}),Object(D.jsx)(Se,{onConfirm:this.reset,headerText:"Reset Schemes?",triggerText:"Reset",confirmText:"Reset",confirmVariant:"danger",triggerButtonParams:{variant:"danger",block:!0}})]})}},{key:"renderDeckSelect",value:function(){var e=this,t=this.state.schemes;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(we.a,{className:"noselect",children:Object(D.jsxs)(we.a.Body,{children:[this.deckCardTitle("All Schemes"),Object(D.jsx)(w.a,{block:!0,variant:"success",onClick:function(){return e.selectDeck("All",t)},children:"Use All"})]})}),this.renderPrebuilts(),this.renderBuildCustomDeck()]})}},{key:"renderOngoingSchemes",value:function(){var e=this,t=this.state.ongoingSchemes;if(t&&t.length>0)return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(f.a,{variant:"info",className:"text-center",children:Object(D.jsx)("h5",{children:"Ongoing Schemes"})}),Object(D.jsx)("div",{className:"d-flex justify-content-center flex-wrap ",children:t.map((function(t){return Object(D.jsx)(s.a.Fragment,{children:Object(D.jsx)(at,{card:t,renderActions:"true",children:e.renderAbandon(t)})},t.deck_card_id)}))})]})}},{key:"renderAbandon",value:function(e){var t=this;if("Ongoing Scheme"===e.type_line&&!U("unabandonable",e))return Object(D.jsx)(w.a,{onClick:function(){return t.abandonScheme(e)},variant:"danger",size:"lg",className:"btn-translucent",children:Object(D.jsxs)("h2",{className:"mb-0",children:[Object(D.jsx)("i",{className:"ss ss-bok ss-2x ss-grad ss-rare mx-2"}),Object(D.jsx)("span",{className:"mx-2 d-none d-md-inline",children:"Abandon Scheme"})]})})}},{key:"selectDeck",value:function(e,t){console.log("Selected ".concat(e),t);var a="All"===e?t:[];t.forEach((function(e){for(var t=0;t<e.count;t++)a.push(e)}));var n=$("archenemy",a,!0);this.setState({deck:n,deckSelection:!1})}},{key:"incrementCount",value:function(e){var t=this.state.customDeck;t.forEach((function(t){t.id===e.id&&(t.count+=1,t.count=Math.min(t.count,2))})),this.setState({customDeck:t})}},{key:"decrementCount",value:function(e){var t=this.state.customDeck;t.forEach((function(t){t.id===e.id&&(t.count-=1,t.count=Math.max(t.count,0))})),this.setState({customDeck:t})}},{key:"customDeckSize",value:function(){return this.state.customDeck.map((function(e){return e.count})).reduce((function(e,t){return e+t}),0)}},{key:"renderBuildCustomDeck",value:function(){var e=this,t=this.state.customDeck,a=t.map((function(t){return Object(D.jsxs)(P.a.Item,{variant:"dark",className:"noselect",children:[Object(D.jsx)(at,{card:t}),Object(D.jsxs)("div",{className:"text-center",children:[Object(D.jsx)("h1",{children:Object(D.jsxs)($e.a,{pill:!0,variant:t.count>0?"success":"dark",children:["x",t.count]})}),Object(D.jsx)(Re,{downProps:{disabled:t.count<=0,onClick:function(){return e.decrementCount(t)}},upProps:{disabled:t.count>=2,onClick:function(){return e.incrementCount(t)}}})]})]},t.id)}));return Object(D.jsx)(Qe.a,{children:Object(D.jsx)(we.a,{className:"noselect",children:Object(D.jsxs)(we.a.Body,{children:[this.deckCardTitle("Custom Deck"),Object(D.jsx)(Qe.a.Toggle,{as:w.a,block:!0,eventKey:"custom-deck-toggle",variant:"secondary",children:"Build Custom"}),Object(D.jsx)(Qe.a.Collapse,{eventKey:"custom-deck-toggle",children:Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"fixed-top mt-1 ml-1 text-left",children:Object(D.jsxs)(f.a,{variant:"info",className:"clearfix",children:[Object(D.jsxs)("h4",{className:"float-left",children:["Custom Deck Size: ",this.customDeckSize()]}),Object(D.jsxs)(M.a,{className:"float-right",children:[Object(D.jsx)(w.a,{variant:"danger",onClick:this.resetCustomDeck,children:"Reset"}),Object(D.jsx)(w.a,{variant:"success",onClick:function(){return e.selectDeck("Custom",t)},children:"Use Deck"})]})]})}),Object(D.jsx)(P.a,{children:a})]})}),Object(D.jsx)(w.a,{block:!0,variant:"success",onClick:function(){return e.selectDeck("Custom",t)},children:"Use Custom Deck"})]})})})}},{key:"deckIcon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ss-mythic ss-grad";switch(e){case"All Schemes":return Object(D.jsx)("i",{className:"ss ".concat(t," ss-lea")});case"Custom Deck":return Object(D.jsx)("i",{className:"ss ".concat(t," ss-chr")});case"Assemble the Doomsday Machine":return Object(D.jsx)("i",{className:"ss ".concat(t," ss-usg")});case"Scorch the World with Dragonfire":return Object(D.jsx)("i",{className:"ss ".concat(t," ss-scg")});case"Trample Civilization Underfoot":return Object(D.jsx)("i",{className:"ss ".concat(t," ss-c20")});case"Bring About the Undead Apocalypse":return Object(D.jsx)("i",{className:"ss ".concat(t," ss-pd3")});case"Archenemy Nicol Bolas":return Object(D.jsx)("i",{className:"ss ".concat(t," ss-hou")});default:return null}}},{key:"renderPrebuilts",value:function(){var e=this,t=this.state.schemes,a=et.map((function(e){return e.name})).map((function(a,n){var s=function(e,t){return et.find((function(t){return t.name===e})).cards.map((function(e){var a=t.find((function(t){return t.name===e[0]})),n=JSON.parse(JSON.stringify(a));return n.count=e[1],n}))}(a,t),r=s.map((function(e,t){return Object(D.jsxs)(P.a.Item,{variant:"dark",children:[Object(D.jsx)(at,{card:e}),Object(D.jsx)("h1",{className:"text-center",children:Object(D.jsxs)($e.a,{pill:!0,variant:e.count>0?"success":"dark",children:["x",e.count]})})]},t)}));return Object(D.jsx)(Qe.a,{children:Object(D.jsx)(we.a,{children:Object(D.jsxs)(we.a.Body,{children:[e.deckCardTitle(a),Object(D.jsx)(Qe.a.Toggle,{as:w.a,block:!0,eventKey:"prebuilt-".concat(n),variant:"secondary",children:"Decklist"}),Object(D.jsx)(Qe.a.Collapse,{eventKey:"prebuilt-".concat(n),children:Object(D.jsx)(P.a,{children:r})}),Object(D.jsx)(w.a,{block:!0,variant:"success",onClick:function(){return e.selectDeck(a,s)},children:"Use Deck"})]})})},n)}));return Object(D.jsx)(D.Fragment,{children:a})}}]),a}(n.Component),st=a(236),rt=a(237),ct=a(101),it=a.n(ct),lt=a(200),ot=a.n(lt),dt=a(201),ut=a.n(dt),ht=function(){return Object(D.jsxs)(h.a,{title:"SYB",children:[Object(D.jsx)("link",{rel:"shortcut icon",href:"mtg/icon/starter.ico"}),Object(D.jsx)("link",{rel:"apple-touch-icon",href:"mtg/icon/starter_256.png"}),Object(D.jsx)("link",{rel:"apple-touch-icon",sizes:"64x64",href:"mtg/icon/starter_64.png"}),Object(D.jsx)("link",{rel:"apple-touch-icon",sizes:"128x128",href:"mtg/icon/starter_128.png"}),Object(D.jsx)("link",{rel:"apple-touch-icon",sizes:"256x256",href:"mtg/icon/starter_256.png"}),Object(D.jsx)("link",{rel:"manifest",href:"/syb-manifest.json"})]})},mt=[{name:"Chode Mode",defaultEnabled:!0},{name:"Deck Swaps",defaultEnabled:!1},{name:"Planechase",defaultEnabled:!0},{name:"EDH",defaultEnabled:!0},{name:"2 Headed Giant",defaultEnabled:!0},{name:"SYB",defaultEnabled:!0},{name:"Range 1",defaultEnabled:!0},{name:"Free for All",defaultEnabled:!0},{name:"Pentacle",defaultEnabled:!0},{name:"Secret Partners",defaultEnabled:!0},{name:"Archenemy",defaultEnabled:!0},{name:"Emperor",defaultEnabled:!0},{name:"Teams",defaultEnabled:!1},{name:"Star",defaultEnabled:!1}],jt=function(e){return!0},bt=function(e){return e%2===0},gt=function(e){return e>2&&bt(e)},pt=function(e){return e>2},ft=function(e){return e>=6&&e%3===0},xt=function(e){return e>=6&&bt(e)},Ot=function(e){return e>3},yt=function(e){return e>=5},vt=function(e){return e>=5&&function(e){return e%2===1}(e)},kt=function(e){return e>2&&bt(e)},Ct=[{id:1,name:"Chode Mode",initial:.5,tags:["Chode Mode"],players:jt},{id:2,name:"Planechase ",initial:.5,tags:["Planechase"],players:jt},{id:3,name:"Planechase EDH",initial:.5,tags:["Planechase","EDH"],players:jt},{id:4,name:"EDH Free for All",initial:.5,tags:["EDH","Free for All"],players:pt},{id:5,name:"EDH SYB",initial:.5,tags:["EDH","SYB"],showSwaps:!0,players:jt},{id:6,name:"EDH SYB Deck Swaps",displayName:"EDH SYB",initial:0,tags:["EDH","SYB","Deck Swaps"],showSwaps:!0,players:jt},{id:7,name:"EDH Emperor",initial:.5,tags:["EDH","Emperor"],showSwaps:!0,players:ft},{id:8,name:"EDH Emperor Deck Swaps",displayName:"EDH Emperor",initial:0,tags:["EDH","Emperor","Deck Swaps"],showSwaps:!0,players:ft},{id:9,name:"2 Headed Giant SYB",initial:.5,tags:["2 Headed Giant"],players:gt},{id:10,name:"2 Headed Giant Free for All",initial:.5,tags:["2 Headed Giant","Free for All"],players:function(e){return gt(e)&&pt(e)&&e>4}},{id:11,name:"Emperor",initial:.5,tags:["Emperor"],showSwaps:!0,players:ft},{id:12,name:"Emperor Deck Swaps",displayName:"Emperor",initial:0,tags:["Emperor","Deck Swaps"],showSwaps:!0,players:ft},{id:13,name:"Range 1",initial:.5,tags:["Range 1"],players:Ot},{id:14,name:"Free for All",initial:.5,tags:["Free for All"],players:pt},{id:15,name:"SYB",initial:.5,tags:["SYB"],showSwaps:!0,players:jt},{id:16,name:"SYB Deck Swaps",displayName:"SYB",initial:.5,tags:["SYB","Deck Swaps"],showSwaps:!0,players:jt},{id:17,name:"Secret Partners",initial:.5,tags:["Secret Partners"],showSwaps:!0,players:xt},{id:18,name:"Secret Partners Deck Swaps",displayName:"Secret Partners",initial:.5,tags:["Secret Partners","Deck Swaps"],showSwaps:!0,players:xt},{id:19,name:"EDH Secret Partners",initial:.5,tags:["EDH","Secret Partners"],showSwaps:!0,players:xt},{id:20,name:"EDH Secret Partners Deck Swaps",displayName:"EDH Secret Partners",initial:0,tags:["EDH","Secret Partners","Deck Swaps"],showSwaps:!0,players:xt},{id:21,name:"EDH Pentacle",initial:.5,tags:["EDH","Pentacle"],showSwaps:!0,players:yt},{id:22,name:"EDH Pentacle Deck Swaps",displayName:"EDH Pentacle",initial:0,tags:["EDH","Pentacle","Deck Swaps"],players:yt},{id:23,name:"Pentacle",initial:.5,tags:["Pentacle"],showSwaps:!0,players:yt},{id:24,name:"Pentacle Deck Swaps",displayName:"Pentacle",initial:.5,tags:["Pentacle","Deck Swaps"],showSwaps:!0,players:yt},{id:25,name:"Archenemy",initial:.5,tags:["Archenemy"],players:function(e){return 4===e}},{id:26,name:"EDH 2 Headed Giant SYB",initial:.1,tags:["EDH","2 Headed Giant"],players:gt},{id:27,name:"EDH 2 Headed Giant FFA",initial:.1,tags:["EDH","2 Headed Giant","Free for All"],players:function(e){return gt(e)&&pt(e)&&e>4}},{id:28,name:"EDH Range 1",initial:.5,tags:["EDH","Range 1"],players:Ot},{id:29,name:"Teams",initial:.5,tags:["Teams"],players:kt},{id:30,name:"EDH Teams",initial:.5,tags:["Teams","EDH"],players:kt},{id:31,name:"Star",initial:.5,tags:["Star"],players:vt},{id:32,name:"EDH Star",initial:.5,tags:["Star","EDH"],players:vt}],St="#17a2b8",wt="#FF4444",Dt={name:"circle",nodeDimensionsIncludeLabels:!0},Nt={name:"grid",nodeDimensionsIncludeLabels:!0,rows:2},Tt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={playerCount:4,playerTargets:1,targets:null,loadingDirection:!1,cySet:!1,labels:{0:"J"},showTurnEdges:!0,starTurn:!1,showScrewEdges:!0},e.cy=null,e.dialog=null,e.componentDidMount=function(){var t=O.a.get("syb-playerCount")||4,a=O.a.get("syb-playerTargets")||1,n=O.a.get("syb-targets")||null,s=O.a.get("syb-tableShape")||"circle",r=O.a.get("syb-labels")||{0:"J"};e.setState({playerCount:t,playerTargets:a,targets:n,tableShape:s,labels:r})},e.whichWay=function(){var t=O.a.set("syb-targets",null);e.setState({loadingDirection:!0,targets:t}),setTimeout((function(){e.regenerateOrder(),e.setState({loadingDirection:!1})}),1500)},e.reset=Object(F.a)(_.a.mark((function t(){var a,n,s,r,c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0}),a=O.a.set("syb-playerCount",4),n=O.a.set("syb-playerTargets",1),s=O.a.set("syb-targets",null),r=O.a.set("syb-tableShape","circle"),c=O.a.set("syb-labels",{0:"J"}),e.removeListeners(),e.setState({playerCount:a,playerTargets:n,targets:s,tableShape:r,labels:c},(function(){return e.regenerateOrder(a,n)}));case 8:case"end":return t.stop()}}),t)}))),e.toggleTurnEdges=function(){e.setState({showTurnEdges:!e.state.showTurnEdges})},e.toggleScrewEdges=function(){e.setState({showScrewEdges:!e.state.showScrewEdges})},e.toggleStarTurn=function(){e.setState({starTurn:!e.state.starTurn})},e.renderDevTools=function(){if(k("devTools"))return Object(D.jsxs)("div",{className:"my-4",children:[Object(D.jsx)("h5",{className:"text-center noselect",children:"Dev Tools"}),Object(D.jsx)(Ue,{text:"Turn Edges",onClick:e.toggleTurnEdges,enabled:e.state.showTurnEdges}),Object(D.jsx)(Ue,{text:"Screw Edges",onClick:e.toggleScrewEdges,enabled:e.state.showScrewEdges}),Object(D.jsx)(Ue,{text:"Star Turn",onClick:e.toggleStarTurn,enabled:e.state.starTurn})]})},e}return Object(o.a)(a,[{key:"generateNodes",value:function(){var e=this.state,t=e.playerCount,a=e.labels;return Array.from(Array(t).keys()).map((function(e){var t=a[e]||e;return{data:{id:"player-".concat(e),label:t,type:"triangle-tee"}}}))}},{key:"generateEdges",value:function(){var e=this.state,t=e.targets,a=e.playerTargets,n=e.playerCount,s=e.showTurnEdges,r=e.starTurn,c=e.showScrewEdges;if(!t)return[];var i=c?t.flatMap((function(e,s){return Array(a).fill(1).map((function(a,r){var c=t[(s+r+1)%n];return{data:{source:"player-".concat(e),target:"player-".concat(c),label:"Edge from ".concat(e," to ").concat(c)},classes:"screw"}}))})):[],l=s?t.map((function(e,a){var n=a+2,s=n>t.length?1:n>=t.length?0:n,c=a+1>=t.length?0:a+1,i=r&&vt(t.length)?s:c;return{data:{source:"player-".concat(a),target:"player-".concat(i),label:"Turn from ".concat(a," to ").concat(i)},classes:"turn"}})):[];return i.concat(l)}},{key:"regenerateOrder",value:function(e){var t=this.state.playerCount,a=Array.from(Array(e||t).keys()),n=O.a.set("syb-targets",ue(a));this.setState({targets:n})}},{key:"handleCy",value:function(e){var t=this,a=this.isSquare()?Nt:Dt,n=ut()((function(){e.layout(a).run()}),100),s=ut()((function(e){var a=e.target;t.setLabel(a.id().split("-")[1])}),100);this.state.cySet||(e.on("add remove",(function(){n()})),e.nodes().on("tap click",s),e.on("mouseover touchstart","node",(function(t){var a=t.target;a.addClass("highlight");var n=a.incomers(".screw"),s=n.union(n.sources());s.addClass("highlight incoming");var r=a.outgoers(".screw"),c=r.union(r.targets());c.addClass("highlight outgoing"),e.elements().difference(c.union(s)).not(a).addClass("semitransparent")})),e.on("mouseout touchend","node",(function(t){e.elements().removeClass("semitransparent highlight incoming outgoing")})),this.setState({cySet:!0})),this.cy=e}},{key:"setLabel",value:function(e){var t=this;console.log("Setting label",e),this.dialog.show({title:"Who is this?",bsSize:"sm",actions:[it.a.CancelAction(),it.a.OKAction((function(a){var n=t.state.labels;n[e]=a.value,O.a.set("syb-labels",n),t.setState({labels:n})}))],prompt:it.a.TextPrompt({initialValue:e})})}},{key:"renderCyto",value:function(){var e=this,t=this.isSquare()?Nt:Dt,a={nodes:this.generateNodes(),edges:this.generateEdges()},n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{square:!1}).square;return[{selector:"node",style:{padding:"50%",width:"50%",height:"50%","background-color":St,"text-valign":"center","text-halign":"center",content:"data(label)"}},{selector:"node[label]",style:{label:"data(label)","font-size":"2em",color:"white"}},{selector:".screw",style:{width:"5%","curve-style":e?"unbundled-bezier":"straight","target-arrow-shape":"triangle ","arrow-scale":2.5,"target-arrow-color":wt,"line-fill":"linear-gradient","line-gradient-stop-colors":[St,wt],"z-index":2}},{selector:".turn",style:{width:"2%","curve-style":"unbundled-bezier","control-point-distances":[-20,-25,-20],"control-point-weights":[.25,.5,.75],"target-arrow-shape":"vee ","line-style":"dashed","arrow-scale":1.5,"target-arrow-color":"#707070","line-color":"#707070",opacity:.5,"z-index":1}},{selector:"node.highlight",style:{"background-color":"#218838","border-color":"#218838","border-width":"2px"}},{selector:"node.highlight.incoming",style:{"background-color":St,"border-color":St,"border-width":"2px"}},{selector:"node.highlight.outgoing",style:{"background-color":wt,"border-color":wt,"border-width":"2px"}},{selector:"node.highlight.outgoing.incoming",style:{"border-color":St,"border-width":"2px"}},{selector:"node.semitransparent",style:{opacity:"0.5"}},{selector:"edge.highlight",style:{"curve-style":"unbundled-bezier"}},{selector:"edge.highlight.incoming",style:{"curve-style":"unbundled-bezier","target-arrow-color":St,"line-gradient-stop-colors":[St,St],"z-index":3}},{selector:"edge.highlight.outgoing",style:{"target-arrow-color":wt,"line-gradient-stop-colors":[wt,wt],"z-index":4}},{selector:"edge.semitransparent",style:{opacity:"0.2"}}]}({square:this.isSquare()});return Object(D.jsx)(ot.a,{cy:function(t){return e.handleCy(t)},elements:ot.a.normalizeElements(a),style:{width:"100vw",height:"100vh"},className:"flex-grow",stylesheet:n,userPanningEnabled:!1,layout:t})}},{key:"removeListeners",value:function(){this.cy.removeListener("add remove"),this.cy.nodes().removeListener("click tap touchstart touchend mouseover mouseout"),this.setState({cySet:!1})}},{key:"isSquare",value:function(){this.state.tableShape;return!1}},{key:"incrementCount",value:function(){var e=this.state.playerCount,t=O.a.set("syb-playerCount",e+1);this.adjustTargetCount(t),this.regenerateOrder(t),this.removeListeners(),this.setState({playerCount:t})}},{key:"decrementCount",value:function(){var e=this.state.playerCount,t=O.a.set("syb-playerCount",Math.max(e-1,1));this.adjustTargetCount(t),this.regenerateOrder(t),this.removeListeners(),this.setState({playerCount:t})}},{key:"adjustTargetCount",value:function(e){var t=this.state.playerTargets,a=Math.min(t,Math.max(e-2,1));t!==a&&this.setState({playerTargets:a})}},{key:"incrementTargetCount",value:function(){var e=this.state,t=e.playerCount,a=e.playerTargets,n=O.a.set("syb-playerTargets",Math.min(a+1,t));this.regenerateOrder(t,n),this.removeListeners(),this.setState({playerTargets:n})}},{key:"decrementTargetCount",value:function(){var e=this.state,t=e.playerCount,a=e.playerTargets,n=O.a.set("syb-playerTargets",Math.max(a-1,1));this.regenerateOrder(t,n),this.removeListeners(),this.setState({playerTargets:n})}},{key:"setTableShape",value:function(e){var t=O.a.set("syb-tableShape",e);this.setState({tableShape:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.playerCount,n=t.playerTargets,s=(t.tableShape,t.loadingDirection);return Object(D.jsxs)("div",{className:"syb",children:[Object(D.jsx)(ht,{}),Object(D.jsxs)(st.a,{className:"my-4 text-center",children:[Object(D.jsxs)(Ce.a,{children:[Object(D.jsxs)("h1",{children:[a," Players"]}),Object(D.jsxs)(M.a,{children:[Object(D.jsx)(ze,{disabled:a<=1,onClick:function(){return e.decrementCount()}}),Object(D.jsx)(Ye,{onClick:function(){return e.incrementCount()}})]})]}),Object(D.jsxs)(Ce.a,{children:[Object(D.jsxs)("h1",{children:[n," Targets"]}),Object(D.jsxs)(M.a,{children:[Object(D.jsx)(ze,{disabled:n<=1,onClick:function(){return e.decrementTargetCount()}}),Object(D.jsx)(Ye,{onClick:function(){return e.incrementTargetCount()},disabled:n>=a-2})]})]}),!1]}),Object(D.jsx)("div",{className:"text-center my-2",children:Object(D.jsx)(w.a,{variant:"danger",onClick:this.whichWay,block:!0,disabled:s,children:s?"Calculating...":"Which way are we screwing?"})}),Object(D.jsxs)("div",{className:"d-flex",children:[s&&Object(D.jsx)("div",{className:"position-absolute w-75 text-center",style:{top:"45%",left:"0%"},children:Object(D.jsx)(rt.a,{variant:"danger",animation:"grow",className:"position-absolute",style:{width:"10rem",height:"10rem"}})}),this.renderCyto()]}),Object(D.jsx)(w.a,{onClick:this.reset,variant:"danger",block:!0,children:"Reset"}),this.renderDevTools(),Object(D.jsx)(it.a,{ref:function(t){e.dialog=t}})]})}}]),a}(n.Component),_t=function(){return Object(D.jsxs)(h.a,{title:"Formats",children:[Object(D.jsx)("link",{rel:"shortcut icon",href:"mtg/icon/evg.ico"}),Object(D.jsx)("link",{rel:"apple-touch-icon",href:"mtg/icon/evg_180.png"}),Object(D.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"mtg/icon/evg_180.png"}),Object(D.jsx)("link",{rel:"apple-touch-icon",sizes:"192x192",href:"mtg/icon/evg_192.png"}),Object(D.jsx)("link",{rel:"apple-touch-icon",sizes:"512x512",href:"mtg/icon/evg_512.png"}),Object(D.jsx)("link",{rel:"manifest",href:"/formats-manifest.json"})]})},Ft=a(274),Et=a.n(Ft),Pt=a(275),It=a.n(Pt),Mt=a(276),At=a.n(Mt),Ht=(a(446),a(447),a(202)),Bt=a(154),zt=Ht.a.Handle,Yt=function(e){var t=e.value,a=e.dragging,n=e.index,s=Object(Me.a)(e,["value","dragging","index"]);return Object(D.jsx)(Bt.a,{prefixCls:"rc-slider-tooltip",overlay:t,visible:a,placement:"top",children:Object(D.jsx)(zt,Object(i.a)({value:t},s))},n)},Rt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={playerCount:5,tags:null,currentFormats:null,activeFormat:null,loadingFormat:!1,swapTriggered:!1},e.componentDidMount=function(){var t=O.a.get("formats-playerCount")||O.a.set("formats-playerCount",5),a=O.a.get("formats-tags")||O.a.set("formats-tags",e.createTags()),n=O.a.get("formats-current")||O.a.set("formats-current",e.createFormats());e.setState({playerCount:t,tags:a,currentFormats:n})},e.reset=function(){var t=O.a.set("formats-playerCount",5),a=O.a.set("formats-tags",e.createTags()),n=O.a.set("formats-current",e.createFormats());e.setState({playerCount:t,tags:a,currentFormats:n})},e.rand=function(e,t){return Math.random()*(t-e)+e},e.getRandomFormat=function(t){var a=t.reduce((function(e,t){return e+t.weight}),0),n=e.rand(0,a),s=0;return t.find((function(e){return s+=e.weight,n<=s}))},e.updateFormatValue=function(t,a){var n=e.state,s=n.playerCount,r=n.currentFormats;r[s].forEach((function(e){e.name===t.name&&(t.weight=a/100)}));var c=O.a.set("formats-current",r);e.setState({currentFormats:c})},e.triggerSwap=function(){e.setState({swapTriggered:!0})},e.toggleTag=function(t){var a=e.state.tags;a.forEach((function(e){e.name===t.name&&(e.enabled=!e.enabled)}));var n=O.a.set("formats-tags",a);e.setState({tags:n})},e}return Object(o.a)(a,[{key:"pickFormat",value:function(){var e=this;console.log("Generate Format"),this.setState({loadingFormat:!0,swapTriggered:!1});var t=this.activeFormats(),a=this.getRandomFormat(t);console.log("picked item",a),setTimeout((function(){e.setState({loadingFormat:!1,activeFormat:a})}),1e3)}},{key:"incrementCount",value:function(){var e=this.state.playerCount,t=O.a.set("formats-playerCount",Math.min(e+1,9));this.setState({playerCount:t,activeFormat:null})}},{key:"decrementCount",value:function(){var e=this.state.playerCount,t=O.a.set("formats-playerCount",Math.max(e-1,2));this.setState({playerCount:t,activeFormat:null})}},{key:"render",value:function(){var e=this,t=this.state,a=t.playerCount,n=t.activeFormat,s=t.loadingFormat,r=t.swapTriggered,c=!s&&!r&&n&&n.showSwaps&&this.enabledTags().includes("Deck Swaps");return Object(D.jsxs)("div",{className:"formats",children:[Object(D.jsx)(_t,{}),Object(D.jsx)("div",{className:"my-4 noselect",children:Object(D.jsxs)("div",{className:"text-center",children:[Object(D.jsxs)("h1",{children:[a," Players"]}),Object(D.jsxs)(M.a,{className:"my-4",children:[Object(D.jsx)(ze,{disabled:a<=2,onClick:function(){return e.decrementCount()}}),Object(D.jsx)(Ye,{onClick:function(){return e.incrementCount()},disabled:a>=9})]}),Object(D.jsxs)("div",{className:"text-center mb-5",children:[Object(D.jsx)(w.a,{block:!0,variant:"danger",onClick:function(){return e.pickFormat()},disabled:s,children:s?"Computing...":"Which Format?"}),s?Object(D.jsx)(rt.a,{size:"lg",animation:"border",variant:"primary",className:"mt-3 mb-2",children:Object(D.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(D.jsx)("h1",{className:"my-2",children:this.renderActiveFormatName()}),c&&Object(D.jsx)(w.a,{onClick:this.triggerSwap,block:!0,className:"w-50 mx-auto",variant:"success",children:"Deckswaps?"})]})]})}),Object(D.jsx)("hr",{className:"border-info"}),Object(D.jsx)("div",{className:"mb-5",children:this.renderFormatToggles()}),Object(D.jsx)("div",{className:"mb-5 noselect",children:this.renderActiveFormats()}),Object(D.jsx)("div",{className:"my-3",children:Object(D.jsx)(Se,{onConfirm:this.reset,headerText:"Reset Formats?",triggerText:"Reset",confirmText:"Reset",confirmVariant:"danger",triggerButtonParams:{variant:"danger",block:!0}})})]})}},{key:"renderActiveFormatName",value:function(){var e=this.state,t=e.activeFormat,a=e.swapTriggered;return t?a?t.name:t.displayName||t.name:"None"}},{key:"createFormats",value:function(){for(var e={},t=function(t){e[t]=Et()(Ct.filter((function(e){return e.players&&e.players(t)}))),e[t].forEach((function(e){return e.weight=e.initial}))},a=2;a<=9;a++)t(a);return e}},{key:"activeTags",value:function(){var e=this.state,t=e.currentFormats,a=e.playerCount;return t?At()(It()(t[a],(function(e){return e.tags}))).sort():[]}},{key:"createTags",value:function(){return mt.map((function(e){return{name:e.name,enabled:e.defaultEnabled}}))}},{key:"renderFormatToggles",value:function(){var e=this,t=this.state.tags;if(t){var a=this.activeTags(),n=t.filter((function(e){return a.includes(e.name)})).map((function(t,a){return Object(D.jsx)("div",{className:"col-6 col-md-4 col-lg-3 mb-1",children:Object(D.jsx)(Je,{onClick:function(){e.toggleTag(t)},enabled:t.enabled,text:t.name})},a)}));return Object(D.jsx)("div",{className:"row",children:n})}}},{key:"enabledTags",value:function(){var e=this.state.tags;return e?e.filter((function(e){return e.enabled})).map((function(e){return e.name})):[]}},{key:"activeFormats",value:function(){var e=this.state,t=e.tags,a=e.currentFormats,n=e.playerCount,s=null;if(console.log(" Player",n),console.log("format",a),t&&a&&n){s=a[n];var r=this.enabledTags();console.log("enabledTags",r),s=s.filter((function(e){return e.tags.every((function(e){return r.includes(e)}))})),console.log("Formats",s)}return s}},{key:"renderActiveFormats",value:function(){var e=this,t=this.state.playerCount,a=this.activeFormats();if(a)return a.map((function(a){return Object(D.jsxs)("div",{className:"row mb-2",children:[Object(D.jsx)("div",{className:"col-5",children:a.name}),Object(D.jsx)("div",{className:"col-7",children:Object(D.jsx)(Ht.a,{min:0,max:100,marks:{25:"25",50:"50",75:"75"},defaultValue:100*a.weight,included:!0,handle:Yt,onAfterChange:function(t){e.updateFormatValue(a,t)}})})]},"".concat(t,"-").concat(a.id,"-").concat(100*a.weight))}))}}]),a}(n.Component),Lt={branch:"main",tags:[],commit:{shortHash:"7426038",hash:"742603814e6e09d0d8f52f4af24611fd00c90eca",date:"2021-05-05T23:36:59-04:00",message:"extract buttons and cyto style"}},Gt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={isOpen:!1,disclaimerDismissed:!1,displayText:!1,displayImages:!1,devTools:!1,displayGatherer:!1},e.toggle=function(){e.setState({isOpen:!e.state.isOpen})},e.componentDidMount=function(){e.versionCheck(),e.setState({disclaimerDismissed:k("disclaimerDismissed"),displayText:k("displayText"),displayImages:k("displayImages"),devTools:k("devTools")})},e.versionCheck=function(){k("version")!==Lt.commit.shortHash&&O.a.clearAll(),C("version",Lt.commit.shortHash)},e.dismissDisclaimer=function(){e.setState({disclaimerDismissed:C("disclaimerDismissed",!0)})},e._toggleSetting=function(t){var a={};a[t]=S(t),e.setState(a)},e._mtgToggler=function(e,t,a){return Object(D.jsxs)(b.a.Item,{onClick:a,children:[Object(D.jsx)(Be,{enabled:e}),Object(D.jsx)("span",{className:"ml-3",children:t})]})},e.closeNavbar=function(){e.state.isOpen&&e.setState({isOpen:!1})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.disclaimerDismissed,n=t.displayText,s=t.displayImages,r=t.displayGatherer,c=t.devTools;return Object(D.jsx)(m.a,{children:Object(D.jsxs)(h.b,{children:[Object(D.jsx)(h.a,{titleTemplate:"%s - Jibbermaster"}),Object(D.jsxs)(g.a,{variant:"dark",expand:"md",className:"text-right p-1 noselect",expanded:this.state.isOpen,children:[Object(D.jsx)(g.a.Brand,{}),Object(D.jsx)(g.a.Toggle,{onClick:this.toggle}),Object(D.jsx)(g.a.Collapse,{children:Object(D.jsxs)(p.a,{className:"ml-auto",navbar:!0,children:[Object(D.jsx)(p.a.Item,{children:Object(D.jsx)(p.a.Link,{as:m.b,exact:!0,to:"/",activeClassName:"active",onClick:this.closeNavbar,children:"Home"})}),Object(D.jsx)(p.a.Item,{children:Object(D.jsx)(p.a.Link,{as:m.b,exact:!0,to:"/planechase",activeClassName:"active",onClick:this.closeNavbar,children:"Planechase"})}),Object(D.jsx)(p.a.Item,{children:Object(D.jsx)(p.a.Link,{as:m.b,exact:!0,to:"/archenemy",activeClassName:"active",onClick:this.closeNavbar,children:"Archenemy"})}),Object(D.jsx)(p.a.Item,{children:Object(D.jsx)(p.a.Link,{as:m.b,exact:!0,to:"/syb",activeClassName:"active",onClick:this.closeNavbar,children:"SYB"})}),Object(D.jsx)(p.a.Item,{children:Object(D.jsx)(p.a.Link,{as:m.b,exact:!0,to:"/formats",activeClassName:"active",onClick:this.closeNavbar,children:"Formats"})}),Object(D.jsxs)(b.a,{navbar:!0,onToggle:function(t){return!t&&e.closeNavbar()},children:[Object(D.jsx)(b.a.Toggle,{as:p.a.Link,children:"Settings"}),Object(D.jsxs)(b.a.Menu,{alignRight:!0,children:[this._mtgToggler(a,"Disclaimer Dismissed",(function(){return e._toggleSetting("disclaimerDismissed")})),this._mtgToggler(n,"Display Text",(function(){return e._toggleSetting("displayText")})),this._mtgToggler(s,"Display Images",(function(){return e._toggleSetting("displayImages")})),this._mtgToggler(r,"Display Gatherer",(function(){return e._toggleSetting("displayGatherer")})),this._mtgToggler(c,"Dev Tools",(function(){return e._toggleSetting("devTools")})),Object(D.jsx)(b.a.Divider,{}),Object(D.jsx)(b.a.Item,{onClick:function(){return O.a.clearAll()},children:"Clear Everything"}),this.state.devTools&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(b.a.Divider,{}),Object(D.jsxs)(b.a.Item,{disabled:!0,children:["Version ",k("version")]})]})]})]})]})})]}),Object(D.jsxs)("div",{className:"app text-light bg-dark col-md-8 offset-md-2 col-lg-8 offset-lg-2 col-xl-6 offset-xl-3",children:[Object(D.jsxs)(j.c,{children:[Object(D.jsx)(j.a,{path:"/",exact:!0,render:function(e){return Object(D.jsx)(N,Object(i.a)({},e))}}),Object(D.jsx)(j.a,{path:"/archenemy",exact:!0,render:function(e){return Object(D.jsx)(nt,Object(i.a)({},e))}}),Object(D.jsx)(j.a,{path:"/planechase",exact:!0,render:function(e){return Object(D.jsx)(qe,Object(i.a)({},e))}}),Object(D.jsx)(j.a,{path:"/syb",exact:!0,render:function(e){return Object(D.jsx)(Tt,Object(i.a)({},e))}}),Object(D.jsx)(j.a,{path:"/formats",exact:!0,render:function(e){return Object(D.jsx)(Rt,Object(i.a)({},e))}})]}),Object(D.jsxs)(f.a,{variant:"warning",className:"fixed-bottom mb-0 py-1",show:!this.state.disclaimerDismissed,onClose:this.dismissDisclaimer,dismissible:!0,children:[Object(D.jsx)("h6",{children:"Disclaimer"}),Object(D.jsx)("small",{className:"text-muted m-0",children:"This site is created for personal use. Magic: The Gathering, the mana symbols, the tap symbol and all other related images are owned by Wizards of the Coast. jibbermaster.com is unaffiliated with Wizards of the Coast."})]})]})]})})}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(D.jsx)(Gt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[501,1,2]]]);
//# sourceMappingURL=main.659f17b8.chunk.js.map