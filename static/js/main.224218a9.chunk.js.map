{"version":3,"sources":["pages/home/index.js","mtg/card.js","pages/planechase/Helmet.js","util/shuffleArray.js","util/api.js","components/Loading.js","components/Confirm.js","images/planechase-back.jpg","components/magic/Counter.js","hooks/useLocalState.tsx","hooks/useSettings.tsx","components/magic/Card.js","components/magic/Plane.js","components/magic/planar-die/PlanarDie.js","components/magic/DoubleFaceIcon.js","components/magic/Buttons.js","mtg/DeckContext.js","components/game/History.js","components/game/Deck.js","components/DevTools.js","components/game/ActionButton.js","pages/planechase/ScryModal.js","pages/planechase/ChaosButton.js","pages/planechase/TripleChaosModal.js","mtg/GameContext.js","pages/planechase/index.js","pages/archenemy/Helmet.js","images/archenemy-back.jpg","components/magic/Scheme.js","pages/archenemy/AbandonButton.js","pages/archenemy/DeckCardTitle.js","mtg/prebuilt-decks.js","pages/archenemy/Prebuilts.js","pages/archenemy/CustomDeckBuilder.js","pages/archenemy/DeckSelect.js","pages/archenemy/index.js","pages/syb/Helmet.js","pages/formats/formats.js","pages/syb/Cyto.js","pages/syb/index.js","pages/formats/Helmet.js","pages/formats/index.js","components/Disclaimer.js","components/Navigation.js","App.js","serviceWorker.js","index.js"],"names":["Home","className","title","rel","href","Button","as","NavLink","exact","to","block","variant","size","hasCustomProperty","property","card","customProperties","find","p","name","gathererImageURL","multiverse_ids","PlanechaseHelmet","planes","sizes","map","id","shuffleArray","array","temporaryValue","randomIndex","currentIndex","length","Math","floor","random","internet","axios","create","getAllPlanechaseCards","a","cached","console","log","get","response","cache","data","addAdditionalProperties","error","getAllArchenemyCards","schemes","properties","Aretopolis","type","oracle_html","__html","oracle_text","replace","prefix","time","store","cacheDate","moment","diff","unix","set","Loading","label","start","numDots","interval","useState","dotsCount","setDotsCount","useEffect","dotsInterval","setInterval","clearInterval","dots","getDotString","classes","count","max","char","repeat","Confirm","onConfirm","triggerButtonParams","triggerText","headerText","bodyText","confirmText","confirmVariant","open","setOpen","close","confirmed","header","Modal","Header","Title","body","Body","show","onHide","animation","contentClassName","Footer","Col","onClick","Counter","counter","setCounter","getCounterType","useLocalState","key","defaultValue","stickyValue","window","localStorage","getItem","JSON","parse","value","setValue","setItem","stringify","gitInfo","SettingsContext","React","createContext","useSettings","useContext","s","SettingsProvider","children","disclaimerDismissed","setDisclaimerDismissed","displayText","setDisplayText","displayImages","setDisplayImages","devTools","setDevTools","displayGatherer","setDisplayGatherer","getSetting","useCallback","setting","setSetting","commit","shortHash","clearAll","Provider","toggleSetting","CardText","Card","Subtitle","type_line","Text","dangerouslySetInnerHTML","Plane","listDisplay","displayActions","modalOpen","setModalOpen","fullscreen","setFullscreen","settings","hasCounters","emptyChildren","imageURI","back","toggleModal","isOpen","toggleFullScreen","isFullscreen","renderCardImage","Img","width","src","ListGroup","Item","backdrop","dialogClassName","centered","bg","text","onDoubleClick","renderImage","ImgOverlay","cn","renderBody","Link","related_uris","target","renderActions","PlanarDie","rollDone","noop","numDice","r","roll","translateRoll","defaultRoll","outline","outlineColor","DoubleFaceIcon","enabled","invert","style","LoyaltyDownButton","props","LoyaltyUpButton","LoyaltyButtonGroup","upProps","downProps","reverse","ButtonGroup","UnTapButton","TapButton","TapButtonGroup","unTapProps","tapProps","DoubleFaceButton","DoubleFaceHighlightButton","TenthEditionButton","DeckContext","useDeckContext","DeckProvider","deck","setDeck","isInit","setInit","history","setHistory","updateHistory","resetHistory","addCardsToTop","topCards","prevDeck","addCardsToBottom","bottomCards","findCardByDeckCardId","deckCardId","c","deck_card_id","removeCards","cardsToRemove","filter","reInit","initDeck","cards","reset","clonedCards","uuidv4","newDeck","moveCard","from","splice","drawCard","shift","undoDraw","findCard","findAndPutOnTop","tmpCard","findAndPutOnBottom","revealCards","numReveal","onlyPlanes","revealedCards","min","tmpCount","i","push","search","shuffle","History","CardType","showHistory","setShowHistory","Fade","in","Deck","showDeck","setShowDeck","showDeckImages","setShowDeckImages","context","Fragment","ButtonToolbar","disabled","DevTools","ActionButton","icon","ScryModal","scryCards","onScryTop","onScryBottom","ChaosButton","TripleChaosModal","chaosClick","revealedPlanes","aria-label","GameContext","useGameContext","GameProvider","currentCard","setCurrentCard","setRevealedCards","additionalCards","setAdditionalCards","setScryCards","clearCurrentCard","clearRevealedCards","clearAdditionalCards","clearScryCards","Planechase","loading","setLoading","setPlanes","tripleChaosModalOpen","setTripleChaosModalOpen","scryModalOpen","setScryModalOpen","showPlanarDie","setShowPlanarDie","game","planeswalkDisabled","fetchPlanes","newPlanes","planeswalk","newCard","newRevealedCards","newAdditionalCards","revealedPhenomenon","forEach","undo","lastCard","triggerChaos","shuffledCards","slice","newScryCards","_tripleChaosModalClose","cardType","timeout","Alert","renderTwoPlanes","restCards","setTimeout","selectPlane","renderFivePlanes","bottom","right","face","ArchenemyHelmet","image_uris","Scheme","image","AbandonButton","deckIcon","DeckCardTitle","DECKS","Prebuilts","onSelectDeck","prebuiltItems","prebuilt","cardList","deckname","scheme","clonedCard","getCardList","cardListItems","Badge","pill","Accordion","Toggle","eventKey","Collapse","CustomDeckBuilder","customDeck","setCustomDeck","newCustomDeck","decrementCount","incrementCount","reduce","b","DeckSelect","Archenemy","setSchemes","deckSelection","setDeckSelection","ongoingSchemes","abandonedOngoing","setAbandonedOnGoing","fetchSchemes","newSchemes","renderOngoingSchemes","abandonScheme","newOngoing","newCards","selectDeck","Jumbotron","fluid","Container","renderGamePlay","SYBHelmet","TAGS","defaultEnabled","canAny","canEven","can2Hg","canFreeForAll","canEmperor","canSecretPartner","canRange1","canPentacle","canStar","canOdd","canTeams","FORMATS","initial","tags","players","showSwaps","displayName","SOURCE_COLOR","TARGET_COLOR","DEFAULT_TABLE_SHAPE","DEFAULT_LABELS","0","circleLayout","nodeDimensionsIncludeLabels","gridLayout","rows","SYB","playerCount","setPlayerCount","playerTargets","setPlayerTargets","targets","setTargets","labels","setLabels","setTableShape","showTurnEdges","setShowTurnEdges","starTurn","setStarTurn","showScrewEdges","setShowScrewEdges","cySet","setCySet","loadingDirection","setLoadingDirection","cyContainer","useRef","dialog","current","nodes","each","d","currentLabel","playerNumber","split","newLabel","generateEdges","screwEdges","flatMap","player","Array","fill","_","source","turnEdges","starNum","starTurnTarget","normalTurnTarget","concat","regenerateOrder","keys","setLabel","number","bsSize","actions","Dialog","CancelAction","OKAction","prompt","TextPrompt","initialValue","removeListeners","removeListener","isSquare","adjustTargetCount","newPlayerTargets","Row","newPlayerCount","top","left","Spinner","height","layout","elements","edges","stylesheet","square","selector","padding","content","color","opacity","cytoStyle","cy","refreshLayout","debounce","run","nodeClick","e","clickedNode","on","sel","addClass","incomers","allIncomers","union","sources","outgoers","allOutgoers","difference","not","removeClass","handleCy","CytoscapeComponent","normalizeElements","userPanningEnabled","renderCyto","ref","component","FormatsHelmet","handle","dragging","index","restProps","prefixCls","overlay","visible","placement","Handle","createTags","t","createFormats","formats","cloneDeep","f","weight","Formats","setTags","currentFormats","setCurrentFormats","activeFormat","setActiveFormat","loadingFormat","setLoadingFormat","swapTriggered","setSwapTriggered","getRandomFormat","list","totalWeight","result","cur","randomNum","weightSum","item","enabledTags","FormatToggles","active","uniq","sort","values","includes","tag","activeFormats","every","ActiveFormats","marks","25","50","75","included","onAfterChange","format","updateFormatValue","showDeckswapButton","Disclaimer","onClose","dismissible","Navigation","closeNavbar","Toggler","Dropdown","NavItem","Nav","RRNavLink","activeClassName","Navbar","expand","expanded","Brand","navbar","onToggle","Menu","alignRight","Divider","clear","Providers","Main","path","render","App","titleTemplate","Boolean","location","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.224218a9.chunk.js","sourcesContent":["import React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport { NavLink } from \"react-router-dom\";\nimport { Button } from \"react-bootstrap\";\n\nexport const Home = () => (\n  <div className=\"home\">\n    <Helmet title=\"Magic\">\n      <link rel=\"manifest\" href={process.env.PUBLIC_URL + \"/manifest.json\"} />\n    </Helmet>\n    <div className=\"mt-4\">\n      <Button\n        as={NavLink}\n        exact\n        to=\"/planechase\"\n        block\n        variant=\"info\"\n        size=\"lg\"\n      >\n        <i className=\"ms ms-planeswalker ms-4x mx-2 d-block\" />\n        <span className=\"d-block\">Planechase</span>\n      </Button>\n      <Button\n        as={NavLink}\n        exact\n        to=\"/archenemy\"\n        block\n        variant=\"danger\"\n        size=\"lg\"\n      >\n        <i className=\"ss ss-arc ss-3x mx-2 d-block\" />\n        <span className=\"d-block\">Archenemy</span>\n      </Button>\n      <Button as={NavLink} exact to=\"/syb\" block variant=\"success\" size=\"lg\">\n        <i className=\"ss ss-s00 ss-3x mx-2 d-block\" />\n        <span className=\"d-block\">SYB</span>\n      </Button>\n      <Button\n        as={NavLink}\n        exact\n        to=\"/formats\"\n        block\n        variant=\"primary\"\n        size=\"lg\"\n      >\n        <i className=\"ss ss-evg ss-3x mx-2 d-block\" />\n        <span className=\"d-block\">Formats</span>\n      </Button>\n    </div>\n  </div>\n);\n","export const hasCustomProperty = (property, card) => {\n  return card && card.customProperties.find(p => p.name === property);\n};\n\nexport const getCounterType = card => {\n  const property = card.customProperties.find(p => p.name === \"counter\");\n  return property.type;\n};\n\nexport const gathererImageURL = card => {\n  return `https://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=${card.multiverse_ids[0]}&type=card`;\n};\n","import React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport { gathererImageURL } from \"../../mtg/card.js\";\n\nexport const PlanechaseHelmet = ({ planes }) => {\n  return (\n    <Helmet title=\"Planechase\">\n      <link\n        rel=\"shortcut icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase.ico\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase_256.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"64x64\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase_64.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"128x128\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase_128.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"256x256\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase_256.png\"}\n      />\n      <link\n        rel=\"manifest\"\n        href={process.env.PUBLIC_URL + \"/planechase-manifest.json\"}\n      />\n      {planes &&\n        planes.map(p => (\n          <link\n            rel=\"preload\"\n            href={gathererImageURL(p)}\n            as=\"image\"\n            key={p.id}\n          />\n        ))}\n    </Helmet>\n  );\n};\n","export const shuffleArray = array => {\n  let currentIndex = array.length,\n    temporaryValue,\n    randomIndex;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n};\n","import axios from \"axios\";\nimport moment from \"moment\";\nimport store from \"store\";\n// TODO use expire store\nexport const internet = axios.create();\n\nconst PLANES_URL =\n  \"https://api.scryfall.com/cards/search?include_extras=1&q=t%3Aplane+or+t%3Aphenomenon&unique=cards\";\n\nconst SCHEMES_URL =\n  \"https://api.scryfall.com/cards/search?include_extras=1&q=t%3Ascheme&unique=cards\";\n\nexport const getAllPlanechaseCards = async () => {\n  try {\n    let planes = cached(\"planes\");\n    if (!planes) {\n      console.log(\"Loading from Axios\");\n      let response = await internet.get(PLANES_URL);\n      planes = response.data.data;\n      planes = planes.map(p => addAdditionalProperties(p));\n      cache(\"planes\", planes);\n      // TODO use the expire store parameter\n    } else {\n      console.log(\"Loaded from store\");\n    }\n    return planes;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const getAllArchenemyCards = async () => {\n  try {\n    let schemes = cached(\"schemes\");\n    if (!schemes) {\n      console.log(\"Loading from Axios\");\n      let response = await internet.get(SCHEMES_URL);\n      schemes = response.data.data;\n      schemes = schemes.map(p => addAdditionalProperties(p));\n      cache(\"schemes\", schemes);\n      // TODO use the expire store parameter\n    } else {\n      console.log(\"Loaded from store\");\n    }\n    return schemes;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nfunction addAdditionalProperties(card) {\n  const properties = {\n    Aretopolis: [{ name: \"counter\", type: \"Scroll\" }],\n    \"Chaotic Aether\": [{ name: \"all-chaos\" }],\n    \"Interplanar Tunnel\": [{ name: \"top-5\" }],\n    \"Kilnspire District\": [{ name: \"counter\", type: \"Charge\" }],\n    \"Mount Keralia\": [{ name: \"counter\", type: \"Pressure\" }],\n    \"Naar Isle\": [{ name: \"counter\", type: \"Flame\" }],\n    \"Spatial Merging\": [{ name: \"two-planes\" }],\n    \"Stairs to Infinity\": [{ name: \"chaos-trigger\" }, { name: \"scry-1\" }],\n    \"Pools of Becoming\": [{ name: \"chaos-trigger\" }, { name: \"triple-chaos\" }],\n    \"Your Inescapable Doom\": [\n      { name: \"unabandonable\" },\n      { name: \"counter\", type: \"Doom\" }\n    ]\n  };\n\n  if (properties[card.name]) {\n    card.customProperties = properties[card.name];\n  } else {\n    card.customProperties = [];\n  }\n\n  card.oracle_html = createMarkup(card.oracle_text);\n\n  return card;\n}\n\nfunction createMarkup(text) {\n  text = text.replace(/\\r\\n/g, \"<br />\").replace(/[\\r\\n]/g, \"<br />\");\n  text = text.replace(/{CHAOS}/g, '<i class=\"ms ms-chaos\"></i>');\n  text = text.replace(/CHAOS/g, '<i class=\"ms ms-chaos\"></i>');\n  text = text.replace(/{W}/g, '<i class=\"ms ms-w ms-cost\"></i>');\n  text = text.replace(/{U}/g, '<i class=\"ms ms-u ms-cost\"></i>');\n  text = text.replace(/{B}/g, '<i class=\"ms ms-b ms-cost\"></i>');\n  text = text.replace(/{R}/g, '<i class=\"ms ms-r ms-cost\"></i>');\n  text = text.replace(/{G}/g, '<i class=\"ms ms-g ms-cost\"></i>');\n  text = text.replace(/\\{1\\}/g, '<i class=\"ms ms-1 ms-cost\"></i>');\n  text = text.replace(/\\{2\\}/g, '<i class=\"ms ms-2 ms-cost\"></i>');\n  text = text.replace(/\\{3\\}/g, '<i class=\"ms ms-3 ms-cost\"></i>');\n  text = text.replace(/\\{T\\}/g, '<i class=\"ms ms-tap\"></i>');\n  text = text.replace(/{X}/g, '<i class=\"ms ms-x ms-cost\"></i>');\n  text = text.replace(/X/g, '<i class=\"ms ms-x\"></i>');\n  text = text.replace(/\\((.*)\\)/g, \"<small><em>($1)</em></small>\");\n  return { __html: text };\n}\n\nfunction cached(prefix) {\n  let data = store.get(prefix);\n  let cacheDate = store.get(`${prefix}-fetched`);\n  if (data && !old(cacheDate)) {\n    return data;\n  }\n  return null;\n}\n\nfunction cache(prefix, data) {\n  store.set(prefix, data);\n  store.set(`${prefix}-fetched`, moment().unix());\n}\n\nfunction old(time) {\n  return time && moment().diff(moment.unix(time), \"days\") > 5;\n}\n","import React, { useState, useEffect } from \"react\";\n\nexport const Loading = ({\n  label = \"Loading\",\n  start = 0,\n  numDots = 3,\n  interval = 500,\n  className\n}) => {\n  const [dotsCount, setDotsCount] = useState(start);\n\n  useEffect(() => {\n    const dotsInterval = setInterval(() => {\n      setDotsCount(dotsCount + 1);\n    }, interval);\n\n    return () => {\n      clearInterval(dotsInterval);\n    };\n  });\n\n  const dots = getDotString(dotsCount, numDots);\n  const classes = `loading-dots ${className}`;\n\n  return (\n    <span className={classes}>\n      {label}\n      {dots}\n    </span>\n  );\n};\n\nconst getDotString = (count, max, char = \".\") => char.repeat((count % max) + 1);\n","import React, { useState } from \"react\";\n\nimport { Button, Col, Modal } from \"react-bootstrap\";\n\nexport const Confirm = ({\n  onConfirm,\n  triggerButtonParams,\n  triggerText,\n  headerText = \"Confirm?\",\n  bodyText,\n  confirmText = \"Save\",\n  confirmVariant = \"primary\"\n}) => {\n  const [open, setOpen] = useState(false);\n  const close = confirmed => {\n    setOpen(false);\n    if (confirmed) {\n      onConfirm();\n    }\n  };\n\n  const header = (\n    <Modal.Header>\n      <Modal.Title>{headerText}</Modal.Title>\n    </Modal.Header>\n  );\n\n  const body = <Modal.Body>{bodyText || \"Confirm?\"}</Modal.Body>;\n\n  return (\n    <>\n      <Modal\n        show={open}\n        onHide={close}\n        animation={true}\n        contentClassName=\"bg-dark text-light noselect\"\n      >\n        {header}\n        {bodyText && body}\n        <Modal.Footer>\n          <Col>\n            <Button variant=\"secondary\" onClick={() => close(false)} block>\n              Close\n            </Button>\n          </Col>\n          <Col>\n            <Button variant={confirmVariant} onClick={() => close(true)} block>\n              {confirmText}\n            </Button>\n          </Col>\n        </Modal.Footer>\n      </Modal>\n      <Button onClick={() => setOpen(true)} {...triggerButtonParams}>\n        {triggerText}\n      </Button>\n    </>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/planechase-back.dbcf0de1.jpg\";","import React, { useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { getCounterType } from \"../../mtg/card.js\";\n\nexport const Counter = ({ card }) => {\n  const [counter, setCounter] = useState(card?.counter || 0);\n  const type = getCounterType(card);\n  const incrementCounter = () => {\n    card.counter = counter + 1;\n    setCounter(counter + 1);\n  };\n  return (\n    <div>\n      <h1 className=\"text-shadow noselect\">{counter}</h1>\n      <Button\n        onClick={incrementCounter}\n        variant=\"dark\"\n        size=\"lg\"\n        className=\"btn-translucent\"\n      >\n        <h3 className=\"mb-0\">Add {type} Counter</h3>\n      </Button>\n    </div>\n  );\n};\n","// Hook\n// https://www.joshwcomeau.com/react/persisting-react-state-in-localstorage/\n// https://usehooks-typescript.com/react-hook/use-local-storage\nimport { useEffect, useState } from \"react\";\n\nexport const useLocalState = (key: string, defaultValue: any) => {\n  const [value, setValue] = useState(() => {\n    const stickyValue = window.localStorage.getItem(key);\n    return stickyValue !== null ? JSON.parse(stickyValue) : defaultValue;\n  });\n\n  useEffect(() => {\n    const stickyValue = window.localStorage.getItem(key);\n    if (stickyValue === null && defaultValue) {\n      setValue(defaultValue);\n    }\n  }, [key, defaultValue]);\n\n  useEffect(() => {\n    const stickyValue = window.localStorage.getItem(key);\n    if (stickyValue !== null) {\n      setValue(JSON.parse(stickyValue));\n    }\n  }, [key]);\n\n  useEffect(() => {\n    window.localStorage.setItem(key, JSON.stringify(value));\n  }, [key, value]);\n\n  return [value, setValue];\n};\n","import React, { useCallback, useContext, useEffect } from \"react\";\nimport GitInfo from \"react-git-info/macro\";\nimport store from \"store\";\nimport { useLocalState } from \"../hooks/useLocalState\";\n\nconst gitInfo = GitInfo();\nexport const SettingsContext = React.createContext({});\nexport const useSettings = () => useContext(SettingsContext);\n\nconst s = (key: string) => `setting-${key}`;\n\nexport const SettingsProvider = ({ children }: { children: any }) => {\n  const [disclaimerDismissed, setDisclaimerDismissed] = useLocalState(\n    s(\"disclaimerDismissed\"),\n    false\n  );\n  const [displayText, setDisplayText] = useLocalState(s(\"displayText\"), false);\n  const [displayImages, setDisplayImages] = useLocalState(\n    s(\"displayImages\"),\n    true\n  );\n  const [devTools, setDevTools] = useLocalState(s(\"devTools\"), false);\n  const [displayGatherer, setDisplayGatherer] = useLocalState(\n    s(\"displayGatherer\"),\n    false\n  );\n\n  const getSetting = useCallback((setting: string) => {\n    return store.get(s(setting));\n  }, []);\n\n  const setSetting = useCallback((setting: string, value: any) => {\n    return store.set(s(setting), value);\n  }, []);\n\n  const toggleSetting = (setting: string) => {\n    const value = getSetting(setting);\n    return setSetting(setting, !value);\n  };\n\n  useEffect(() => {\n    const versionCheck = () => {\n      const version = getSetting(\"version\");\n      if (version !== gitInfo.commit.shortHash) {\n        // TODO: Future refine this reset\n        store.clearAll();\n      }\n      setSetting(\"version\", gitInfo.commit.shortHash);\n    };\n\n    versionCheck();\n  }, [getSetting, setSetting]);\n\n  return (\n    <SettingsContext.Provider\n      value={{\n        getSetting,\n        setSetting,\n        toggleSetting,\n        disclaimerDismissed,\n        setDisclaimerDismissed,\n        displayText,\n        setDisplayText,\n        displayImages,\n        setDisplayImages,\n        devTools,\n        setDevTools,\n        displayGatherer,\n        setDisplayGatherer\n      }}\n    >\n      {children}\n    </SettingsContext.Provider>\n  );\n};\n","import React from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport { useSettings } from \"../../hooks/useSettings\";\n\nexport const CardText = ({ card }) => {\n  const settings = useSettings();\n\n  if (settings.displayText) {\n    if (card) {\n      return (\n        <>\n          <Card.Title>\n            <h5>{card.name}</h5>\n          </Card.Title>\n          <Card.Subtitle>{card.type_line}</Card.Subtitle>\n          <Card.Text dangerouslySetInnerHTML={card.oracle_html} />\n        </>\n      );\n    } else {\n      return <Card.Title>None</Card.Title>;\n    }\n  }\n\n  return null;\n};\n","import React, { useState } from \"react\";\nimport { Card, ListGroup, Modal } from \"react-bootstrap\";\nimport { gathererImageURL } from \"../../mtg/card\";\nimport back from \"../../images/planechase-back.jpg\";\nimport { Counter } from \"./Counter\";\nimport \"./planes.scss\";\n\nimport { hasCustomProperty } from \"../../mtg/card.js\";\nimport { CardText } from \"./Card\";\nimport cn from \"classnames\";\nimport { useSettings } from \"../../hooks/useSettings\";\n\nexport const Plane = ({ listDisplay, card, displayActions, children }) => {\n  const [modalOpen, setModalOpen] = useState(false);\n  const [fullscreen, setFullscreen] = useState(false);\n\n  const settings = useSettings();\n  const { displayImages, displayGatherer } = settings;\n\n  const hasCounters = hasCustomProperty(\"counter\", card);\n  const emptyChildren = children?.type === null;\n\n  // Use Scryfall and rotate or use Gatherer\n  // scryfall (rotated) card.image_uris[\"border_crop\"]\n  const imageURI = card ? gathererImageURL(card) : back;\n\n  const counter = displayActions && hasCounters && <Counter card={card} />;\n\n  const toggleModal = () => {\n    console.log(\"Toggle Modal\");\n    setModalOpen(isOpen => !isOpen);\n  };\n\n  const toggleFullScreen = () => {\n    console.log(\"Toggle FullScreen\");\n    setFullscreen(isFullscreen => !isFullscreen);\n  };\n\n  const renderBody = () => {\n    const text = CardText({ card });\n    const hasBody = !!text;\n\n    return hasBody && <Card.Body>{text}</Card.Body>;\n  };\n\n  const renderActions = () => {\n    if (displayGatherer && card) {\n      return (\n        <Card.Footer>\n          <Card.Link\n            href={card.related_uris[\"gatherer\"]}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Gatherer\n          </Card.Link>\n        </Card.Footer>\n      );\n    }\n  };\n\n  const renderCardImage = () => (\n    <Card.Img\n      variant=\"top\"\n      width=\"100%\"\n      src={imageURI}\n      className=\"mtg-card mtg-card-plane\"\n    />\n  );\n\n  const renderImage = () => {\n    if (displayImages) {\n      return (\n        <>\n          <div onDoubleClick={toggleFullScreen}>{renderCardImage()}</div>\n          <Modal\n            show={fullscreen}\n            onHide={toggleFullScreen}\n            backdrop={true}\n            dialogClassName=\"modal-content-full bg-transparent\"\n            centered={true}\n          >\n            <Modal.Body\n              className=\"p-0\"\n              centered=\"true\"\n              onClick={toggleFullScreen}\n            >\n              {renderCardImage()}\n            </Modal.Body>\n          </Modal>\n        </>\n      );\n    }\n  };\n\n  const renderComponents = () => {\n    if (displayImages) {\n      return (\n        <Card.ImgOverlay\n          className={cn(\"text-center plane-overlay\", {\n            \"child-overlay\": !emptyChildren,\n            \"counter-overlay\": emptyChildren && hasCounters\n          })}\n        >\n          <Card.Title className=\"text-center\">\n            {counter}\n            {children}\n          </Card.Title>\n        </Card.ImgOverlay>\n      );\n    } else {\n      return (\n        <Card.Body className=\"text-center pb-0\">\n          {counter}\n          {children}\n        </Card.Body>\n      );\n    }\n  };\n\n  if (listDisplay) {\n    return (\n      <>\n        <ListGroup.Item variant=\"dark\" onClick={toggleModal}>\n          <div>{card.name}</div>\n        </ListGroup.Item>\n        <Modal\n          show={modalOpen}\n          onHide={toggleModal}\n          size=\"md\"\n          backdrop={true}\n          dialogClassName=\"modal-content-no-border\"\n        >\n          <Modal.Body className=\"p-0\" centered=\"true\">\n            <Plane card={card} />\n            {children}\n          </Modal.Body>\n        </Modal>\n      </>\n    );\n  } else {\n    return (\n      <Card bg=\"black\" text=\"light\" className=\"mtg-plane-card\">\n        {renderImage()}\n        {renderComponents()}\n        {renderBody()}\n        {renderActions()}\n      </Card>\n    );\n  }\n};\n","import React from \"react\";\nimport ReactDice from \"react-dice-complete\";\nimport \"react-dice-complete/dist/react-dice-complete.css\";\nimport \"./planar-die.scss\";\nimport noop from \"lodash/noop\";\n\nconst translateRoll = roll => {\n  switch (roll) {\n    case 1:\n      return \"Planeswalk\";\n    case 6:\n      return \"Chaos\";\n    default:\n      return \"Blank\";\n  }\n};\n\nexport const PlanarDie = ({ rollDone = noop }) => {\n  return (\n    <div className=\"planar\">\n      <ReactDice\n        numDice={1}\n        rollDone={r => rollDone(translateRoll(r))}\n        defaultRoll={1}\n        outline={true}\n        outlineColor=\"#808080\"\n      />\n    </div>\n  );\n};\n","import React from \"react\";\nimport cn from \"classnames\";\n\nexport const DoubleFaceIcon = ({\n  enabled,\n  backdrop = false,\n  invert = false,\n  style = {}\n}) => {\n  const classes = {\n    \"ms-dfc-day\": enabled,\n    \"ms-dfc-night\": !enabled,\n    \"text-light\": enabled && invert,\n    \"text-dark\": !enabled && invert,\n    \"bg-white\": backdrop\n  };\n  return (\n    <span>\n      <i className={cn(\"ms ms-dfc\", classes)} style={style} />\n    </span>\n  );\n};\n","import React from \"react\";\nimport { Button, ButtonGroup } from \"react-bootstrap\";\nimport { DoubleFaceIcon } from \"./DoubleFaceIcon\";\n\nexport const LoyaltyDownButton = props => (\n  <Button {...props} variant=\"secondary\">\n    <i className=\"ms ms-loyalty-down ms-loyalty-1 ms-2x\" />\n  </Button>\n);\nexport const LoyaltyUpButton = props => (\n  <Button {...props} variant=\"secondary\">\n    <i className=\"ms ms-loyalty-up ms-loyalty-1 ms-2x\" />\n  </Button>\n);\n\nexport const LoyaltyButtonGroup = ({\n  upProps,\n  downProps,\n  reverse,\n  ...props\n}) => (\n  <ButtonGroup {...props}>\n    {reverse ? (\n      <>\n        <LoyaltyUpButton {...upProps} />\n        <LoyaltyDownButton {...downProps} />\n      </>\n    ) : (\n      <>\n        <LoyaltyDownButton {...downProps} />\n        <LoyaltyUpButton {...upProps} />\n      </>\n    )}\n  </ButtonGroup>\n);\n\nexport const UnTapButton = props => (\n  <Button {...props} variant=\"secondary\">\n    <i className=\"ms ms-untap ms-2x ss-mythic ss-grad\" />\n  </Button>\n);\n\nexport const TapButton = props => (\n  <Button {...props} variant=\"secondary\">\n    <i className=\"ms ms-tap ms-2x ss-mythic ss-grad\" />\n  </Button>\n);\n\nexport const TapButtonGroup = ({ unTapProps, tapProps, reverse, ...props }) => (\n  <ButtonGroup {...props}>\n    {reverse ? (\n      <>\n        <TapButton {...tapProps} />\n        <UnTapButton {...unTapProps} />\n      </>\n    ) : (\n      <>\n        <UnTapButton {...unTapProps} />\n        <TapButton {...tapProps} />\n      </>\n    )}\n  </ButtonGroup>\n);\n\nexport const DoubleFaceButton = ({ enabled, text, ...props }) => (\n  <Button {...props} block variant=\"secondary\">\n    <span className=\"mr-2\">{text}</span>\n    <DoubleFaceIcon enabled={enabled} backdrop />\n  </Button>\n);\n\nexport const DoubleFaceHighlightButton = ({ enabled, text, ...props }) => (\n  <Button size=\"sm\" block {...props} variant={enabled ? \"info\" : \"secondary\"}>\n    <div className=\"float-left\">\n      <DoubleFaceIcon enabled={enabled} invert />\n    </div>\n    <div className=\"d-inline\">{text}</div>\n  </Button>\n);\n\nexport const TenthEditionButton = props => (\n  <Button variant=\"danger\" {...props}>\n    <i className=\"ss ss-x ss-10e ss-rare ss-grad ss-2x\" />\n  </Button>\n);\n","import React, { useContext } from \"react\";\nimport uuidv4 from \"uuid/v4\";\nimport { useLocalState } from \"../hooks/useLocalState\";\nimport { shuffleArray } from \"../util/shuffleArray\";\n\nexport const DeckContext = React.createContext({});\nexport const useDeckContext = () => useContext(DeckContext);\n\nexport const DeckProvider = ({ prefix = null, children }) => {\n  const [deck, setDeck] = useLocalState(`${prefix}-deck`, []);\n  const [isInit, setInit] = useLocalState(`${prefix}-deck-init`, false);\n  const [history, setHistory] = useLocalState(`${prefix}-history`, []);\n\n  const initDeck = (cards, reset = false) => {\n    if (!isInit || deck.length === 0 || reset) {\n      console.log(`Creating New ${prefix} Deck`);\n      const clonedCards = cards?.map(card => {\n        return {\n          // Add Deck Card Id so that each card in the deck has a unique value\n          deck_card_id: uuidv4(),\n          // Clone all the cards so that we aren't modifying original objects\n          ...card\n        };\n      });\n      const newDeck = clonedCards && shuffleArray(clonedCards);\n      setDeck(newDeck);\n      resetHistory();\n      setInit(true);\n    }\n  };\n\n  const reInit = () => {\n    setDeck([]);\n    setInit(false);\n    resetHistory();\n  };\n\n  const moveCard = (from, to) => {\n    deck.splice(to, 0, deck.splice(from, 1)[0]);\n    setDeck([...deck]);\n  };\n\n  const drawCard = () => {\n    const card = deck.shift();\n    setDeck([...deck]);\n    if (card) {\n      updateHistory(card);\n    }\n    return card;\n  };\n\n  const updateHistory = card => {\n    setHistory([card, ...history]);\n  };\n\n  const resetHistory = () => {\n    setHistory([]);\n  };\n\n  const undoDraw = () => {\n    const card = history.shift();\n    if (card) {\n      addCardsToTop([card]);\n    }\n    setHistory([...history]);\n    const lastCard = history[0];\n    return lastCard;\n  };\n\n  const addCardsToTop = topCards => {\n    setDeck(prevDeck => [...topCards, ...prevDeck]);\n  };\n\n  const addCardsToBottom = bottomCards => {\n    setDeck(prevDeck => [...prevDeck, ...bottomCards]);\n  };\n\n  const findCard = card => {\n    return findCardByDeckCardId(card.deck_card_id);\n  };\n\n  const findCardByDeckCardId = deckCardId => {\n    return deck.find(c => c.deck_card_id === deckCardId);\n  };\n\n  const findAndPutOnTop = deckCardId => {\n    const tmpCard = findCardByDeckCardId(deckCardId);\n\n    if (tmpCard) {\n      removeCards([tmpCard]);\n      addCardsToTop([tmpCard]);\n    }\n  };\n\n  const findAndPutOnBottom = deckCardId => {\n    const tmpCard = findCardByDeckCardId(deckCardId);\n\n    if (tmpCard) {\n      removeCards([tmpCard]);\n      addCardsToBottom([tmpCard]);\n    }\n  };\n\n  const removeCards = cardsToRemove => {\n    setDeck(prevDeck => {\n      const filteredDeck = [...prevDeck].filter(\n        c => !cardsToRemove.find(r => r.deck_card_id === c.deck_card_id)\n      );\n      return filteredDeck;\n    });\n  };\n\n  // TODO: Move this\n  const revealCards = (numReveal, onlyPlanes = false) => {\n    const revealedCards = [];\n    const count = Math.min(deck.length, numReveal);\n\n    let planes = 0;\n    let tmpCount = count;\n    for (let i = 0; i < tmpCount; i++) {\n      revealedCards.push(deck[i]);\n\n      if (onlyPlanes) {\n        if (deck[i].type_line.search(\"Plane\") >= 0) {\n          planes++;\n        }\n\n        if (i === tmpCount - 1 && planes < count) {\n          tmpCount++;\n        }\n      }\n    }\n\n    return revealedCards;\n  };\n\n  const shuffle = () => {\n    setDeck(shuffleArray(deck));\n  };\n\n  return (\n    <DeckContext.Provider\n      value={{\n        prefix,\n        isInit,\n        reInit,\n        deck,\n        history,\n        initDeck,\n        moveCard,\n        drawCard,\n        updateHistory,\n        resetHistory,\n        undoDraw,\n        addCardsToTop,\n        addCardsToBottom,\n        findCard,\n        findCardByDeckCardId,\n        findAndPutOnTop,\n        findAndPutOnBottom,\n        removeCards,\n        revealCards,\n        shuffle\n      }}\n    >\n      {children}\n    </DeckContext.Provider>\n  );\n};\n","import { useState } from \"react\";\nimport { Button, Fade, ListGroup } from \"react-bootstrap\";\n\nexport const History = ({ history, CardType }) => {\n  const [showHistory, setShowHistory] = useState(false);\n\n  return (\n    <div className=\"my-2\">\n      <Button\n        onClick={() => setShowHistory(!showHistory)}\n        variant=\"secondary\"\n        block\n      >\n        {showHistory ? \"Hide\" : \"Show\"} History\n      </Button>\n      <Fade in={showHistory}>\n        <div>\n          {showHistory && history && (\n            <ListGroup>\n              {history.map(p => (\n                <CardType card={p} key={p.deck_card_id} listDisplay={true} />\n              ))}\n            </ListGroup>\n          )}\n        </div>\n      </Fade>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport {\n  Button,\n  ButtonGroup,\n  ButtonToolbar,\n  Fade,\n  ListGroup\n} from \"react-bootstrap\";\nimport { useDeckContext } from \"../../mtg/DeckContext\";\nimport {\n  LoyaltyButtonGroup,\n  TapButtonGroup,\n  TenthEditionButton\n} from \"../magic/Buttons\";\n\nexport const Deck = ({ CardType }) => {\n  const [showDeck, setShowDeck] = useState(false);\n  const [showDeckImages, setShowDeckImages] = useState(false);\n  const context = useDeckContext();\n  const deck = context.deck;\n\n  return (\n    <div className=\"my-2\">\n      <Button onClick={() => setShowDeck(!showDeck)} variant=\"secondary\" block>\n        {showDeck ? \"Hide\" : \"Show\"} Deck\n      </Button>\n      <Fade in={showDeck}>\n        <div>\n          {showDeck && (\n            <>\n              <Button\n                onClick={() => setShowDeckImages(!showDeckImages)}\n                variant=\"secondary\"\n                block\n              >\n                {showDeckImages ? \"Hide\" : \"Show\"} Full Card\n              </Button>\n              <ListGroup>\n                {deck.map((card, i) => (\n                  <React.Fragment key={card.deck_card_id}>\n                    <CardType card={card} listDisplay={!showDeckImages} />\n                    <ListGroup.Item className=\"text-center justify-content-center d-flex\">\n                      <ButtonToolbar>\n                        <LoyaltyButtonGroup\n                          reverse\n                          downProps={{\n                            disabled: i === deck.length - 1,\n                            onClick: () => context.moveCard(i, i + 1)\n                          }}\n                          upProps={{\n                            disabled: i === 0,\n                            onClick: () => context.moveCard(i, i - 1)\n                          }}\n                        />\n                        <TapButtonGroup\n                          className=\"ml-2\"\n                          unTapProps={{\n                            disabled: i === 0,\n                            onClick: () =>\n                              context.findAndPutOnTop(card.deck_card_id)\n                          }}\n                          tapProps={{\n                            disabled: i === deck.length - 1,\n                            onClick: () =>\n                              context.findAndPutOnBottom(card.deck_card_id)\n                          }}\n                        />\n\n                        <ButtonGroup className=\"ml-2\">\n                          <TenthEditionButton\n                            onClick={() => context.removeCards([card])}\n                          />\n                        </ButtonGroup>\n                      </ButtonToolbar>\n                    </ListGroup.Item>\n                  </React.Fragment>\n                ))}\n              </ListGroup>\n            </>\n          )}\n        </div>\n      </Fade>\n    </div>\n  );\n};\n","import { useSettings } from \"../hooks/useSettings\";\n\nexport const DevTools = ({ children }) => {\n  const settings = useSettings();\n\n  if (settings.devTools) {\n    return (\n      <div className=\"my-4\">\n        <h5 className=\"text-center noselect\">Dev Tools</h5>\n        {children}\n      </div>\n    );\n  }\n\n  return null;\n};\n","import { Button } from \"react-bootstrap\";\n\nexport const ActionButton = ({ onClick, disabled, icon, text }) => (\n  <div className=\"fixed-top mt-1 ml-1 w-25 text-left\">\n    <Button\n      onClick={onClick}\n      className=\"mb-2\"\n      variant=\"success\"\n      disabled={disabled}\n      block\n    >\n      {icon}\n      <span className=\"mx-2 d-none d-md-inline\">{text}</span>\n    </Button>\n  </div>\n);\n","import React from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport { Plane } from \"../../components/magic/Plane\";\n\nexport const ScryModal = ({ scryCards, open, onScryTop, onScryBottom }) => {\n  if (scryCards && open) {\n    return (\n      <Modal\n        show={!!open}\n        size=\"md\"\n        dialogClassName=\"bg-secondary\"\n        variant=\"secondary\"\n        backdrop=\"static\"\n      >\n        <Modal.Header className=\"justify-content-center text-white noselect\">\n          <Modal.Title>\n            <i className=\"ms ms-chaos mx-4\" />\n            Scry Card\n            <i className=\"ms ms-chaos mx-4\" />\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Button variant=\"info\" block onClick={onScryTop}>\n            Top\n          </Button>\n          {scryCards.map(c => (\n            <Plane card={c} key={c.deck_card_id} />\n          ))}\n          <Button variant=\"info\" block onClick={onScryBottom}>\n            Bottom\n          </Button>\n        </Modal.Body>\n      </Modal>\n    );\n  }\n\n  return null;\n};\n","import React from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { hasCustomProperty } from \"../../mtg/card.js\";\n\nexport const ChaosButton = ({ card, onClick }) => {\n  const hasChaos = hasCustomProperty(\"chaos-trigger\", card);\n  if (hasChaos) {\n    return (\n      <Button\n        onClick={() => onClick(card)}\n        variant=\"info\"\n        size=\"lg\"\n        className=\"btn-translucent\"\n      >\n        <i className=\"ms ms-chaos ms-2x mx-2\" />\n        <span className=\"mx-2 d-none d-md-inline\">Trigger Chaos</span>\n      </Button>\n    );\n  }\n  return null;\n};\n","import React from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport { Plane } from \"../../components/magic/Plane\";\nimport { ChaosButton } from \"./ChaosButton\";\n\nexport const TripleChaosModal = ({\n  open,\n  revealedCards,\n  onHide,\n  chaosClick,\n  close\n}) => {\n  if (revealedCards && open) {\n    const revealedPlanes = revealedCards.filter(\n      c => c.type_line.search(\"Plane\") >= 0\n    );\n    return (\n      <Modal\n        show={!!open}\n        onHide={onHide}\n        size=\"md\"\n        backdrop={true}\n        dialogClassName=\"bg-secondary\"\n      >\n        <Modal.Header className=\"flex-column text-center text-white noselect\">\n          <div className=\"modal-title h5 mx-auto\">\n            <i className=\"ms ms-chaos mr-1\" />\n            <i className=\"ms ms-chaos mr-1\" />\n            <i className=\"ms ms-chaos mr-1\" />\n            <span className=\"mx-1\">Triple Chaos</span>\n            <i className=\"ms ms-chaos ml-1\" />\n            <i className=\"ms ms-chaos ml-1\" />\n            <i className=\"ms ms-chaos ml-1\" />\n          </div>\n          <div className=\"mx-auto\">\n            <small className=\"text-center\">You Pick Order</small>\n          </div>\n        </Modal.Header>\n        <Modal.Body className=\"text-center\">\n          {revealedPlanes.map(c => (\n            <React.Fragment key={c.deck_card_id}>\n              <Plane card={c}>\n                <ChaosButton card={c} onClick={c => chaosClick(c)} />\n              </Plane>\n            </React.Fragment>\n          ))}\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"info\" block aria-label=\"Close\" onClick={close}>\n            Done\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n\n  return null;\n};\n","import React, { useContext } from \"react\";\nimport { useLocalState } from \"../hooks/useLocalState\";\n\nexport const GameContext = React.createContext({});\nexport const useGameContext = () => useContext(GameContext);\n\nexport const GameProvider = ({ prefix = null, children }) => {\n  const [currentCard, setCurrentCard] = useLocalState(\n    `${prefix}-currentCard`,\n    null\n  );\n  const [revealedCards, setRevealedCards] = useLocalState(\n    `${prefix}-revealedCards`,\n    []\n  );\n  const [additionalCards, setAdditionalCards] = useLocalState(\n    `${prefix}-additionalCards`,\n    []\n  );\n  const [scryCards, setScryCards] = useLocalState(`${prefix}-scryCards`, []);\n\n  const clearCurrentCard = () => setCurrentCard(null);\n  const clearRevealedCards = () => setRevealedCards([]);\n  const clearAdditionalCards = () => setAdditionalCards([]);\n  const clearScryCards = () => setScryCards([]);\n  const reset = () => {\n    clearCurrentCard();\n    clearRevealedCards();\n    clearAdditionalCards();\n    clearScryCards();\n  };\n\n  return (\n    <GameContext.Provider\n      value={{\n        prefix,\n        currentCard,\n        revealedCards,\n        additionalCards,\n        scryCards,\n        setCurrentCard,\n        setRevealedCards,\n        setAdditionalCards,\n        setScryCards,\n        clearCurrentCard,\n        clearRevealedCards,\n        clearAdditionalCards,\n        clearScryCards,\n        reset\n      }}\n    >\n      {children}\n    </GameContext.Provider>\n  );\n};\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { Alert, Button, Fade } from \"react-bootstrap\";\nimport { PlanechaseHelmet } from \"./Helmet\";\nimport { shuffleArray } from \"../../util/shuffleArray\";\nimport { hasCustomProperty } from \"../../mtg/card.js\";\nimport { getAllPlanechaseCards } from \"../../util/api.js\";\nimport { Loading } from \"../../components/Loading\";\nimport { Confirm } from \"../../components/Confirm\";\nimport { Plane } from \"../../components/magic/Plane\";\nimport { PlanarDie } from \"../../components/magic/planar-die/PlanarDie\";\nimport { DoubleFaceButton } from \"../../components/magic/Buttons\";\nimport { useDeckContext } from \"../../mtg/DeckContext\";\nimport { History } from \"../../components/game/History\";\nimport { Deck } from \"../../components/game/Deck\";\nimport { DevTools } from \"../../components/DevTools\";\nimport { ActionButton } from \"../../components/game/ActionButton\";\nimport { ScryModal } from \"./ScryModal\";\nimport { ChaosButton } from \"./ChaosButton\";\nimport { TripleChaosModal } from \"./TripleChaosModal\";\nimport { useGameContext } from \"../../mtg/GameContext\";\nimport { useLocalState } from \"../../hooks/useLocalState\";\n\nexport const Planechase = () => {\n  const [loading, setLoading] = useState(true);\n  const [planes, setPlanes] = useState([]);\n  const [tripleChaosModalOpen, setTripleChaosModalOpen] = useState(false);\n  const [scryModalOpen, setScryModalOpen] = useState(false);\n  const [showPlanarDie, setShowPlanarDie] = useLocalState(\"planar-die\", true);\n\n  const game = useGameContext();\n  const { currentCard, additionalCards, revealedCards, scryCards } = game;\n\n  const deck = useDeckContext();\n  const history = deck.history;\n\n  const planeswalkDisabled = !!hasCustomProperty(\"top-5\", currentCard);\n\n  const fetchPlanes = useCallback(async () => {\n    const newPlanes = await getAllPlanechaseCards();\n    deck.initDeck(newPlanes, true);\n    setPlanes(newPlanes);\n    setLoading(false);\n  }, [setPlanes, setLoading, deck]);\n\n  useEffect(() => {\n    if (planes && planes.length <= 0) {\n      fetchPlanes();\n    }\n  }, [planes, fetchPlanes]);\n\n  useEffect(() => {\n    const open =\n      scryCards.length > 0 && !!hasCustomProperty(\"scry-1\", currentCard);\n    if (open) {\n      setScryModalOpen(open);\n    }\n  }, [setScryModalOpen, scryCards, currentCard]);\n\n  useEffect(() => {\n    const open =\n      revealedCards.length > 0 &&\n      !!hasCustomProperty(\"triple-chaos\", currentCard);\n    if (open) {\n      setTripleChaosModalOpen(open);\n    }\n  }, [setTripleChaosModalOpen, revealedCards, currentCard]);\n\n  const planeswalk = ({ card }) => {\n    const newCard = card || deck.drawCard();\n    game.setCurrentCard(newCard);\n    let newRevealedCards = [];\n    let newAdditionalCards = [];\n    if (hasCustomProperty(\"two-planes\", newCard)) {\n      newRevealedCards = deck.revealCards(2, true);\n      deck.removeCards(newRevealedCards);\n      const revealedPlanes = newRevealedCards.filter(\n        c => c.type_line.search(\"Plane\") >= 0\n      );\n      const revealedPhenomenon = newRevealedCards.filter(\n        c => c.type_line.search(\"Phenomenon\") >= 0\n      );\n      revealedPlanes.forEach(c => deck.updateHistory(c));\n      deck.addCardsToBottom(revealedPhenomenon);\n      newRevealedCards = [];\n      newAdditionalCards = revealedPlanes;\n    }\n\n    if (hasCustomProperty(\"top-5\", newCard)) {\n      newRevealedCards = deck.revealCards(5, true);\n      deck.removeCards(newRevealedCards);\n    }\n\n    game.setRevealedCards(newRevealedCards);\n    game.setAdditionalCards(newAdditionalCards);\n  };\n\n  const reset = async () => {\n    setLoading(true);\n    fetchPlanes();\n    deck.reInit();\n    game.reset();\n    setLoading(false);\n  };\n\n  const undo = async () => {\n    const lastCard = deck.undoDraw();\n    game.reset();\n    if (lastCard) {\n      game.setCurrentCard(lastCard);\n    }\n  };\n\n  const triggerChaos = card => {\n    console.log(\"Chaos Triggered\");\n    if (hasCustomProperty(\"triple-chaos\", card)) {\n      const newRevealedCards = deck.revealCards(3, true);\n      deck.removeCards(newRevealedCards);\n      const shuffledCards = shuffleArray(newRevealedCards.slice());\n      deck.addCardsToBottom(shuffledCards);\n      game.setRevealedCards(newRevealedCards);\n      setTripleChaosModalOpen(true);\n    }\n\n    if (hasCustomProperty(\"scry-1\", card)) {\n      if (!scryCards || scryCards.length === 0) {\n        const newScryCards = deck.revealCards(1, false);\n        deck.removeCards(newScryCards);\n        game.setScryCards(newScryCards);\n        setScryModalOpen(true);\n      }\n    }\n  };\n\n  const renderTwoPlanes = () => {\n    if (hasCustomProperty(\"two-planes\", currentCard)) {\n      const revealedPlanes = additionalCards.filter(\n        c => c.type_line.search(\"Plane\") >= 0\n      );\n      return (\n        <div>\n          <Alert variant=\"info\" className=\"text-center mb-0\">\n            <i className=\"ms ms-planeswalker mx-2\" />\n            You Are On Both Planes\n            <i className=\"ms ms-planeswalker mx-2\" />\n          </Alert>\n          {revealedPlanes.map(c => (\n            <React.Fragment key={c.deck_card_id}>\n              <Plane card={c} displayActions=\"true\">\n                <ChaosButton card={c} onClick={triggerChaos} />\n              </Plane>\n            </React.Fragment>\n          ))}\n        </div>\n      );\n    }\n  };\n\n  const selectPlane = card => {\n    const restCards = revealedCards.filter(\n      c => c.deck_card_id !== card.deck_card_id\n    );\n    const shuffledCards = shuffleArray(restCards.slice());\n    deck.addCardsToBottom([...shuffledCards]);\n    game.clearRevealedCards();\n    setTimeout(() => planeswalk({ card }));\n  };\n\n  const renderFivePlanes = () => {\n    if (hasCustomProperty(\"top-5\", currentCard)) {\n      console.log(\"Render 5 - Revealed Cards\", revealedCards);\n      const revealedPlanes = revealedCards.filter(\n        c => c.type_line.search(\"Plane\") >= 0\n      );\n      console.log(\"Render 5 - Revealed Planes\", revealedPlanes);\n      return (\n        <div>\n          <Alert variant=\"info\" className=\"text-center mb-0\">\n            <i className=\"ms ms-planeswalker mx-2\" />\n            Pick a Plane to Planeswalk To\n            <i className=\"ms ms-planeswalker mx-2\" />\n          </Alert>\n          {revealedPlanes.map(c => (\n            <div key={c.deck_card_id}>\n              <Plane card={c}>\n                <Button\n                  onClick={() => selectPlane(c)}\n                  variant=\"primary\"\n                  className=\"btn-translucent\"\n                  size=\"lg\"\n                >\n                  <i className=\"ms ms-planeswalker mx-2\" />\n                  <span className=\"mx-2\">Planeswalk</span>\n                </Button>\n              </Plane>\n            </div>\n          ))}\n        </div>\n      );\n    }\n  };\n\n  const _tripleChaosModalClose = () => {\n    game.clearRevealedCards();\n    setTripleChaosModalOpen(false);\n  };\n\n  const _scryTop = () => {\n    deck.addCardsToTop(scryCards);\n    console.log(\"Scry Top\", scryCards);\n    game.clearScryCards();\n    setScryModalOpen(false);\n  };\n\n  const _scryBottom = () => {\n    deck.addCardsToBottom(scryCards);\n    console.log(\"Scry Bottom\", scryCards);\n    game.clearScryCards();\n    setScryModalOpen(false);\n  };\n\n  return (\n    <div className=\"planechase\">\n      <PlanechaseHelmet planes={planes} cardType={Plane} />\n      <ActionButton\n        text=\"Planeswalk\"\n        onClick={planeswalk}\n        disabled={planeswalkDisabled || loading}\n        icon={<i className=\"ms ms-planeswalker ms-2x mx-2\" />}\n      />\n      {loading ? (\n        <Loading className=\"text-muted\" />\n      ) : (\n        <div className=\"mb-2\">\n          {currentCard ? (\n            <Fade key={currentCard.deck_card_id} timeout={100}>\n              <Plane card={currentCard} displayActions=\"true\">\n                <ChaosButton card={currentCard} onClick={triggerChaos} />\n              </Plane>\n            </Fade>\n          ) : (\n            <Plane />\n          )}\n        </div>\n      )}\n      {renderTwoPlanes()}\n      {renderFivePlanes()}\n\n      <TripleChaosModal\n        open={tripleChaosModalOpen}\n        revealedCards={revealedCards}\n        onHide={_tripleChaosModalClose}\n        chaosClick={c => triggerChaos(c)}\n        close={_tripleChaosModalClose}\n      />\n\n      <ScryModal\n        scryCards={scryCards}\n        open={scryModalOpen}\n        onScryTop={() => _scryTop()}\n        onScryBottom={() => _scryBottom()}\n      />\n      <History history={history} CardType={Plane} />\n      <p className=\"text-center my-3 noselect\">\n        There are {deck.deck ? deck.deck.length : 0} cards remaining.\n      </p>\n      <Confirm\n        onConfirm={reset}\n        headerText=\"Reset Planes?\"\n        triggerText=\"Reset\"\n        confirmText=\"Reset\"\n        confirmVariant=\"danger\"\n        triggerButtonParams={{ variant: \"danger\", block: true }}\n      />\n      <DevTools>\n        <Button onClick={undo} variant=\"warning\" block>\n          Undo\n        </Button>\n        <Deck CardType={Plane} />\n        <DoubleFaceButton\n          text=\"Planar Die\"\n          onClick={() => setShowPlanarDie(!showPlanarDie)}\n          enabled={showPlanarDie}\n        />\n      </DevTools>\n      {showPlanarDie && !planeswalkDisabled && (\n        <div className=\"position-fixed\" style={{ bottom: \"5px\", right: \"5px\" }}>\n          <PlanarDie rollDone={face => console.log(`Rolled: ${face}`)} />\n        </div>\n      )}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\n\nexport const ArchenemyHelmet = ({ schemes }) => {\n  return (\n    <Helmet title=\"Archenemy\">\n      <link\n        rel=\"shortcut icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/archenemy.ico\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/archenemy_256.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"64x64\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/archenemy_64.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"128x128\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/archenemy_128.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"256x256\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/archenemy_256.png\"}\n      />\n      <link\n        rel=\"manifest\"\n        href={process.env.PUBLIC_URL + \"/archenemy-manifest.json\"}\n      />\n      {schemes &&\n        schemes.map(p => (\n          <link\n            rel=\"preload\"\n            href={p.image_uris[\"large\"]}\n            as=\"image\"\n            key={p.id}\n          />\n        ))}\n    </Helmet>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/archenemy-back.6d5cbfc7.jpg\";","import React, { useState } from \"react\";\nimport { Card, ListGroup, Modal } from \"react-bootstrap\";\nimport back from \"../../images/archenemy-back.jpg\";\nimport { Counter } from \"./Counter\";\nimport \"./planes.scss\";\n\nimport { hasCustomProperty } from \"../../mtg/card.js\";\nimport { CardText } from \"./Card\";\nimport cn from \"classnames\";\nimport { useSettings } from \"../../hooks/useSettings\";\n\nexport const Scheme = ({ listDisplay, card, displayActions, children }) => {\n  const [modalOpen, setModalOpen] = useState(false);\n\n  const settings = useSettings();\n  const { displayImages, displayGatherer } = settings;\n\n  const hasCounters = hasCustomProperty(\"counter\", card);\n  const emptyChildren = children?.type === null;\n\n  const imageURI = card?.image_uris[\"large\"] || back;\n\n  const counter = displayActions && hasCounters && <Counter card={card} />;\n\n  const image = displayImages && (\n    <Card.Img\n      variant=\"top\"\n      width=\"100%\"\n      src={imageURI}\n      className=\"mtg-card mtg-card-scheme\"\n    />\n  );\n  const toggleModal = () => {\n    setModalOpen(isOpen => !isOpen);\n  };\n\n  const renderBody = () => {\n    const text = CardText({ card });\n    const hasBody = !!text;\n\n    return hasBody && <Card.Body>{text}</Card.Body>;\n  };\n\n  const renderActions = () => {\n    if (displayGatherer && card) {\n      return (\n        <Card.Footer>\n          <Card.Link\n            href={card.related_uris[\"gatherer\"]}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Gatherer\n          </Card.Link>\n        </Card.Footer>\n      );\n    }\n  };\n\n  const renderComponents = () => {\n    if (displayImages) {\n      return (\n        <Card.ImgOverlay\n          className={cn(\"text-center scheme-overlay\", {\n            \"child-overlay\": !emptyChildren,\n            \"counter-overlay\": emptyChildren && hasCounters\n          })}\n        >\n          <Card.Title className=\"text-center pt-5 mt-sm-5\">\n            {counter}\n            {children}\n          </Card.Title>\n        </Card.ImgOverlay>\n      );\n    } else {\n      return (\n        <Card.Body className=\"text-center pb-0\">\n          {counter}\n          {children}\n        </Card.Body>\n      );\n    }\n  };\n\n  if (listDisplay) {\n    return (\n      <>\n        <ListGroup.Item variant=\"dark\" onClick={toggleModal}>\n          {card.name}\n        </ListGroup.Item>\n        <Modal\n          show={modalOpen}\n          onHide={toggleModal}\n          size=\"md\"\n          backdrop={true}\n          dialogClassName=\"modal-content-no-border\"\n        >\n          <Modal.Body className=\"p-0\" centered=\"true\">\n            <Scheme card={card} />\n            {children}\n          </Modal.Body>\n        </Modal>\n      </>\n    );\n  } else {\n    return (\n      <Card bg=\"black\" text=\"light\" className=\"mtg-scheme-card\">\n        {image}\n        {renderComponents()}\n        {renderBody()}\n        {renderActions()}\n      </Card>\n    );\n  }\n};\n","import React from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { hasCustomProperty } from \"../../mtg/card.js\";\n\nexport const AbandonButton = ({ card, onClick }) => {\n  const isOngoing = card.type_line === \"Ongoing Scheme\";\n  if (isOngoing && !hasCustomProperty(\"unabandonable\", card)) {\n    return (\n      <Button\n        onClick={() => onClick(card)}\n        variant=\"danger\"\n        size=\"lg\"\n        className=\"btn-translucent\"\n      >\n        <h2 className=\"mb-0\">\n          <i className=\"ss ss-bok ss-2x ss-grad ss-rare mx-2\" />\n          <span className=\"mx-2 d-none d-md-inline\">Abandon Scheme</span>\n        </h2>\n      </Button>\n    );\n  }\n  return null;\n};\n","import React from \"react\";\nimport { Card } from \"react-bootstrap\";\n\nconst deckIcon = (name, type = \"ss-mythic ss-grad\") => {\n  switch (name) {\n    case \"All Schemes\":\n      return <i className={`ss ${type} ss-lea`}></i>;\n    case \"Custom Deck\":\n      return <i className={`ss ${type} ss-chr`}></i>;\n    case \"Assemble the Doomsday Machine\":\n      return <i className={`ss ${type} ss-usg`}></i>;\n    case \"Scorch the World with Dragonfire\":\n      return <i className={`ss ${type} ss-scg`}></i>;\n    case \"Trample Civilization Underfoot\":\n      return <i className={`ss ${type} ss-c20`}></i>;\n    case \"Bring About the Undead Apocalypse\":\n      return <i className={`ss ${type} ss-pd3`}></i>;\n    case \"Archenemy Nicol Bolas\":\n      return <i className={`ss ${type} ss-hou`}></i>;\n    default:\n      return null;\n  }\n};\nexport const DeckCardTitle = ({ name }) => (\n  <Card.Title className=\"d-flex\">\n    <div className=\"h3 text-center align-self-center\">{deckIcon(name)}</div>\n    <div className=\"flex-grow-1\">\n      <h3 className=\"text-center\">{name}</h3>\n    </div>\n    <div className=\"h3 text-center align-self-center\">{deckIcon(name)}</div>\n  </Card.Title>\n);\n","export const getDeckList = () => {\n  return DECKS.map(s => s.name);\n};\n\nexport const getCardList = (deckname, schemes) => {\n  const deck = DECKS.find(s => s.name === deckname);\n  return deck.cards.map(c => {\n    const scheme = schemes.find(s => s.name === c[0]);\n    const clonedCard = JSON.parse(JSON.stringify(scheme));\n    clonedCard.count = c[1];\n    return clonedCard;\n  });\n};\nconst DECKS = [\n  {\n    name: \"Assemble the Doomsday Machine\",\n    cards: [\n      [\"All in Good Time\", 1],\n      [\"Behold the Power of Destruction\", 1],\n      [\"Embrace My Diabolical Vision\", 1],\n      [\"Feed the Machine\", 2],\n      [\"I Delight in Your Convulsions\", 1],\n      [\"I Know All, I See All\", 2],\n      [\"Ignite the Cloneforge!\", 2],\n      [\"Introductions Are in Order\", 1],\n      [\"The Iron Guardian Stirs\", 2],\n      [\"My Genius Knows No Bounds\", 1],\n      [\"Nothing Can Stop Me Now\", 1],\n      [\"The Pieces Are Coming Together\", 2],\n      [\"Realms Befitting My Majesty\", 1],\n      [\"Your Fate Is Thrice Sealed\", 1],\n      [\"Your Puny Minds Cannot Fathom\", 1]\n    ]\n  },\n  {\n    name: \"Scorch the World with Dragonfire\",\n    cards: [\n      [\"All Shall Smolder in My Wake\", 2],\n      [\"Approach My Molten Realm\", 1],\n      [\"The Fate of the Flammable\", 1],\n      [\"I Bask in Your Silent Awe\", 2],\n      [\"I Delight in Your Convulsions\", 1],\n      [\"Introductions Are in Order\", 1],\n      [\"Know Naught but Fire\", 1],\n      [\"Look Skyward and Despair\", 2],\n      [\"My Crushing Masterstroke\", 1],\n      [\"My Wish Is Your Command\", 2],\n      [\"Realms Befitting My Majesty\", 1],\n      [\"Tooth, Claw, and Tail\", 1],\n      [\"Which of You Burns Brightest?\", 2],\n      [\"Your Fate Is Thrice Sealed\", 1],\n      [\"Your Puny Minds Cannot Fathom\", 1]\n    ]\n  },\n  {\n    name: \"Trample Civilization Underfoot\",\n    cards: [\n      [\"Every Last Vestige Shall Rot\", 2],\n      [\"Evil Comes to Fruition\", 1],\n      [\"I Call on the Ancient Magics\", 1],\n      [\"I Delight in Your Convulsions\", 1],\n      [\"Into the Earthen Maw\", 1],\n      [\"Introductions Are in Order\", 1],\n      [\"May Civilization Collapse\", 1],\n      [\"Nature Demands an Offering\", 2],\n      [\"Nature Shields Its Own\", 2],\n      [\"Realms Befitting My Majesty\", 1],\n      [\"Roots of All Evil\", 2],\n      [\"The Very Soil Shall Shake\", 1],\n      [\"Your Fate Is Thrice Sealed\", 1],\n      [\"Your Puny Minds Cannot Fathom\", 1],\n      [\"Your Will Is Not Your Own\", 2]\n    ]\n  },\n  {\n    name: \"Bring About the Undead Apocalypse\",\n    cards: [\n      [\"Choose Your Champion\", 2],\n      [\"Dance, Pathetic Marionette\", 1],\n      [\"The Dead Shall Serve\", 2],\n      [\"Every Hope Shall Vanish\", 2],\n      [\"I Delight in Your Convulsions\", 2],\n      [\"Introductions Are in Order\", 1],\n      [\"Mortal Flesh Is Weak\", 1],\n      [\"My Undead Horde Awakens\", 1],\n      [\"Only Blood Ends Your Nightmares\", 2],\n      [\"Realms Befitting My Majesty\", 1],\n      [\"Rotted Ones, Lay Siege\", 2],\n      [\"Surrender Your Thoughts\", 1],\n      [\"Your Fate Is Thrice Sealed\", 1],\n      [\"Your Puny Minds Cannot Fathom\", 1]\n    ]\n  },\n  {\n    name: \"Archenemy Nicol Bolas\",\n    cards: [\n      [\"Because I Have Willed It\", 1],\n      [\"Behold My Grandeur\", 1],\n      [\"Bow to My Command\", 1],\n      [\"Choose Your Demise\", 1],\n      [\"Delight in the Hunt\", 1],\n      [\"Every Dream a Nightmare\", 1],\n      [\"For Each of You, a Gift\", 1],\n      [\"Know Evil\", 1],\n      [\"Make Yourself Useful\", 1],\n      [\"The Mighty Will Fall\", 1],\n      [\"My Forces Are Innumerable\", 1],\n      [\"My Laughter Echoes\", 1],\n      [\"No One Will Hear Your Cries\", 1],\n      [\"Pay Tribute to Me\", 1],\n      [\"Power Without Equal\", 1],\n      [\"A Reckoning Approaches\", 1],\n      [\"There Is No Refuge\", 1],\n      [\"This World Belongs to Me\", 1],\n      [\"What's Yours Is Now Mine\", 1],\n      [\"When Will You Learn?\", 1]\n    ]\n  }\n];\n","import React from \"react\";\nimport { Accordion, Badge, Button, Card, ListGroup } from \"react-bootstrap\";\nimport { getDeckList, getCardList } from \"../../mtg/prebuilt-decks\";\nimport { Scheme } from \"../../components/magic/Scheme\";\nimport { DeckCardTitle } from \"./DeckCardTitle\";\n\nexport const Prebuilts = ({ schemes, onSelectDeck }) => {\n  const prebuilts = getDeckList();\n  const prebuiltItems = prebuilts.map((prebuilt, i) => {\n    const cardList = getCardList(prebuilt, schemes);\n    const cardListItems = cardList.map((card, i) => (\n      <ListGroup.Item key={i} variant=\"dark\">\n        <Scheme card={card} />\n        <h1 className=\"text-center\">\n          <Badge pill variant={card.count > 0 ? \"success\" : \"dark\"}>\n            x{card.count}\n          </Badge>\n        </h1>\n      </ListGroup.Item>\n    ));\n    return (\n      <Accordion key={i}>\n        <Card>\n          <Card.Body>\n            <DeckCardTitle name={prebuilt} />\n            <Accordion.Toggle\n              as={Button}\n              block\n              eventKey={`prebuilt-${i}`}\n              variant=\"secondary\"\n            >\n              Decklist\n            </Accordion.Toggle>\n            <Accordion.Collapse eventKey={`prebuilt-${i}`}>\n              <ListGroup>{cardListItems}</ListGroup>\n            </Accordion.Collapse>\n            <Button\n              block\n              variant=\"success\"\n              onClick={() => onSelectDeck(prebuilt, cardList)}\n            >\n              Use Deck\n            </Button>\n          </Card.Body>\n        </Card>\n      </Accordion>\n    );\n  });\n\n  return <>{prebuiltItems}</>;\n};\n","import React, { useEffect, useState } from \"react\";\nimport {\n  Accordion,\n  Alert,\n  Badge,\n  Button,\n  ButtonGroup,\n  Card,\n  ListGroup\n} from \"react-bootstrap\";\nimport { Scheme } from \"../../components/magic/Scheme\";\nimport { LoyaltyButtonGroup } from \"../../components/magic/Buttons\";\nimport { DeckCardTitle } from \"./DeckCardTitle\";\n\nexport const CustomDeckBuilder = ({ schemes, onSelectDeck }) => {\n  const [customDeck, setCustomDeck] = useState([]);\n  const deckName = \"Custom Deck\";\n\n  useEffect(() => {\n    const newCustomDeck = schemes.map(scheme => {\n      return { ...scheme, count: 0 };\n    });\n    setCustomDeck(newCustomDeck);\n  }, [schemes, setCustomDeck]);\n\n  const customDeckSize = () => {\n    const reducer = (a, b) => a + b;\n    return customDeck.map(c => c.count).reduce(reducer, 0);\n  };\n\n  const resetCustomDeck = () => {\n    customDeck.forEach(c => (c.count = 0));\n    setCustomDeck([...customDeck]);\n  };\n\n  const incrementCount = card => {\n    customDeck.forEach(c => {\n      if (c.id === card.id) {\n        c.count += 1;\n        c.count = Math.min(c.count, 2);\n      }\n    });\n    setCustomDeck([...customDeck]);\n  };\n\n  const decrementCount = card => {\n    customDeck.forEach(c => {\n      if (c.id === card.id) {\n        c.count -= 1;\n        c.count = Math.max(c.count, 0);\n      }\n    });\n    setCustomDeck([...customDeck]);\n  };\n\n  const cardListItems = customDeck.map(card => (\n    <ListGroup.Item key={card.id} variant=\"dark\" className=\"noselect\">\n      <Scheme card={card} />\n      <div className=\"text-center\">\n        <h1>\n          <Badge pill variant={card.count > 0 ? \"success\" : \"dark\"}>\n            x{card.count}\n          </Badge>\n        </h1>\n        <LoyaltyButtonGroup\n          downProps={{\n            disabled: card.count <= 0,\n            onClick: () => decrementCount(card)\n          }}\n          upProps={{\n            disabled: card.count >= 2,\n            onClick: () => incrementCount(card)\n          }}\n        />\n      </div>\n    </ListGroup.Item>\n  ));\n\n  return (\n    <Accordion>\n      <Card className=\"noselect\">\n        <Card.Body>\n          <DeckCardTitle name={deckName} />\n          <Accordion.Toggle\n            as={Button}\n            block\n            eventKey=\"custom-deck-toggle\"\n            variant=\"secondary\"\n          >\n            Build Custom\n          </Accordion.Toggle>\n          <Accordion.Collapse eventKey=\"custom-deck-toggle\">\n            <>\n              <div className=\"fixed-top mt-1 ml-1 text-left\">\n                <Alert variant=\"info\" className=\"clearfix\">\n                  <h4 className=\"float-left\">\n                    Custom Deck Size: {customDeckSize()}\n                  </h4>\n                  <ButtonGroup className=\"float-right\">\n                    <Button variant=\"danger\" onClick={resetCustomDeck}>\n                      Reset\n                    </Button>\n                    <Button\n                      variant=\"success\"\n                      onClick={() => onSelectDeck(\"Custom\", customDeck)}\n                    >\n                      Use Deck\n                    </Button>\n                  </ButtonGroup>\n                </Alert>\n              </div>\n\n              <ListGroup>{cardListItems}</ListGroup>\n            </>\n          </Accordion.Collapse>\n          <Button\n            block\n            variant=\"success\"\n            onClick={() => onSelectDeck(\"Custom\", customDeck)}\n          >\n            Use Custom Deck\n          </Button>\n        </Card.Body>\n      </Card>\n    </Accordion>\n  );\n};\n","import React from \"react\";\nimport { Button, Card } from \"react-bootstrap\";\nimport { DeckCardTitle } from \"./DeckCardTitle\";\nimport { Prebuilts } from \"./Prebuilts\";\nimport { CustomDeckBuilder } from \"./CustomDeckBuilder\";\n\nexport const DeckSelect = ({ schemes, onSelectDeck }) => (\n  <>\n    <Card className=\"noselect\">\n      <Card.Body>\n        <DeckCardTitle name={\"All Schemes\"} />\n        <Button\n          block\n          variant=\"success\"\n          onClick={() => onSelectDeck(\"All\", schemes)}\n        >\n          Use All\n        </Button>\n      </Card.Body>\n    </Card>\n    <Prebuilts schemes={schemes} onSelectDeck={onSelectDeck} />\n    <CustomDeckBuilder schemes={schemes} onSelectDeck={onSelectDeck} />\n  </>\n);\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { Alert, Button, Fade, Jumbotron, Container } from \"react-bootstrap\";\n\nimport { ArchenemyHelmet } from \"./Helmet\";\nimport { getAllArchenemyCards } from \"../../util/api.js\";\nimport { Scheme } from \"../../components/magic/Scheme\";\nimport { Confirm } from \"../../components/Confirm\";\nimport { Loading } from \"../../components/Loading\";\n\nimport { useDeckContext } from \"../../mtg/DeckContext\";\nimport { History } from \"../../components/game/History\";\nimport { Deck } from \"../../components/game/Deck\";\nimport { DevTools } from \"../../components/DevTools\";\nimport { ActionButton } from \"../../components/game/ActionButton\";\nimport { AbandonButton } from \"./AbandonButton\";\nimport { DeckSelect } from \"./DeckSelect\";\nimport { useGameContext } from \"../../mtg/GameContext\";\nimport { useLocalState } from \"../../hooks/useLocalState\";\n\nexport const Archenemy = () => {\n  const [loading, setLoading] = useState(true);\n  const [schemes, setSchemes] = useState([]);\n  const [deckSelection, setDeckSelection] = useState(true);\n\n  const game = useGameContext();\n  const currentCard = game.currentCard;\n  const ongoingSchemes = game.additionalCards;\n\n  const deck = useDeckContext();\n\n  const [abandonedOngoing, setAbandonedOnGoing] = useLocalState(\n    `archenemy-abandonedOngoing`,\n    false\n  );\n\n  const fetchSchemes = useCallback(async () => {\n    const newSchemes = await getAllArchenemyCards();\n    setSchemes(newSchemes);\n    setLoading(false);\n  }, [setSchemes, setLoading]);\n\n  useEffect(() => {\n    if (schemes && schemes.length <= 0) {\n      fetchSchemes();\n    }\n  }, [schemes, fetchSchemes]);\n\n  useEffect(() => {\n    setDeckSelection(!deck.isInit);\n  }, [deck.isInit]);\n\n  const scheme = () => {\n    if (currentCard) {\n      if (currentCard.type_line === \"Ongoing Scheme\") {\n        ongoingSchemes.push(currentCard);\n      }\n    }\n    const newCard = deck.drawCard();\n    game.setCurrentCard(newCard);\n    game.setAdditionalCards(ongoingSchemes);\n    game.setCurrentCard(newCard);\n    setAbandonedOnGoing(false);\n  };\n\n  const reset = async () => {\n    setLoading(true);\n    fetchSchemes();\n    deck.reInit();\n    game.reset();\n    setAbandonedOnGoing(false);\n    setLoading(false);\n    setDeckSelection(true);\n  };\n\n  const undo = async () => {\n    const lastCard = deck.undoDraw();\n    if (lastCard) {\n      game.setCurrentCard(lastCard);\n      setAbandonedOnGoing(false);\n    }\n  };\n\n  const renderGamePlay = () => {\n    const history = deck.history;\n\n    return (\n      <>\n        <ActionButton\n          text=\"Scheme\"\n          onClick={scheme}\n          disabled={loading}\n          icon={<i className=\"ss ss-arc ss-3x mx-2\" />}\n        />\n\n        {loading ? (\n          <Loading className=\"text-muted\" />\n        ) : (\n          <div className=\"pt-2 mb-2 d-flex justify-content-center\">\n            {abandonedOngoing ? (\n              <Jumbotron className=\"bg-danger text-center\" fluid>\n                <Container fluid>\n                  <h1>Current Scheme Has Been Foiled!</h1>\n                </Container>\n              </Jumbotron>\n            ) : currentCard ? (\n              <Fade key={currentCard?.deck_card_id} timeout={100}>\n                <Scheme card={currentCard} displayActions=\"true\">\n                  <AbandonButton card={currentCard} onClick={abandonScheme} />\n                </Scheme>\n              </Fade>\n            ) : (\n              <Scheme />\n            )}\n          </div>\n        )}\n\n        {renderOngoingSchemes()}\n\n        <History history={history} CardType={Scheme} />\n\n        <p className=\"text-center my-3 noselect\">\n          There are {deck.deck ? deck.deck.length : 0} cards remaining.\n        </p>\n        <Confirm\n          onConfirm={reset}\n          headerText=\"Reset Schemes?\"\n          triggerText=\"Reset\"\n          confirmText=\"Reset\"\n          confirmVariant=\"danger\"\n          triggerButtonParams={{ variant: \"danger\", block: true }}\n        />\n      </>\n    );\n  };\n\n  const renderOngoingSchemes = () => {\n    if (ongoingSchemes && ongoingSchemes.length > 0) {\n      return (\n        <>\n          <Alert variant=\"info\" className=\"text-center\">\n            <h5>Ongoing Schemes</h5>\n          </Alert>\n          <div className=\"d-flex justify-content-center flex-wrap \">\n            {ongoingSchemes.map(c => (\n              <React.Fragment key={c.deck_card_id}>\n                <Scheme card={c} displayActions=\"true\">\n                  <AbandonButton card={c} onClick={abandonScheme} />\n                </Scheme>\n              </React.Fragment>\n            ))}\n          </div>\n        </>\n      );\n    }\n  };\n\n  const abandonScheme = card => {\n    if (currentCard?.deck_card_id === card.deck_card_id) {\n      console.log(\"Abandon Current Scheme\", card);\n      game.clearCurrentCard();\n      setAbandonedOnGoing(true);\n    } else {\n      console.log(\"Abandon Scheme\", card);\n      const newOngoing = ongoingSchemes.filter(\n        s => s.deck_card_id !== card.deck_card_id\n      );\n      game.setAdditionalCards(newOngoing);\n    }\n  };\n\n  const selectDeck = (name, cards) => {\n    console.log(`Selected ${name}`, cards);\n\n    const newCards = name === \"All\" ? cards : [];\n    cards.forEach(c => {\n      for (let i = 0; i < c.count; i++) {\n        newCards.push(c);\n      }\n    });\n    deck.initDeck(newCards, true);\n  };\n\n  return (\n    <div className=\"archenemy\">\n      <ArchenemyHelmet schemes={schemes} />\n      {loading ? (\n        <Loading className=\"text-muted\" />\n      ) : deckSelection ? (\n        <DeckSelect\n          schemes={schemes}\n          onSelectDeck={(name, cards) => selectDeck(name, cards)}\n        />\n      ) : (\n        renderGamePlay()\n      )}\n      <DevTools>\n        <Button onClick={undo} variant=\"warning\" block>\n          Undo\n        </Button>\n        <Deck CardType={Scheme} />\n      </DevTools>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\n\nexport const SYBHelmet = () => {\n  return (\n    <Helmet title=\"SYB\">\n      <link\n        rel=\"shortcut icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/starter.ico\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/starter_256.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"64x64\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/starter_64.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"128x128\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/starter_128.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"256x256\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/starter_256.png\"}\n      />\n      <link\n        rel=\"manifest\"\n        href={process.env.PUBLIC_URL + \"/syb-manifest.json\"}\n      />\n    </Helmet>\n  );\n};\n","export const TAGS = [\n  {\n    name: \"Chode Mode\",\n    defaultEnabled: true\n  },\n  {\n    name: \"Deck Swaps\",\n    defaultEnabled: false\n  },\n  {\n    name: \"Planechase\",\n    defaultEnabled: true\n  },\n  {\n    name: \"EDH\",\n    defaultEnabled: true\n  },\n  {\n    name: \"2 Headed Giant\",\n    defaultEnabled: true\n  },\n  {\n    name: \"SYB\",\n    defaultEnabled: true\n  },\n  {\n    name: \"Range 1\",\n    defaultEnabled: true\n  },\n  {\n    name: \"Free for All\",\n    defaultEnabled: true\n  },\n  {\n    name: \"Pentacle\",\n    defaultEnabled: true\n  },\n  {\n    name: \"Secret Partners\",\n    defaultEnabled: true\n  },\n  {\n    name: \"Archenemy\",\n    defaultEnabled: true\n  },\n  {\n    name: \"Emperor\",\n    defaultEnabled: true\n  },\n  {\n    name: \"Teams\",\n    defaultEnabled: false\n  },\n  {\n    name: \"Star\",\n    defaultEnabled: false\n  }\n];\n\nconst canAny = p => true;\nconst canEven = p => p % 2 === 0;\nconst canOdd = p => p % 2 === 1;\nconst can2Hg = p => p > 2 && canEven(p);\nconst canFreeForAll = p => p > 2;\nconst canEmperor = p => p >= 6 && p % 3 === 0;\nconst canSecretPartner = p => p >= 6 && canEven(p);\nconst canRange1 = p => p > 3;\nconst canPentacle = p => p >= 5;\nexport const canStar = p => p >= 5 && canOdd(p);\nconst canTeams = p => p > 2 && canEven(p);\n\nexport const FORMATS = [\n  {\n    id: 1,\n    name: \"Chode Mode\",\n    initial: 0.5,\n    tags: [\"Chode Mode\"],\n    players: canAny\n  },\n  {\n    id: 2,\n    name: \"Planechase \",\n    initial: 0.5,\n    tags: [\"Planechase\"],\n    players: canAny\n  },\n  {\n    id: 3,\n    name: \"Planechase EDH\",\n    initial: 0.5,\n    tags: [\"Planechase\", \"EDH\"],\n    players: canAny\n  },\n  {\n    id: 4,\n    name: \"EDH Free for All\",\n    initial: 0.5,\n    tags: [\"EDH\", \"Free for All\"],\n    players: canFreeForAll\n  },\n  {\n    id: 5,\n    name: \"EDH SYB\",\n    initial: 0.5,\n    tags: [\"EDH\", \"SYB\"],\n    showSwaps: true,\n    players: canAny\n  },\n  {\n    id: 6,\n    name: \"EDH SYB Deck Swaps\",\n    displayName: \"EDH SYB\",\n    initial: 0,\n    tags: [\"EDH\", \"SYB\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canAny\n  },\n  {\n    id: 7,\n    name: \"EDH Emperor\",\n    initial: 0.5,\n    tags: [\"EDH\", \"Emperor\"],\n    showSwaps: true,\n    players: canEmperor\n  },\n  {\n    id: 8,\n    name: \"EDH Emperor Deck Swaps\",\n    displayName: \"EDH Emperor\",\n    initial: 0,\n    tags: [\"EDH\", \"Emperor\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canEmperor\n  },\n  {\n    id: 9,\n    name: \"2 Headed Giant SYB\",\n    initial: 0.5,\n    tags: [\"2 Headed Giant\"],\n    players: can2Hg\n  },\n  {\n    id: 10,\n    name: \"2 Headed Giant Free for All\",\n    initial: 0.5,\n    tags: [\"2 Headed Giant\", \"Free for All\"],\n    players: p => can2Hg(p) && canFreeForAll(p) && p > 4\n  },\n  {\n    id: 11,\n    name: \"Emperor\",\n    initial: 0.5,\n    tags: [\"Emperor\"],\n    showSwaps: true,\n    players: canEmperor\n  },\n  {\n    id: 12,\n    name: \"Emperor Deck Swaps\",\n    displayName: \"Emperor\",\n    initial: 0,\n    tags: [\"Emperor\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canEmperor\n  },\n  {\n    id: 13,\n    name: \"Range 1\",\n    initial: 0.5,\n    tags: [\"Range 1\"],\n    players: canRange1\n  },\n  {\n    id: 14,\n    name: \"Free for All\",\n    initial: 0.5,\n    tags: [\"Free for All\"],\n    players: canFreeForAll\n  },\n  {\n    id: 15,\n    name: \"SYB\",\n    initial: 0.5,\n    tags: [\"SYB\"],\n    showSwaps: true,\n    players: canAny\n  },\n  {\n    id: 16,\n    name: \"SYB Deck Swaps\",\n    displayName: \"SYB\",\n    initial: 0.5,\n    tags: [\"SYB\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canAny\n  },\n  {\n    id: 17,\n    name: \"Secret Partners\",\n    initial: 0.5,\n    tags: [\"Secret Partners\"],\n    showSwaps: true,\n    players: canSecretPartner\n  },\n  {\n    id: 18,\n    name: \"Secret Partners Deck Swaps\",\n    displayName: \"Secret Partners\",\n    initial: 0.5,\n    tags: [\"Secret Partners\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canSecretPartner\n  },\n  {\n    id: 19,\n    name: \"EDH Secret Partners\",\n    initial: 0.5,\n    tags: [\"EDH\", \"Secret Partners\"],\n    showSwaps: true,\n    players: canSecretPartner\n  },\n  {\n    id: 20,\n    name: \"EDH Secret Partners Deck Swaps\",\n    displayName: \"EDH Secret Partners\",\n    initial: 0,\n    tags: [\"EDH\", \"Secret Partners\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canSecretPartner\n  },\n  {\n    id: 21,\n    name: \"EDH Pentacle\",\n    initial: 0.5,\n    tags: [\"EDH\", \"Pentacle\"],\n    showSwaps: true,\n    players: canPentacle\n  },\n  {\n    id: 22,\n    name: \"EDH Pentacle Deck Swaps\",\n    displayName: \"EDH Pentacle\",\n    initial: 0,\n    tags: [\"EDH\", \"Pentacle\", \"Deck Swaps\"],\n    players: canPentacle\n  },\n  {\n    id: 23,\n    name: \"Pentacle\",\n    initial: 0.5,\n    tags: [\"Pentacle\"],\n    showSwaps: true,\n    players: canPentacle\n  },\n  {\n    id: 24,\n    name: \"Pentacle Deck Swaps\",\n    displayName: \"Pentacle\",\n    initial: 0.5,\n    tags: [\"Pentacle\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canPentacle\n  },\n  {\n    id: 25,\n    name: \"Archenemy\",\n    initial: 0.5,\n    tags: [\"Archenemy\"],\n    players: p => p === 4\n  },\n  {\n    id: 26,\n    name: \"EDH 2 Headed Giant SYB\",\n    initial: 0.1,\n    tags: [\"EDH\", \"2 Headed Giant\"],\n    players: can2Hg\n  },\n  {\n    id: 27,\n    name: \"EDH 2 Headed Giant FFA\",\n    initial: 0.1,\n    tags: [\"EDH\", \"2 Headed Giant\", \"Free for All\"],\n    players: p => can2Hg(p) && canFreeForAll(p) && p > 4\n  },\n  {\n    id: 28,\n    name: \"EDH Range 1\",\n    initial: 0.5,\n    tags: [\"EDH\", \"Range 1\"],\n    players: canRange1\n  },\n  {\n    id: 29,\n    name: \"Teams\",\n    initial: 0.5,\n    tags: [\"Teams\"],\n    players: canTeams\n  },\n  {\n    id: 30,\n    name: \"EDH Teams\",\n    initial: 0.5,\n    tags: [\"Teams\", \"EDH\"],\n    players: canTeams\n  },\n  {\n    id: 31,\n    name: \"Star\",\n    initial: 0.5,\n    tags: [\"Star\"],\n    players: canStar\n  },\n  {\n    id: 32,\n    name: \"EDH Star\",\n    initial: 0.5,\n    tags: [\"Star\", \"EDH\"],\n    players: canStar\n  }\n];\n","const SOURCE_COLOR = \"#17a2b8\";\nconst TARGET_COLOR = \"#FF4444\";\n\nexport const cytoStyle = ({ square } = { square: false }) => [\n  {\n    selector: \"node\",\n    style: {\n      padding: \"50%\",\n      width: \"50%\",\n      height: \"50%\",\n      \"background-color\": SOURCE_COLOR,\n      \"text-valign\": \"center\",\n      \"text-halign\": \"center\",\n      content: \"data(label)\"\n    }\n  },\n  {\n    selector: \"node[label]\",\n    style: {\n      label: \"data(label)\",\n      \"font-size\": \"2em\",\n      color: \"white\"\n    }\n  },\n  {\n    selector: \".screw\",\n    style: {\n      width: \"5%\",\n      \"curve-style\": square ? \"unbundled-bezier\" : \"straight\",\n      \"target-arrow-shape\": \"triangle \",\n      \"arrow-scale\": 2.5,\n      \"target-arrow-color\": TARGET_COLOR,\n      \"line-fill\": \"linear-gradient\",\n      \"line-gradient-stop-colors\": [SOURCE_COLOR, TARGET_COLOR],\n      \"z-index\": 2\n    }\n  },\n  {\n    selector: \".turn\",\n    style: {\n      width: \"2%\",\n      \"curve-style\": \"unbundled-bezier\",\n      \"control-point-distances\": [-20, -25, -20],\n      \"control-point-weights\": [0.25, 0.5, 0.75],\n      \"target-arrow-shape\": \"vee \",\n      \"line-style\": \"dashed\",\n      \"arrow-scale\": 1.5,\n      \"target-arrow-color\": \"#707070\",\n      \"line-color\": \"#707070\",\n      opacity: 0.5,\n      \"z-index\": 1\n    }\n  },\n  {\n    selector: \"node.highlight\",\n    style: {\n      \"background-color\": \"#218838\",\n      \"border-color\": \"#218838\",\n      \"border-width\": \"2px\"\n    }\n  },\n  {\n    selector: \"node.highlight.incoming\",\n    style: {\n      \"background-color\": SOURCE_COLOR,\n      \"border-color\": SOURCE_COLOR,\n      \"border-width\": \"2px\"\n    }\n  },\n  {\n    selector: \"node.highlight.outgoing\",\n    style: {\n      \"background-color\": TARGET_COLOR,\n      \"border-color\": TARGET_COLOR,\n      \"border-width\": \"2px\"\n    }\n  },\n  {\n    selector: \"node.highlight.outgoing.incoming\",\n    style: {\n      \"border-color\": SOURCE_COLOR,\n      \"border-width\": \"2px\"\n    }\n  },\n  {\n    selector: \"node.semitransparent\",\n    style: { opacity: \"0.5\" }\n  },\n  {\n    selector: \"edge.highlight\",\n    style: {\n      \"curve-style\": \"unbundled-bezier\"\n    }\n  },\n  {\n    selector: \"edge.highlight.incoming\",\n    style: {\n      \"curve-style\": \"unbundled-bezier\",\n      \"target-arrow-color\": SOURCE_COLOR,\n      \"line-gradient-stop-colors\": [SOURCE_COLOR, SOURCE_COLOR],\n      \"z-index\": 3\n    }\n  },\n  {\n    selector: \"edge.highlight.outgoing\",\n    style: {\n      \"target-arrow-color\": TARGET_COLOR,\n      \"line-gradient-stop-colors\": [TARGET_COLOR, TARGET_COLOR],\n      \"z-index\": 4\n    }\n  },\n  {\n    selector: \"edge.semitransparent\",\n    style: { opacity: \"0.2\" }\n  }\n];\n","import React, { useRef, useState, useEffect, useCallback } from \"react\";\nimport { Button, ButtonGroup, Col, Row, Spinner } from \"react-bootstrap\";\nimport Dialog from \"react-bootstrap-dialog\";\nimport CytoscapeComponent from \"react-cytoscapejs\";\nimport debounce from \"lodash/debounce\";\n\nimport { shuffleArray } from \"../../util/shuffleArray\";\n\nimport { SYBHelmet } from \"./Helmet\";\nimport { canStar } from \"../formats/formats\";\nimport { cytoStyle } from \"./Cyto\";\nimport {\n  DoubleFaceButton,\n  LoyaltyButtonGroup\n} from \"../../components/magic/Buttons.js\";\nimport { useLocalState } from \"../../hooks/useLocalState\";\nimport { DevTools } from \"../../components/DevTools.js\";\n\nconst TABLE_SHAPE_SQUARE = \"square\";\nconst TABLE_SHAPE_CIRCLE = \"circle\";\nconst DEFAULT_TABLE_SHAPE = TABLE_SHAPE_CIRCLE;\nconst TARGET_OFFSET = 2;\nconst DEFAULT_PLAYER_COUNT = 4;\nconst DEFAULT_PLAYER_TARGETS = 1;\nconst DEFAULT_LABELS = { 0: \"J\" };\n\nconst circleLayout = { name: \"circle\", nodeDimensionsIncludeLabels: true };\nconst gridLayout = { name: \"grid\", nodeDimensionsIncludeLabels: true, rows: 2 };\n\nexport const SYB = () => {\n  const [playerCount, setPlayerCount] = useLocalState(\n    \"syb-playerCount\",\n    DEFAULT_PLAYER_COUNT\n  );\n  const [playerTargets, setPlayerTargets] = useLocalState(\n    \"syb-playerTargets\",\n    DEFAULT_PLAYER_TARGETS\n  );\n  const [targets, setTargets] = useLocalState(\"syb-targets\", null);\n  const [labels, setLabels] = useLocalState(\"syb-labels\", DEFAULT_LABELS);\n  const [tableShape, setTableShape] = useLocalState(\n    \"syb-tableShape\",\n    DEFAULT_TABLE_SHAPE\n  );\n\n  // Dev Controls: These may only need to be setState\n  const [showTurnEdges, setShowTurnEdges] = useLocalState(\n    \"syb-showTurnEdges\",\n    true\n  );\n  const [starTurn, setStarTurn] = useLocalState(\"syb-starTurn\", false);\n  const [showScrewEdges, setShowScrewEdges] = useLocalState(\n    \"syb-showScrewEdges\",\n    true\n  );\n\n  const [cySet, setCySet] = useState(false);\n  const [loadingDirection, setLoadingDirection] = useState(false);\n\n  const cyContainer = useRef(null);\n  const dialog = useRef(null);\n\n  useEffect(() => {\n    cyContainer.current.nodes().each(d => {\n      const currentLabel = d.data(\"label\");\n      const playerNumber = d.id().split(\"-\")[1];\n      const newLabel = labels[playerNumber] || currentLabel;\n      if (currentLabel !== newLabel) {\n        d.data(\"label\", newLabel);\n      }\n    });\n  }, [cyContainer, labels]);\n\n  const generateNodes = () => {\n    const players = Array.from(Array(playerCount).keys());\n    return players.map(p => {\n      const label = labels[p] || p;\n      return { data: { id: `player-${p}`, label, type: \"triangle-tee\" } };\n    });\n  };\n\n  const generateEdges = () => {\n    if (!targets) return [];\n\n    const screwEdges = showScrewEdges\n      ? targets.flatMap((player, i) => {\n          return Array(playerTargets)\n            .fill(1)\n            .map((_, b) => {\n              const targetIndex = (i + b + 1) % playerCount;\n              const target = targets[targetIndex];\n              return {\n                data: {\n                  source: `player-${player}`,\n                  target: `player-${target}`,\n                  label: `Edge from ${player} to ${target}`\n                },\n                classes: \"screw\"\n              };\n            });\n        })\n      : [];\n\n    const turnEdges = showTurnEdges\n      ? targets.map((_, i) => {\n          const starNum = i + 2;\n          const starTurnTarget =\n            starNum > targets.length\n              ? 1\n              : starNum >= targets.length\n              ? 0\n              : starNum;\n          const normalTurnTarget = i + 1 >= targets.length ? 0 : i + 1;\n          const target =\n            starTurn && canStar(targets.length)\n              ? starTurnTarget\n              : normalTurnTarget;\n          return {\n            data: {\n              source: `player-${i}`,\n              target: `player-${target}`,\n              label: `Turn from ${i} to ${target}`\n            },\n            classes: \"turn\"\n          };\n        })\n      : [];\n\n    return screwEdges.concat(turnEdges);\n  };\n\n  const regenerateOrder = c => {\n    const players = Array.from(Array(c || playerCount).keys());\n    setTargets(shuffleArray(players));\n  };\n\n  const handleCy = cy => {\n    const layout = isSquare() ? gridLayout : circleLayout;\n    const SELECT_THRESHOLD = 100;\n\n    // Refresh Layout if needed\n    const refreshLayout = debounce(() => {\n      cy.layout(layout).run();\n    }, SELECT_THRESHOLD);\n\n    const nodeClick = debounce(e => {\n      const clickedNode = e.target;\n      setLabel(clickedNode.id().split(\"-\")[1]);\n    }, SELECT_THRESHOLD);\n\n    if (!cySet) {\n      cy.on(\"add remove\", () => {\n        refreshLayout();\n      });\n\n      cy.nodes().on(\"tap click\", nodeClick);\n\n      cy.on(\"mouseover touchstart\", \"node\", function(e) {\n        let sel = e.target;\n\n        sel.addClass(\"highlight\");\n\n        const incomers = sel.incomers(\".screw\");\n        const allIncomers = incomers.union(incomers.sources());\n        allIncomers.addClass(\"highlight incoming\");\n\n        const outgoers = sel.outgoers(\".screw\");\n        const allOutgoers = outgoers.union(outgoers.targets());\n        allOutgoers.addClass(\"highlight outgoing\");\n\n        cy.elements()\n          .difference(allOutgoers.union(allIncomers))\n          .not(sel)\n          .addClass(\"semitransparent\");\n      });\n\n      cy.on(\"mouseout touchend\", \"node\", function(e) {\n        cy.elements().removeClass(\n          \"semitransparent highlight incoming outgoing\"\n        );\n      });\n\n      setCySet(true);\n    }\n    cyContainer.current = cy;\n  };\n\n  const setLabel = useCallback(\n    number => {\n      console.log(\"Setting label\", number);\n      dialog.current.show({\n        title: \"Who is this?\",\n        bsSize: \"sm\",\n        actions: [\n          Dialog.CancelAction(),\n          Dialog.OKAction(a => {\n            labels[number] = a.value;\n            setLabels({ ...labels });\n          })\n        ],\n        prompt: Dialog.TextPrompt({ initialValue: labels[number] || number })\n      });\n    },\n    [dialog, labels, setLabels]\n  );\n\n  const renderCyto = () => {\n    const layout = isSquare() ? gridLayout : circleLayout;\n    const elements = {\n      nodes: generateNodes(),\n      edges: generateEdges()\n    };\n    const stylesheet = cytoStyle({ square: isSquare() });\n\n    return (\n      <CytoscapeComponent\n        cy={cy => handleCy(cy)}\n        elements={CytoscapeComponent.normalizeElements(elements)}\n        style={{ width: \"100vw\", height: \"100vh\" }}\n        className={\"flex-grow\"}\n        stylesheet={stylesheet}\n        userPanningEnabled={false}\n        layout={layout}\n      />\n    );\n  };\n\n  const removeListeners = () => {\n    cyContainer.current.removeListener(\"add remove\");\n    cyContainer.current\n      .nodes()\n      .removeListener(\"click tap touchstart touchend mouseover mouseout\");\n    setCySet(false);\n  };\n\n  const isSquare = () => {\n    return false && tableShape === TABLE_SHAPE_SQUARE;\n  };\n\n  const incrementCount = () => {\n    const newPlayerCount = playerCount + 1;\n    adjustTargetCount(newPlayerCount);\n    regenerateOrder(newPlayerCount);\n    removeListeners();\n    setPlayerCount(newPlayerCount);\n  };\n\n  const decrementCount = () => {\n    const newPlayerCount = Math.max(playerCount - 1, 1);\n    adjustTargetCount(newPlayerCount);\n    regenerateOrder(newPlayerCount);\n    removeListeners();\n    setPlayerCount(newPlayerCount);\n  };\n\n  const adjustTargetCount = playerCount => {\n    const newPlayerTargets = Math.min(\n      playerTargets,\n      Math.max(playerCount - TARGET_OFFSET, 1)\n    );\n    if (playerTargets !== newPlayerTargets) {\n      setPlayerTargets(newPlayerTargets);\n    }\n  };\n\n  const incrementTargetCount = () => {\n    const newPlayerTargets = Math.min(playerTargets + 1, playerCount);\n    regenerateOrder(playerCount, newPlayerTargets);\n    removeListeners();\n    setPlayerTargets(newPlayerTargets);\n  };\n\n  const decrementTargetCount = () => {\n    const newPlayerTargets = Math.max(playerTargets - 1, 1);\n    regenerateOrder(playerCount, newPlayerTargets);\n    removeListeners();\n    setPlayerTargets(newPlayerTargets);\n  };\n\n  const whichWay = () => {\n    setTargets(null);\n    setLoadingDirection(true);\n\n    setTimeout(() => {\n      regenerateOrder();\n      setLoadingDirection(false);\n    }, 1500);\n  };\n\n  const reset = async () => {\n    setPlayerCount(DEFAULT_PLAYER_COUNT);\n    setPlayerTargets(DEFAULT_PLAYER_TARGETS);\n    setTargets(null);\n    setTableShape(DEFAULT_TABLE_SHAPE);\n    setLabels(DEFAULT_LABELS);\n    removeListeners();\n    regenerateOrder(DEFAULT_PLAYER_COUNT, DEFAULT_PLAYER_TARGETS);\n  };\n\n  return (\n    <div className=\"syb\">\n      <SYBHelmet />\n\n      <Row className=\"my-4 text-center\">\n        <Col>\n          <h1>{playerCount} Players</h1>\n          <LoyaltyButtonGroup\n            upProps={{\n              onClick: incrementCount\n            }}\n            downProps={{\n              disabled: playerCount <= 1,\n              onClick: decrementCount\n            }}\n          />\n        </Col>\n        <Col>\n          <h1>{playerTargets} Targets</h1>\n          <LoyaltyButtonGroup\n            upProps={{\n              disabled: playerTargets >= playerCount - TARGET_OFFSET,\n              onClick: incrementTargetCount\n            }}\n            downProps={{\n              disabled: playerTargets <= 1,\n              onClick: decrementTargetCount\n            }}\n          />\n        </Col>\n        {false && (\n          <ButtonGroup>\n            <Button\n              active={tableShape === TABLE_SHAPE_CIRCLE}\n              onClick={() => setTableShape(TABLE_SHAPE_CIRCLE)}\n              variant=\"secondary\"\n            >\n              <i className=\"ss ss-portal ss-2x\" />\n            </Button>\n            <Button\n              active={tableShape === TABLE_SHAPE_SQUARE}\n              onClick={() => setTableShape(TABLE_SHAPE_SQUARE)}\n              variant=\"secondary\"\n            >\n              <i className=\"ss ss-bfz ss-2x\" />\n            </Button>\n          </ButtonGroup>\n        )}\n      </Row>\n      <div className=\"text-center my-2\">\n        <Button\n          variant=\"danger\"\n          onClick={whichWay}\n          block\n          disabled={loadingDirection}\n        >\n          {loadingDirection ? \"Calculating...\" : \"Which way are we screwing?\"}\n        </Button>\n      </div>\n      <div className=\"d-flex\">\n        {loadingDirection && (\n          <div\n            className=\"position-absolute w-75 text-center\"\n            style={{ top: \"45%\", left: \"0%\" }}\n          >\n            <Spinner\n              variant=\"danger\"\n              animation=\"grow\"\n              className=\"position-absolute\"\n              style={{ width: \"10rem\", height: \"10rem\" }}\n            />\n          </div>\n        )}\n        {renderCyto()}\n      </div>\n      <Button onClick={reset} variant=\"danger\" block>\n        Reset\n      </Button>\n\n      <DevTools>\n        <DoubleFaceButton\n          text=\"Turn Edges\"\n          onClick={() => setShowTurnEdges(!showTurnEdges)}\n          enabled={showTurnEdges}\n        />\n        <DoubleFaceButton\n          text=\"Screw Edges\"\n          onClick={() => setShowScrewEdges(!showScrewEdges)}\n          enabled={showScrewEdges}\n        />\n        <DoubleFaceButton\n          text=\"Star Turn\"\n          onClick={() => setStarTurn(!starTurn)}\n          enabled={starTurn}\n        />\n      </DevTools>\n\n      <Dialog\n        ref={component => {\n          dialog.current = component;\n        }}\n      />\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\n\nexport const FormatsHelmet = () => {\n  return (\n    <Helmet title=\"Formats\">\n      <link\n        rel=\"shortcut icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/evg.ico\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/evg_180.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"180x180\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/evg_180.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"192x192\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/evg_192.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"512x512\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/evg_512.png\"}\n      />\n      <link\n        rel=\"manifest\"\n        href={process.env.PUBLIC_URL + \"/formats-manifest.json\"}\n      />\n    </Helmet>\n  );\n};\n","import React, { useState } from \"react\";\nimport { Button, Spinner } from \"react-bootstrap\";\nimport { FormatsHelmet } from \"./Helmet\";\nimport { TAGS, FORMATS } from \"./formats\";\nimport { Confirm } from \"../../components/Confirm\";\n\nimport cloneDeep from \"lodash/cloneDeep\";\nimport flatMap from \"lodash/flatMap\";\nimport uniq from \"lodash/uniq\";\n\nimport \"rc-slider/assets/index.css\";\nimport \"rc-tooltip/assets/bootstrap.css\";\nimport Slider from \"rc-slider\";\nimport Tooltip from \"rc-tooltip\";\nimport {\n  DoubleFaceHighlightButton,\n  LoyaltyButtonGroup\n} from \"../../components/magic/Buttons\";\nimport { useLocalState } from \"../../hooks/useLocalState\";\n\nconst MIN_PLAYERS = 2;\nconst MAX_PLAYERS = 9;\nconst DEFAULT_PLAYERS = 5;\n\nconst handle = props => {\n  const { value, dragging, index, ...restProps } = props;\n  return (\n    <Tooltip\n      prefixCls=\"rc-slider-tooltip\"\n      overlay={value}\n      visible={dragging}\n      placement=\"top\"\n      key={index}\n    >\n      <Slider.Handle value={value} {...restProps} />\n    </Tooltip>\n  );\n};\n\nconst createTags = () => {\n  return TAGS.map(t => {\n    return { name: t.name, enabled: t.defaultEnabled };\n  });\n};\n\nconst createFormats = () => {\n  let formats = {};\n\n  for (let i = MIN_PLAYERS; i <= MAX_PLAYERS; i++) {\n    formats[i] = cloneDeep(FORMATS.filter(f => f.players && f.players(i)));\n    formats[i].forEach(f => (f.weight = f.initial));\n  }\n\n  return formats;\n};\n\nconst rand = (min, max) => {\n  return Math.random() * (max - min) + min;\n};\n\nexport const Formats = () => {\n  const [playerCount, setPlayerCount] = useLocalState(\n    \"formats-playerCount\",\n    DEFAULT_PLAYERS\n  );\n  const [tags, setTags] = useLocalState(\"formats-tags\", createTags());\n  const [currentFormats, setCurrentFormats] = useLocalState(\n    \"formats-current\",\n    createFormats()\n  );\n\n  const [activeFormat, setActiveFormat] = useState(null);\n  const [loadingFormat, setLoadingFormat] = useState(false);\n  const [swapTriggered, setSwapTriggered] = useState(false);\n\n  const reset = () => {\n    setPlayerCount(DEFAULT_PLAYERS);\n    setTags(createTags());\n    setCurrentFormats(createFormats());\n  };\n\n  const pickFormat = () => {\n    console.log(\"Generate Format\");\n    setLoadingFormat(true);\n    setSwapTriggered(false);\n    const formats = activeFormats();\n    const activeFormat = getRandomFormat(formats);\n    console.log(\"picked item\", activeFormat);\n    setTimeout(() => {\n      setLoadingFormat(false);\n      setActiveFormat(activeFormat);\n    }, 1000);\n  };\n\n  const getRandomFormat = list => {\n    const totalWeight = list.reduce((result, cur) => {\n      return result + cur.weight;\n    }, 0);\n    const randomNum = rand(0, totalWeight);\n    let weightSum = 0;\n\n    return list.find(item => {\n      weightSum += item.weight;\n      return randomNum <= weightSum;\n    });\n  };\n\n  const incrementCount = () => {\n    setPlayerCount(Math.min(playerCount + 1, MAX_PLAYERS));\n    setActiveFormat(null);\n  };\n\n  const decrementCount = () => {\n    setPlayerCount(Math.max(playerCount - 1, MIN_PLAYERS));\n    setActiveFormat(null);\n  };\n\n  const updateFormatValue = (format, value) => {\n    currentFormats[playerCount].forEach(f => {\n      if (f.name === format.name) {\n        format.weight = value / 100;\n      }\n    });\n    setCurrentFormats({ ...currentFormats });\n  };\n\n  const activeTags = () => {\n    return currentFormats\n      ? uniq(\n          flatMap(currentFormats[playerCount], f => {\n            return f.tags;\n          })\n        ).sort()\n      : [];\n  };\n\n  const toggleTag = tag => {\n    tags.forEach(t => {\n      if (t.name === tag.name) {\n        t.enabled = !t.enabled;\n      }\n    });\n    setTags([...tags]);\n  };\n\n  const enabledTags = () => {\n    return tags ? tags.filter(t => t.enabled).map(t => t.name) : [];\n  };\n\n  const FormatToggles = () => {\n    if (tags) {\n      const active = activeTags();\n      const tagStates = tags.filter(t => active.includes(t.name));\n\n      const values = tagStates.map((t, i) => {\n        return (\n          <div className=\"col-6 col-md-4 col-lg-3 mb-1\" key={i}>\n            <DoubleFaceHighlightButton\n              onClick={() => {\n                toggleTag(t);\n              }}\n              enabled={t.enabled}\n              text={t.name}\n            />\n          </div>\n        );\n      });\n\n      return <div className=\"row\">{values}</div>;\n    }\n  };\n\n  const activeFormats = () => {\n    let formats = null;\n    console.log(\"Player\", playerCount);\n    console.log(\"format\", currentFormats);\n    if (tags && currentFormats && playerCount) {\n      formats = currentFormats[playerCount];\n      const enabled = enabledTags();\n      console.log(\"enabledTags\", enabled);\n      formats = formats.filter(f => f.tags.every(t => enabled.includes(t)));\n      // formats.forEach(f => f.weight = f.initial) // Store weights\n      console.log(\"Formats\", formats);\n    }\n    return formats;\n  };\n\n  const activeFormatName = () => {\n    if (!activeFormat) {\n      return \"None\";\n    } else {\n      return swapTriggered\n        ? activeFormat.name\n        : activeFormat.displayName || activeFormat.name;\n    }\n  };\n\n  const ActiveFormats = () => {\n    const formats = activeFormats();\n    if (formats) {\n      const formatTags = formats.map(f => {\n        return (\n          <div\n            className=\"row mb-2\"\n            key={`${playerCount}-${f.id}-${f.weight * 100}`}\n          >\n            <div className=\"col-5\">{f.name}</div>\n            <div className=\"col-7\">\n              <Slider\n                min={0}\n                max={100}\n                marks={{ 25: \"25\", 50: \"50\", 75: \"75\" }}\n                defaultValue={f.weight * 100}\n                included={true}\n                handle={handle}\n                onAfterChange={value => updateFormatValue(f, value)}\n              />\n            </div>\n          </div>\n        );\n      });\n      return formatTags;\n    }\n  };\n\n  const showDeckswapButton =\n    !loadingFormat &&\n    !swapTriggered &&\n    activeFormat &&\n    activeFormat.showSwaps &&\n    enabledTags().includes(\"Deck Swaps\");\n\n  return (\n    <div className=\"formats\">\n      <FormatsHelmet />\n      <div className=\"my-4 noselect\">\n        <div className=\"text-center\">\n          <h1>{playerCount} Players</h1>\n          <LoyaltyButtonGroup\n            className=\"my-4\"\n            upProps={{\n              disabled: playerCount >= MAX_PLAYERS,\n              onClick: incrementCount\n            }}\n            downProps={{\n              disabled: playerCount <= MIN_PLAYERS,\n              onClick: decrementCount\n            }}\n          />\n          <div className=\"text-center mb-5\">\n            <Button\n              block\n              variant=\"danger\"\n              onClick={pickFormat}\n              disabled={loadingFormat}\n            >\n              {loadingFormat ? \"Computing...\" : \"Which Format?\"}\n            </Button>\n            {loadingFormat ? (\n              <Spinner\n                size=\"lg\"\n                animation=\"border\"\n                variant=\"primary\"\n                className=\"mt-3 mb-2\"\n              >\n                <span className=\"sr-only\">Loading...</span>\n              </Spinner>\n            ) : (\n              <h1 className=\"my-2\">{activeFormatName()}</h1>\n            )}\n            {showDeckswapButton && (\n              <Button\n                onClick={() => setSwapTriggered(true)}\n                block\n                className={\"w-50 mx-auto\"}\n                variant=\"success\"\n              >\n                Deckswaps?\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n      <hr className=\"border-info\" />\n      <div className=\"mb-5\">\n        <FormatToggles />\n      </div>\n      <div className=\"mb-5 noselect\">\n        <ActiveFormats />\n      </div>\n      <div className=\"my-3\">\n        <Confirm\n          onConfirm={reset}\n          headerText=\"Reset Formats?\"\n          triggerText=\"Reset\"\n          confirmText=\"Reset\"\n          confirmVariant=\"danger\"\n          triggerButtonParams={{ variant: \"danger\", block: true }}\n        />\n      </div>\n    </div>\n  );\n};\n","import { Alert } from \"react-bootstrap\";\nimport { useSettings } from \"../hooks/useSettings\";\n\nexport const Disclaimer = () => {\n  const settings = useSettings();\n  const { disclaimerDismissed, setDisclaimerDismissed } = settings;\n  return (\n    <Alert\n      variant=\"warning\"\n      className=\"fixed-bottom mb-0 py-1\"\n      show={!disclaimerDismissed}\n      onClose={() => setDisclaimerDismissed(true)}\n      dismissible\n    >\n      <h6>Disclaimer</h6>\n      <small className=\"text-muted m-0\">\n        This site is created for personal use. Magic: The Gathering, the mana\n        symbols, the tap symbol and all other related images are owned by\n        Wizards of the Coast. jibbermaster.com is unaffiliated with Wizards of\n        the Coast.\n      </small>\n    </Alert>\n  );\n};\n","import React, { useState } from \"react\";\nimport { NavLink as RRNavLink } from \"react-router-dom\";\n\nimport { Dropdown, Navbar, Nav } from \"react-bootstrap\";\nimport { useSettings } from \"../hooks/useSettings\";\nimport { DoubleFaceIcon } from \"./magic/DoubleFaceIcon\";\n\nexport const Navigation = () => {\n  const [open, setOpen] = useState(false);\n  const settings = useSettings();\n\n  const {\n    disclaimerDismissed,\n    displayText,\n    displayImages,\n    devTools,\n    displayGatherer,\n    setDisclaimerDismissed,\n    setDisplayText,\n    setDisplayImages,\n    setDevTools,\n    setDisplayGatherer\n  } = settings;\n\n  const toggle = () => setOpen(!open);\n  const closeNavbar = () => open && setOpen(false);\n\n  const Toggler = ({ value, text, onClick }) => (\n    <Dropdown.Item onClick={onClick}>\n      <DoubleFaceIcon enabled={value} />\n      <span className=\"ml-3\">{text}</span>\n    </Dropdown.Item>\n  );\n\n  const NavItem = ({ to, text }) => (\n    <Nav.Item>\n      <Nav.Link\n        as={RRNavLink}\n        exact\n        to={to}\n        activeClassName=\"active\"\n        onClick={closeNavbar}\n      >\n        {text}\n      </Nav.Link>\n    </Nav.Item>\n  );\n\n  return (\n    <Navbar\n      variant=\"dark\"\n      expand=\"md\"\n      className=\"text-right p-1 noselect\"\n      expanded={open}\n    >\n      <Navbar.Brand />\n      <Navbar.Toggle onClick={toggle} />\n      <Navbar.Collapse>\n        <Nav className=\"ml-auto\" navbar>\n          <NavItem to=\"/\" text=\"Home\" />\n          <NavItem to=\"/planechase\" text=\"Planechase\" />\n          <NavItem to=\"/archenemy\" text=\"Archenemy\" />\n          <NavItem to=\"/syb\" text=\"SYB\" />\n          <NavItem to=\"/formats\" text=\"Formats\" />\n          <Dropdown navbar onToggle={open => !open && closeNavbar()}>\n            <Dropdown.Toggle as={Nav.Link}>Settings</Dropdown.Toggle>\n            <Dropdown.Menu alignRight>\n              <Toggler\n                value={disclaimerDismissed}\n                text=\"Disclaimer Dismissed\"\n                onClick={() => setDisclaimerDismissed(!disclaimerDismissed)}\n              />\n              <Toggler\n                value={displayText}\n                text=\"Display Text\"\n                onClick={() => setDisplayText(!displayText)}\n              />\n              <Toggler\n                value={displayImages}\n                text=\"Display Images\"\n                onClick={() => setDisplayImages(!displayImages)}\n              />\n              <Toggler\n                value={displayGatherer}\n                text=\"Display Gatherer\"\n                onClick={() => setDisplayGatherer(!displayGatherer)}\n              />\n              <Toggler\n                value={devTools}\n                text=\"Dev Tools\"\n                onClick={() => setDevTools(!devTools)}\n              />\n              <Dropdown.Divider />\n              <Dropdown.Item onClick={() => window.localStorage.clear()}>\n                Clear Everything\n              </Dropdown.Item>\n\n              {devTools && (\n                <>\n                  <Dropdown.Divider />\n                  <Dropdown.Item disabled>\n                    Version {settings.getSetting(\"version\")}\n                  </Dropdown.Item>\n                </>\n              )}\n            </Dropdown.Menu>\n          </Dropdown>\n        </Nav>\n      </Navbar.Collapse>\n    </Navbar>\n  );\n};\n","import React from \"react\";\nimport { Helmet, HelmetProvider } from \"react-helmet-async\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\n\nimport \"./App.scss\";\n\nimport { Home } from \"./pages/home\";\nimport { Planechase } from \"./pages/planechase\";\nimport { Archenemy } from \"./pages/archenemy\";\nimport { SYB } from \"./pages/syb\";\nimport { Formats } from \"./pages/formats\";\n\nimport { DeckProvider } from \"./mtg/DeckContext\";\nimport { GameProvider } from \"./mtg/GameContext\";\nimport { Disclaimer } from \"./components/Disclaimer\";\nimport { Navigation } from \"./components/Navigation\";\nimport { SettingsProvider } from \"./hooks/useSettings\";\n\nconst Providers = ({ children }) => {\n  return (\n    <BrowserRouter>\n      <HelmetProvider>\n        <SettingsProvider>{children}</SettingsProvider>\n      </HelmetProvider>\n    </BrowserRouter>\n  );\n};\n\nconst Main = () => {\n  return (\n    <Switch>\n      <Route path=\"/\" exact render={props => <Home {...props} />} />\n      <Route\n        path=\"/archenemy\"\n        exact\n        render={props => (\n          <GameProvider prefix=\"archenemy\">\n            <DeckProvider prefix=\"archenemy\">\n              <Archenemy {...props} />\n            </DeckProvider>\n          </GameProvider>\n        )}\n      />\n      <Route\n        path=\"/planechase\"\n        exact\n        render={props => (\n          <GameProvider prefix=\"planechase\">\n            <DeckProvider prefix=\"planechase\">\n              <Planechase {...props} />\n            </DeckProvider>\n          </GameProvider>\n        )}\n      />\n      <Route path=\"/syb\" exact render={props => <SYB {...props} />} />\n      <Route path=\"/formats\" exact render={props => <Formats {...props} />} />\n    </Switch>\n  );\n};\n\nconst App = () => {\n  return (\n    <Providers>\n      <Helmet titleTemplate=\"%s - Jibbermaster\" />\n      <Navigation />\n      <div className=\"app text-light bg-dark col-md-8 offset-md-2 col-lg-8 offset-lg-2 col-xl-6 offset-xl-3\">\n        <Main />\n        <Disclaimer />\n      </div>\n    </Providers>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}