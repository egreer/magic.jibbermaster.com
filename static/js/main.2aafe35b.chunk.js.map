{"version":3,"sources":["hooks/useLocalState.tsx","hooks/useSettings.tsx","pages/home/index.js","mtg/card.js","pages/planechase/Helmet.js","util/shuffleArray.js","pages/hike/data/planes.js","util/createMarkup.js","util/additionalProps.js","pages/hike/data/chaos.js","util/api.js","components/Loading.js","components/Confirm.js","images/planechase-back.jpg","components/magic/Counter.js","components/magic/CardText.js","components/magic/Plane.js","components/magic/planar-die/PlanarDie.js","components/magic/DoubleFaceIcon.js","components/magic/Buttons.js","mtg/DeckContext.js","components/game/History.js","components/game/Deck.js","components/DevTools.js","components/game/ActionButton.js","pages/planechase/ScryModal.js","pages/planechase/ChaosButton.js","pages/planechase/TripleChaosModal.js","mtg/GameContext.js","pages/planechase/index.js","pages/archenemy/Helmet.js","images/archenemy-back.jpg","components/magic/Scheme.js","pages/archenemy/AbandonButton.js","pages/archenemy/DeckCardTitle.js","mtg/prebuilt-decks.js","pages/archenemy/Prebuilts.js","pages/archenemy/CustomDeckBuilder.js","pages/archenemy/DeckSelect.js","pages/archenemy/index.js","pages/syb/Helmet.js","pages/formats/formats.js","pages/syb/Cyto.js","pages/syb/index.js","pages/formats/Helmet.js","pages/formats/index.js","components/Disclaimer.js","components/Navigation.js","images/classic-back.jpg","images/arena-back.png","images/blank-front.png","components/magic/Card.js","pages/hike/data/die.js","pages/hike/Die.js","pages/hike/Helmet.js","pages/hike/Rules.js","mtg/deck.js","pages/hike/RandomTokenModal.js","pages/hike/index.js","components/magic/die/die.js","pages/DebugPage.js","images/contraption-back.jpg","pages/contraptions/ContraptionListModal.js","pages/contraptions/Contraptions.js","App.js","serviceWorker.js","index.js"],"names":["useLocalState","key","defaultValue","useState","stickyValue","window","localStorage","getItem","JSON","parse","value","setValue","useEffect","setItem","stringify","gitInfo","SettingsContext","React","createContext","useSettings","useContext","s","SettingsProvider","children","disclaimerDismissed","setDisclaimerDismissed","displayText","setDisplayText","displayImages","setDisplayImages","devTools","setDevTools","displayGatherer","setDisplayGatherer","hikeMode","setHikeMode","getSetting","useCallback","setting","store","get","setSetting","set","commit","shortHash","Provider","toggleSetting","Home","className","title","rel","href","Button","as","NavLink","exact","to","block","variant","size","hasCustomProperty","property","card","customProperties","find","p","name","ROTATED_LAYOUTS","gathererImageURL","PlanechaseHelmet","planes","sizes","map","id","shuffleArray","array","temporaryValue","randomIndex","currentIndex","length","Math","floor","random","BASE_PLANES","createMarkup","text","replace","_match","p1","toLowerCase","match","p2","p3","CHAOS_TRIGGER_PROP","PHENOMENON_PROP","CHAOSOMENON_PROP","counterProp","type","errataProp","tokenProp","count","urlProp","url","chaosXProp","CHAOS_ONCE_PROP","CHAOS_MAX_PROP","CHAOS_EACH_OP_PROP","CHAOS_PLAYER_CHOICE_PROP","randomTokenProp","symbol","ASSEMBLE_PROP","addAdditionalProperties","properties","Aretopolis","Agyrem","Pramikon","Timesifter","Necropotence","Fatespinner","Scrambleverse","Gamble","Boompile","Mirrorweave","Amplifire","Gerrymandering","Phytohydra","Boomstacker","Chatterstorm","Revitalize","Triskaidekaphobia","Sharktocrab","isEmpty","oracle_text","oracle_html","CUSTOM_CHAOS","type_line","show_blank","BASE_CHAOS","internet","axios","create","filterAPI","pick","getAllPlanechaseCards","a","cached","console","log","response","cache","data","error","getAllArchenemyCards","schemes","getAllContraptionsCards","contraptions","getAllHikeModePlaneCards","hikePlanes","ids","c","fetchAllCards","getAllHikeModeChaosCards","hikeChaos","chunks","chunk","cards","identifiers","post","concat","prefix","time","cacheDate","moment","diff","unix","Loading","label","start","numDots","interval","dotsCount","setDotsCount","dotsInterval","setInterval","clearInterval","dots","getDotString","classes","max","char","repeat","Confirm","onConfirm","triggerButtonParams","triggerText","headerText","bodyText","confirmText","confirmVariant","open","setOpen","close","confirmed","header","Modal","Header","Title","body","Body","show","onHide","animation","contentClassName","Footer","Col","onClick","CounterIcon","style","icon","ms","verticalAlign","Counter","counter","setCounter","getCounterType","CardText","showText","settings","html","card_faces","f","join","Card","Subtitle","Text","dangerouslySetInnerHTML","__html","Plane","listDisplay","displayActions","modalOpen","setModalOpen","fullscreen","setFullscreen","hasCounters","emptyChildren","imageURI","back","toggleModal","isOpen","toggleFullScreen","isFullscreen","renderCardImage","Img","width","src","ListGroup","Item","backdrop","dialogClassName","centered","bg","onDoubleClick","renderImage","ImgOverlay","cn","renderBody","Link","related_uris","target","renderActions","PlanarDie","rollDone","noop","numDice","r","roll","translateRoll","defaultRoll","outline","outlineColor","DoubleFaceIcon","enabled","invert","LoyaltyDownButton","props","LoyaltyUpButton","LoyaltyButtonGroup","upProps","downProps","reverse","ButtonGroup","UnTapButton","TapButton","TapButtonGroup","unTapProps","tapProps","DoubleFaceButton","DoubleFaceHighlightButton","TenthEditionButton","DeckContext","useDeckContext","DeckProvider","deck","setDeck","isInit","setInit","history","setHistory","updateHistory","resetHistory","addCardsToTop","topCards","prevDeck","addCardsToBottom","bottomCards","findCardByDeckCardId","deckCardId","deck_card_id","removeCards","cardsToRemove","filter","reInit","initDeck","reset","clonedCards","uuidv4","newDeck","moveCard","from","splice","drawCard","shift","undoDraw","findCard","findAndPutOnTop","tmpCard","findAndPutOnBottom","revealCards","numReveal","onlyPlanes","revealedCards","min","tmpCount","i","push","search","shuffle","History","CardType","showHistory","setShowHistory","Fade","in","Deck","showDeck","setShowDeck","showDeckImages","setShowDeckImages","context","Fragment","ButtonToolbar","disabled","DevTools","ActionButton","rest","ScryModal","scryCards","onScryTop","onScryBottom","ChaosButton","TripleChaosModal","chaosClick","revealedPlanes","aria-label","GameContext","useGameContext","GameProvider","currentCard","setCurrentCard","setRevealedCards","additionalCards","setAdditionalCards","setScryCards","clearCurrentCard","clearRevealedCards","clearAdditionalCards","clearScryCards","Planechase","loading","setLoading","setPlanes","tripleChaosModalOpen","setTripleChaosModalOpen","scryModalOpen","setScryModalOpen","showPlanarDie","setShowPlanarDie","game","planeswalkDisabled","fetchPlanes","newPlanes","planeswalk","newCard","newRevealedCards","newAdditionalCards","revealedPhenomenon","forEach","undo","lastCard","triggerChaos","shuffledCards","slice","newScryCards","_tripleChaosModalClose","cardType","timeout","Alert","renderTwoPlanes","restCards","setTimeout","selectPlane","renderFivePlanes","bottom","right","face","ArchenemyHelmet","image_uris","Scheme","image","AbandonButton","deckIcon","DeckCardTitle","DECKS","Prebuilts","onSelectDeck","prebuiltItems","prebuilt","cardList","deckname","scheme","clonedCard","getCardList","cardListItems","Badge","pill","Accordion","Toggle","eventKey","Collapse","CustomDeckBuilder","customDeck","setCustomDeck","newCustomDeck","decrementCount","incrementCount","reduce","b","DeckSelect","Archenemy","setSchemes","deckSelection","setDeckSelection","ongoingSchemes","abandonedOngoing","setAbandonedOnGoing","fetchSchemes","newSchemes","renderOngoingSchemes","abandonScheme","newOngoing","newCards","selectDeck","Jumbotron","fluid","Container","renderGamePlay","SYBHelmet","TAGS","defaultEnabled","canAny","canEven","can2Hg","canFreeForAll","canEmperor","canSecretPartner","canRange1","canPentacle","canStar","canOdd","canTeams","FORMATS","initial","tags","players","showSwaps","displayName","HIKE_FORMATS","weight","SOURCE_COLOR","TARGET_COLOR","DEFAULT_TABLE_SHAPE","DEFAULT_LABELS","0","circleLayout","nodeDimensionsIncludeLabels","gridLayout","rows","SYB","playerCount","setPlayerCount","playerTargets","setPlayerTargets","targets","setTargets","labels","setLabels","setTableShape","showTurnEdges","setShowTurnEdges","starTurn","setStarTurn","showScrewEdges","setShowScrewEdges","cySet","setCySet","loadingDirection","setLoadingDirection","cyContainer","useRef","dialog","current","nodes","each","d","currentLabel","playerNumber","split","newLabel","generateEdges","screwEdges","flatMap","player","Array","fill","_","source","turnEdges","starNum","starTurnTarget","normalTurnTarget","regenerateOrder","keys","setLabel","number","bsSize","actions","Dialog","CancelAction","OKAction","prompt","TextPrompt","initialValue","removeListeners","removeListener","isSquare","adjustTargetCount","newPlayerTargets","Row","newPlayerCount","top","left","Spinner","height","layout","elements","edges","stylesheet","square","selector","padding","content","color","opacity","cytoStyle","cy","refreshLayout","debounce","run","nodeClick","e","clickedNode","on","sel","addClass","incomers","allIncomers","union","sources","outgoers","allOutgoers","difference","not","removeClass","handleCy","CytoscapeComponent","normalizeElements","userPanningEnabled","renderCyto","ref","component","FormatsHelmet","handle","dragging","index","restProps","prefixCls","overlay","visible","placement","Handle","createTags","t","createFormats","formats","cloneDeep","Formats","setTags","currentFormats","setCurrentFormats","activeFormat","setActiveFormat","loadingFormat","setLoadingFormat","swapTriggered","setSwapTriggered","getRandomFormat","list","totalWeight","result","cur","randomNum","weightSum","item","enabledTags","FormatToggles","active","uniq","sort","values","includes","tag","activeFormats","every","ActiveFormats","marks","25","50","75","included","onAfterChange","format","updateFormatValue","showDeckswapButton","Disclaimer","onClose","dismissible","Navigation","closeNavbar","Toggler","Dropdown","NavItem","Nav","RRNavLink","activeClassName","Navbar","expand","expanded","Brand","navbar","onToggle","Menu","alignRight","Divider","clear","MtgCard","altBack","displayChildrenBelow","errata","token","phenomenon","chaosomenon","chaosX","Boolean","ReactDOMServer","renderToStaticMarkup","arenaBack","classicBack","isRotated","rotatedLayout","cardStyle","transform","counterStyle","isBlank","blankFront","border_crop","renderCustomText","fontSize","paddingTop","paddingLeft","paddingRight","paddingBottom","mode","marginLeft","hasChildren","hasErrata","hasToken","hasChaosX","hasUrl","isPhenomenon","isChaosomenon","errataHtml","renderAdditionalProps","PLANESWALK_FACE","effect","SQUAK_FACE","CHAOS_FACE","SPROUT_FACE","RERANDOM_FACE","FACES","ALL_FACES","CurrentDie","showAllEffect","die","setDie","regenDie","faces","v","k","createDie","Table","borderless","striped","HikeHelmet","Rules","getOrCreateCurrentDeck","getCurrentDeck","storeCurrentDeck","RandomTokenModal","randomTokenProps","closeText","PRE_CHAOS","customPlanes","customChaos","Hike","setCards","chaosCards","setChaosCards","currentChaosCard","setCurrentChaosCard","setShowAllEffect","showAllCustom","setShowAllCustom","showRules","setShowRules","randomTokenModalOpen","setRandomTokenModalOpen","setRandomTokenProps","fetchCards","hikePLanes","chaos","chaosWalk","tokenCard","getToken","_randomTokenModalClose","sm","Die","sides","initialSide","rolling","setRolling","timeoutId","setFace","lastFace","setLastFace","randomFace","faces2","data-side","clearTimeout","rollTo","data-face","DebugPage","ContraptionListModal","onSelect","setContraptions","setSearch","getContraps","filteredContraps","Form","Control","placeholder","onChange","Contraptions","sprokets","setSprokets","selectContraptionModalOpen","setSelectContraptionModalOpen","currentPlayer","setCurrentPlayer","newSprokets","_hideSelectContraption","Carousel","touch","_v","minHeight","_randomTokenModalOpen","_selectContraptionModalOpen","md","span","offset","Image","contraptionBack","alt","sproket","playerSprokets","filteredSproket","unsproket","Providers","Main","path","render","App","titleTemplate","location","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2aafe35b.chunk.js","sourcesContent":["// Hook\n// https://www.joshwcomeau.com/react/persisting-react-state-in-localstorage/\n// https://usehooks-typescript.com/react-hook/use-local-storage\nimport { useEffect, useState } from \"react\";\n\nexport const useLocalState = (key: string, defaultValue: any) => {\n  const [value, setValue] = useState(() => {\n    const stickyValue = window.localStorage.getItem(key);\n    return stickyValue !== null ? JSON.parse(stickyValue) : defaultValue;\n  });\n\n  useEffect(() => {\n    const stickyValue = window.localStorage.getItem(key);\n    if (stickyValue === null && defaultValue) {\n      setValue(defaultValue);\n    }\n  }, [key, defaultValue]);\n\n  useEffect(() => {\n    const stickyValue = window.localStorage.getItem(key);\n    if (stickyValue !== null) {\n      setValue(JSON.parse(stickyValue));\n    }\n  }, [key]);\n\n  useEffect(() => {\n    window.localStorage.setItem(key, JSON.stringify(value));\n  }, [key, value]);\n\n  return [value, setValue];\n};\n","import React, { useCallback, useContext, useEffect } from \"react\";\nimport GitInfo from \"react-git-info/macro\";\nimport store from \"store/dist/store.modern\";\nimport { useLocalState } from \"../hooks/useLocalState\";\n\nconst gitInfo = GitInfo();\nexport const SettingsContext = React.createContext({});\nexport const useSettings = () => useContext(SettingsContext);\n\nconst s = (key: string) => `setting-${key}`;\n\nexport const SettingsProvider = ({ children }: { children: any }) => {\n  const [disclaimerDismissed, setDisclaimerDismissed] = useLocalState(\n    s(\"disclaimerDismissed\"),\n    false\n  );\n  const [displayText, setDisplayText] = useLocalState(s(\"displayText\"), false);\n  const [displayImages, setDisplayImages] = useLocalState(\n    s(\"displayImages\"),\n    true\n  );\n  const [devTools, setDevTools] = useLocalState(s(\"devTools\"), false);\n  const [displayGatherer, setDisplayGatherer] = useLocalState(\n    s(\"displayGatherer\"),\n    false\n  );\n  const [hikeMode, setHikeMode] = useLocalState(s(\"hike-mode\"), false);\n\n  const getSetting = useCallback((setting: string) => {\n    return store.get(s(setting));\n  }, []);\n\n  const setSetting = useCallback((setting: string, value: any) => {\n    return store.set(s(setting), value);\n  }, []);\n\n  const toggleSetting = (setting: string) => {\n    const value = getSetting(setting);\n    return setSetting(setting, !value);\n  };\n\n  useEffect(() => {\n    const versionCheck = () => {\n      // const version = getSetting(\"version\");\n      // if (version && version !== gitInfo.commit.shortHash) {\n      //   // TODO: Future refine this reset\n      //   store.clearAll();\n      // }\n      setSetting(\"version\", gitInfo.commit.shortHash);\n    };\n\n    versionCheck();\n  }, [getSetting, setSetting]);\n\n  return (\n    <SettingsContext.Provider\n      value={{\n        getSetting,\n        setSetting,\n        toggleSetting,\n        disclaimerDismissed,\n        setDisclaimerDismissed,\n        displayText,\n        setDisplayText,\n        displayImages,\n        setDisplayImages,\n        devTools,\n        setDevTools,\n        displayGatherer,\n        setDisplayGatherer,\n        hikeMode,\n        setHikeMode,\n      }}\n    >\n      {children}\n    </SettingsContext.Provider>\n  );\n};\n","import React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport { NavLink } from \"react-router-dom\";\nimport { Button } from \"react-bootstrap\";\nimport { useSettings } from \"../../hooks/useSettings\";\n\nexport const Home = () => {\n  const { hikeMode } = useSettings();\n  return (\n    <div className=\"home\">\n      <Helmet title=\"Magic\">\n        <link rel=\"manifest\" href={process.env.PUBLIC_URL + \"/manifest.json\"} />\n      </Helmet>\n      <div className=\"mt-4\">\n        <Button\n          as={NavLink}\n          exact\n          to=\"/planechase\"\n          block\n          variant=\"info\"\n          size=\"lg\"\n        >\n          <i className=\"ms ms-planeswalker ms-4x mx-2 d-block\" />\n          <span className=\"d-block\">Planechase</span>\n        </Button>\n        <Button\n          as={NavLink}\n          exact\n          to=\"/archenemy\"\n          block\n          variant=\"danger\"\n          size=\"lg\"\n        >\n          <i className=\"ss ss-arc ss-3x mx-2 d-block\" />\n          <span className=\"d-block\">Archenemy</span>\n        </Button>\n        <Button as={NavLink} exact to=\"/syb\" block variant=\"success\" size=\"lg\">\n          <i className=\"ss ss-s00 ss-3x mx-2 d-block\" />\n          <span className=\"d-block\">SYB</span>\n        </Button>\n        <Button\n          as={NavLink}\n          exact\n          to=\"/formats\"\n          block\n          variant=\"primary\"\n          size=\"lg\"\n        >\n          <i className=\"ss ss-evg ss-3x mx-2 d-block\" />\n          <span className=\"d-block\">Formats</span>\n        </Button>\n        <Button\n          as={NavLink}\n          exact\n          to=\"/contraptions\"\n          block\n          variant=\"secondary\"\n          size=\"lg\"\n        >\n          <i className=\"ss ss-ust ss-3x mx-2 d-block\" />\n          <span className=\"d-block\">Contraptions</span>\n        </Button>\n        {hikeMode && (\n          <Button\n            as={NavLink}\n            exact\n            to=\"/hike\"\n            block\n            variant=\"warning\"\n            size=\"lg\"\n          >\n            <i className=\"ss ss-h17 ss-3x mx-2 d-block\" />\n            <span className=\"d-block\">Hike Mode</span>\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n};\n","import get from \"lodash/get\";\n\nexport const hasCustomProperty = (property, card) => {\n  return card && card?.customProperties?.find((p) => p.name === property);\n};\n\nexport const getCounterType = (card) => {\n  const property = card?.customProperties?.find((p) => p.name === \"counter\");\n  return property?.type;\n};\n\nconst ROTATED_LAYOUTS = [\"planar\", \"split\"];\nexport const rotatedLayout = (card) => ROTATED_LAYOUTS.includes(card?.layout);\n\nexport const gathererImageURL = (card) => {\n  return `https://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=${get(\n    card,\n    \"multiverse_ids[0]\"\n  )}&type=card`;\n};\n","import React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport { gathererImageURL } from \"../../mtg/card.js\";\n\nexport const PlanechaseHelmet = ({ planes }) => {\n  return (\n    <Helmet title=\"Planechase\">\n      <link\n        rel=\"shortcut icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase.ico\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase_256.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"64x64\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase_64.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"128x128\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase_128.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"256x256\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase_256.png\"}\n      />\n      <link\n        rel=\"manifest\"\n        href={process.env.PUBLIC_URL + \"/planechase-manifest.json\"}\n      />\n      {planes &&\n        planes.map((p) => (\n          <link\n            rel=\"preload\"\n            href={gathererImageURL(p)}\n            as=\"image\"\n            key={p.id}\n          />\n        ))}\n    </Helmet>\n  );\n};\n","export const shuffleArray = (array) => {\n  let currentIndex = array.length,\n    temporaryValue,\n    randomIndex;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n};\n","export const CUSTOM_PLANES = [\n  {\n    name: \"Hike Clash\",\n    type_line: \"Plane - Hike\",\n    oracle_text:\n      'All spells gain \"Clash with an opponent. If you win gain 5 life, draw a card, and create a 1/1 red Hikespawn creature token',\n    show_blank: true,\n  },\n  {\n    name: \"Hike Wall\",\n    type_line: \"Plane - Hike\",\n    oracle_text:\n      \"Creatures with defender can attack as though they didn't have it, creatures without defender can't attack. All creatures assign combat damage based on their toughness.\",\n    show_blank: true,\n  },\n  {\n    name: \"Nopalescence\",\n    type_line: \"Plane - Hike\",\n    oracle_text:\n      \"All noncreature artifacts, planeswalkers, and enchantments lose all abilities and become X/X creatures where X is their mana value.\",\n    show_blank: true,\n  },\n];\n\n// Curated and Truncated Scryfall API Results\nexport const BASE_PLANES = [\n  {\n    name: \"Hive Mind\",\n    id: \"88d50518-5cfc-45de-a125-acabf97b8743\",\n  },\n  {\n    name: \"Eye of the Storm\",\n    id: \"49967eb9-5020-4f0a-8775-5114f6d96d75\",\n  },\n  {\n    name: \"Possibility Storm\",\n    id: \"858aa831-b491-4f1e-bb56-33eeca14771d\",\n  },\n  {\n    name: \"Conjured Currency\",\n    id: \"a7c2ea6e-7d29-4526-b135-9bbb1eed9d4a\",\n  },\n  {\n    name: \"Confusion in the Ranks\",\n    id: \"9d46aca2-4714-4d2c-9466-5f1c043b8726\",\n  },\n  {\n    name: \"Endless Whispers\",\n    id: \"266323da-9528-462e-a0a8-6ef2dda5f1ee\",\n  },\n  {\n    name: \"Chaos Moon\",\n    id: \"aae0543f-7f8b-4327-b735-ac21244e9936\",\n  },\n  {\n    name: \"Grip of Chaos\",\n    id: \"defbbd3a-0e7d-4af2-b25f-9003ddad0bf5\",\n  },\n  {\n    name: \"Shared Fate\",\n    id: \"ad0d5b02-ef38-4dab-8ac6-78814ef27b55\",\n  },\n  {\n    name: \"Glimmervoid Basin\",\n    id: \"56a1afab-782c-4f31-96f5-17b676852fea\",\n  },\n  {\n    name: \"Omen Machine\",\n    id: \"0ff4e35f-2a82-4d3c-86c5-ae05a5abc4d7\",\n  },\n  {\n    name: \"Timesifter\",\n    id: \"561cab0e-8874-4534-bf79-0c1488a9f0a5\",\n  },\n  {\n    name: \"Teferi's Puzzle Box\",\n    id: \"415e81e9-ca65-4bc0-8aab-d905d58fe6cc\",\n  },\n  {\n    name: \"Teferi's Realm\",\n    id: \"aba3e4ea-2241-4f1e-a46b-70f512fe729e\",\n  },\n  {\n    name: \"High Troller\",\n    id: \"2604a596-fffb-4066-8906-896173de8c27\",\n  },\n  {\n    name: \"Thousand-Year Storm\",\n    id: \"270a0863-7d07-43f0-925d-a8ce0383a1cb\",\n  },\n  {\n    name: \"Free-for-All\",\n    id: \"630efac8-3033-4c2d-9127-b3b2f78bb136\",\n  },\n  {\n    name: \"Seek Bolas's Counsel\",\n    id: \"b53c9857-3cad-4b61-bfaa-5de2d44dfbc4\",\n  },\n  {\n    name: \"Impulsive Maneuvers\",\n    id: \"d9b404c0-9ce1-4491-82fd-6dba7e6895cd\",\n  },\n  {\n    name: \"Krark, the Thumbless\",\n    id: \"06a981cd-1951-438e-95c9-68294795638e\",\n  },\n  {\n    name: \"Mirror March\",\n    id: \"50a27943-f08c-4cbd-affb-8e59411b3d4f\",\n  },\n  {\n    name: \"Tide of War\",\n    id: \"43b5bd60-87ed-41d2-bbcb-bd4a40a772c9\",\n  },\n  {\n    name: \"Grand Melee\",\n    id: \"9a0d3142-4224-4b51-885d-33c8938418c1\",\n  },\n  {\n    name: \"Wild Evocation\",\n    id: \"b39aea56-5c56-4241-81c9-928c3253d7c9\",\n  },\n  {\n    name: \"Angel's Trumpet\",\n    id: \"0c7b248a-3c74-4592-b357-47989568298c\",\n  },\n  {\n    name: \"Fatespinner\",\n    id: \"5780f4e0-dcfb-4d1f-8ae1-762b98970abb\",\n  },\n  {\n    name: \"Maelstrom Nexus\",\n    id: \"e514b13d-2d22-4d9e-a501-b0667f02edac\",\n  },\n  {\n    name: \"Topsy Turvy\",\n    id: \"aadf253a-eca6-405d-8216-a362854b4ae1\",\n  },\n  {\n    name: \"Pramikon, Sky Rampart\",\n    id: \"8569ad47-a243-402d-899f-4e6b17ea4e1e\",\n  },\n  {\n    name: \"Forced Fruition\",\n    id: \"f7ea1c6e-c0af-40b0-b492-8d71f496903e\",\n  },\n  {\n    name: \"Psychic Vortex\",\n    id: \"3bc2a419-7122-4eeb-bb64-738a647cfd82\",\n  },\n  {\n    name: \"Frankie Peanuts\",\n    id: \"440c3e8b-d9c6-46cd-9f39-86db077fb89d\",\n  },\n  {\n    name: \"Tombstone Stairwell\",\n    id: \"f8fe2f99-7ec2-490c-8ec3-aa2fb4680826\",\n  },\n  {\n    name: \"Mana Abundance\",\n    id: \"a83c165f-a78b-4a89-b868-8128376ff718\",\n  },\n  {\n    name: \"Problematic Volcano\",\n    id: \"9a274ebf-15c5-4db9-9987-3e3f92f41d47\",\n  },\n  {\n    name: \"Queue of Beetles\",\n    id: \"3df35f1b-c19c-4faf-81f6-0ffd47054446\",\n  },\n  {\n    name: \"Siege Elemental\",\n    id: \"8ede410c-8ddc-4658-85a6-9a99df9d655f\",\n  },\n  {\n    name: \"Pandemonium\",\n    id: \"c54cc43c-8c06-4c23-8021-94689eeb4ad4\",\n  },\n  {\n    name: \"Naar Isle\",\n    id: \"f63b82f9-ebc4-465c-b25e-5ee710525143\",\n  },\n  {\n    name: \"Agyrem\",\n    id: \"6caf8b21-1807-442c-a461-c89c7591df70\",\n  },\n  {\n    name: \"Kharasha Foothills\",\n    id: \"0f05d1ae-d70b-474c-93fc-a5d2e3ac6b64\",\n  },\n  {\n    name: \"Mesmeric Orb\",\n    id: \"e24fbdbb-f2ae-4823-9d2a-4c505332aa5b\",\n  },\n  {\n    name: \"The Countdown Is at One\",\n    id: \"4afb8115-3a47-4d7e-a3ed-b2e81ca27255\",\n  },\n  {\n    name: \"Earl of Squirrel\",\n    id: \"c3bbf567-bdb4-4f88-906c-eb1503c02d9f\",\n  },\n  {\n    name: \"Staying Power\",\n    id: \"924127a5-a364-489a-804f-a4f4174064ae\",\n  },\n  {\n    name: \"Zzzyxas's Abyss\",\n    id: \"d1ead203-b976-46d7-81c7-86ada091a4ec\",\n  },\n  {\n    name: \"Yet Another Aether Vortex\",\n    id: \"e731ba8c-e909-4053-84ae-0793a7319540\",\n  },\n  {\n    name: \"Enter the Dungeon\",\n    id: \"d696f3a6-88c3-4aab-9c1f-05b5e36094fa\",\n  },\n  {\n    name: \"Ghosts of the Innocent\",\n    id: \"c5b10c5f-261f-4301-b675-d1f52b859360\",\n  },\n  {\n    name: \"Impatience\",\n    id: \"11443908-358f-4886-a2da-9b98002a3a3a\",\n  },\n  {\n    name: \"Lantern of Undersight\",\n    id: \"58080146-9cbb-4872-a348-8fe85848eba1\",\n  },\n  {\n    name: \"Netherese Puzzle-Ward\",\n    id: \"fdc7aeed-ce95-4fc6-b7ef-0697f850fa90\",\n  },\n  {\n    name: \"Risky Move\",\n    id: \"0b09315c-d6ff-4fdb-8774-c6402b45e959\",\n  },\n  {\n    name: \"Concerted Effort\",\n    id: \"4afa3367-eb7e-4c92-96a1-2b6865b24f52\",\n  },\n  {\n    name: \"Hellraiser Goblin\",\n    id: \"c6d4ab45-ab42-4144-9c57-ba046b76860c\",\n  },\n  {\n    name: \"Knowledge Pool\",\n    id: \"393454c2-b256-4a6e-9bc2-56a47cab5073\",\n  },\n  {\n    name: \"Horobi, Death's Wail\",\n    id: \"b41983cb-c4e4-4384-bd69-df3fc6e74cd0\",\n  },\n  {\n    name: \"Infinite Hourglass\",\n    id: \"fbafc838-7458-4542-86f3-594326ec0691\",\n  },\n  {\n    name: \"Tempting Contract\",\n    id: \"a971b3d5-9a78-437f-a385-3390e64c53de\",\n  },\n  {\n    name: \"Pendrell Mists\",\n    id: \"b902b972-3a93-4e4e-aa77-02ada81e6b95\",\n  },\n  {\n    name: \"Necropotence\",\n    id: \"70511f69-8615-4e45-bd4e-76acfe9e4278\",\n  },\n  {\n    name: \"Furnace of Rath\",\n    id: \"d7f0e720-3c32-4040-b663-7f99ad5bc810\",\n  },\n  {\n    name: \"Overgrown Estate\",\n    id: \"c1c48c58-3532-4022-9eec-1a870385cbf3\",\n  },\n  {\n    name: \"Swirl the Mists\",\n    id: \"2ea50e09-4ab3-439e-83d7-d584f8af8f16\",\n  },\n  {\n    name: \"Dream Halls\",\n    id: \"2c6606d1-619f-4cc9-8d5b-771c4b4d9615\",\n  },\n  {\n    name: \"Rooftop Storm\",\n    id: \"ab01d871-ba50-400a-95e7-09af9e34405f\",\n  },\n  {\n    name: \"Life and Limb\",\n    id: \"2721724d-92ae-4c0c-88dd-628888c468bf\",\n  },\n  {\n    name: \"Camouflage\",\n    id: \"2f55ff95-32a3-43ba-82e5-a5a3bc2cc9e5\",\n  },\n  {\n    name: \"Ricochet\",\n    id: \"ea993e57-b72f-48f8-9132-0693f2e78ce4\",\n  },\n  {\n    name: \"Humility\",\n    id: \"55ad6a45-a840-45ba-89ad-066e20e983f3\",\n  },\n  {\n    name: \"Chaosphere\",\n    id: \"bd41cb92-578b-4fc8-b1e6-56604088fcd5\",\n  },\n  {\n    name: \"Grazilaxx, Illithid Scholar\",\n    id: \"5480d92e-5c03-49b8-8bdd-fbcce80de998\",\n  },\n  {\n    name: \"Goblin Grappler\",\n    id: \"5c948872-295c-41b9-8094-db7db7578b0d\",\n  },\n  {\n    name: \"Spore Frog\",\n    id: \"6d42fd52-34ea-4d1b-80dc-58fb0593bb5b\",\n  },\n  {\n    name: \"Shoving Match\",\n    id: \"aa9f4787-9b29-4f57-b105-1f9eb4bb8861\",\n  },\n  {\n    name: \"Naked Singularity\",\n    id: \"5edddcbb-0e01-4473-b7a8-1e59cf7ee506\",\n  },\n  {\n    name: \"Marchesa, the Black Rose\",\n    id: \"ca6cf5ba-0bad-4f7d-83b9-c092c2586131\",\n  },\n];\n","export const createMarkup = (text) => {\n  if (!text) {\n    return text;\n  }\n\n  // Symbols\n  text = text.replace(/{PW}/g, '<i class=\"ms ms-planeswalker\"></i>');\n  text = text.replace(/{CHAOS}/g, '<i class=\"ms ms-chaos\"></i>');\n  text = text.replace(/CHAOS/g, '<i class=\"ms ms-chaos\"></i>');\n  text = text.replace(/{A}/g, '<i class=\"ms ms-acorn\"></i>');\n  text = text.replace(/{E}/g, '<i class=\"ms ms-e\"></i>');\n  text = text.replace(/\\{T\\}/g, '<i class=\"ms ms-tap\"></i>');\n  text = text.replace(/\\{Q\\}/g, '<i class=\"ms ms-untap\"></i>');\n\n  // Generic Cost\n  text = text.replace(\n    /{([WUBRGSCPXYZ])}/g,\n    (_match, p1) => `<i class=\"ms ms-${p1.toLowerCase()} ms-cost\"></i>`\n  );\n\n  // Numbered Mana\n  text = text.replace(/\\{½\\}/g, '<i class=\"ms ms-1-2 ms-cost\"></i>');\n  text = text.replace(/\\{∞\\}/g, '<i class=\"ms ms-infinity ms-cost\"></i>');\n  text = text.replace(/\\{([0-9]+?)\\}/g, (match, p1) =>\n    p1 <= 20 || p1 === \"100\" || p1 === \"\"\n      ? `<i class=\"ms ms-${p1} ms-cost\"></i>`\n      : match\n  );\n  text = text.replace(/\\{([0-9]+?)\\}/g, (match, p1) =>\n    p1 <= 20 || p1 === \"100\" || p1 === \"1000000\"\n      ? `<i class=\"ms ms-${p1} ms-cost\"></i>`\n      : match\n  );\n\n  // Split Mana\n  text = text.replace(\n    /{([WUBRG2])\\/([WUBRG])}/g,\n    (_match, p1, p2) =>\n      `<i class=\"ms ms-${p1.toLowerCase()}${p2.toLowerCase()} ms-cost\"></i>`\n  );\n\n  // Phrexian\n  text = text.replace(\n    /{([WUBRG])\\/P}/g,\n    (_match, p1) => `<i class=\"ms ms-${p1.toLowerCase()} ms-p ms-cost\"></i>`\n  );\n\n  // Half Mana\n  text = text.replace(\n    /{H([WUBRG])}/g,\n    (match, p1) => `<i class=\"ms ms-${p1.toLowerCase()} ms-half ms-cost\"></i>`\n  );\n\n  // Special\n  text = text.replace(\n    /{(ability|clan|counter|guild|polis|school)-(.+?)}/g,\n    `<i class=\"ms ms-$1-$2\"></i>`\n  );\n\n  // Text\n\n  // TODO: Can add \\d but 1/1 looks weird need bigger /\n  text = text.replace(\n    /([XYZ])\\/([XYZ])/g,\n    (_match, p1, p2) =>\n      `<i class=\"ms ms-${p2.toLowerCase()}\"></i>/<i class=\"ms ms-${p2.toLowerCase()}\"></i>`\n  );\n\n  text = text.replace(\n    /(\\s)([XZY])(\\s)/g,\n    (_match, p1, p2, p3) =>\n      `${p1}<i class=\"ms ms-${p2.toLowerCase()}\"></i>${p3}`\n  );\n\n  text = text.replace(/\\r\\n/g, \"<br />\").replace(/[\\r\\n]/g, \"<br />\");\n  text = text.replace(/\\((.+?)\\)/g, \"<small><em>($1)</em></small>\");\n\n  return text;\n};\n\nexport const MARKUP_TEXT = `\n{W}\n{U}\n{B}\n{R}\n{G}\n{C}\n{S}\n{1}\n{2}\n{3}\n{4}\n{5}\n{6}\n{7}\n{8}\n{9}\n{10}\n{11}\n{12}\n{13}\n{14}\n{15}\n{16}\n{17}\n{18}\n{19}\n{20}\n{100}\n{1000000}\n{∞}\n{X}\n{Y}\n{Z}\n\n(Invalid)\n{99}\n\n(Split)\n{W/U}\n{W/B}\n{B/R}\n{B/G}\n{U/B}\n{U/R}\n{R/G}\n{R/W}\n{G/W}\n{G/U}\n{2/W}\n{2/U}\n{2/B}\n{2/R}\n{2/G}\n\n(Phrexian)\n{P}\n{W/P}\n{U/P}\n{B/P}\n{R/P}\n{G/P}\n\n(Half)\n{HW}\n{HU}\n{HB}\n{HR}\n{HG}\n\n(Numbers)\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n100\n1000000\nX\n\nY\n\nZ\n\nX | Y | Z\n\n\n{o1}\n\n1/1\n2/2\nX/X\nY/Y\nZ/Z\nX/Z\nX/Y\n\n(Symbols)\n{PW}\n{CHAOS}\nCHAOS\n{A}\n{T}\n{Q}\n\nXylophone\nYeti\nZebra\neXtra\ntrY\nbeZor\nthis is CHAOS but not chaos\ncosts X to cast\ncosts Y to cast\ncosts Z to cast\n\n(abilities)\n{ability-hexproof-blue}\n{ability-ward}\n\n(clan)\n{clan-atarka}\n\n(counter)\n{counter-brick}\n\n(guild)\n{guild-simic}\n\n(poleis)\n{polis-setessa}\n\n(school)\n{school-lorehold}\n`;\n","import isEmpty from \"lodash/isEmpty\";\nimport { createMarkup } from \"./createMarkup\";\n\nexport const CHAOS_TRIGGER_PROP = { name: \"chaos-trigger\" };\nexport const PHENOMENON_PROP = { name: \"phenomenon\" };\nexport const CHAOSOMENON_PROP = { name: \"chaosomenon\" };\nexport const counterProp = (type) => {\n  return { name: \"counter\", type };\n};\nexport const errataProp = (text) => {\n  return { name: \"errata\", text };\n};\nexport const tokenProp = (count) => {\n  return { name: \"token\", count };\n};\n\nexport const urlProp = ({ url, text }) => {\n  return { name: \"url\", url, text };\n};\n\nexport const chaosXProp = (text) => {\n  return { name: \"chaos_x\", text };\n};\n\nexport const CHAOS_ONCE_PROP = chaosXProp(\"Once\");\nexport const CHAOS_MAX_PROP = chaosXProp(\"Max\");\nexport const CHAOS_EACH_OP_PROP = chaosXProp(\"Each Opponent\");\nexport const CHAOS_PLAYER_CHOICE_PROP = chaosXProp(\"Player's Choice\");\n\nexport const randomTokenProp = ({ url, symbol, text }) => {\n  return { name: \"random-token\", url, symbol, text };\n};\n\nexport const ASSEMBLE_PROP = randomTokenProp({\n  text: \"Assemble Contraption\",\n  symbol: \"ss ss-ust ss-rare ss-grad ss-2x mx-1 mx-md-4\",\n  url: \"https://api.scryfall.com/cards/random?q=t%3Acontraption%20include%3Aextras\",\n});\n\nexport const addAdditionalProperties = (card) => {\n  const properties = {\n    Aretopolis: [counterProp(\"Scroll\")],\n    \"Chaotic Aether\": [{ name: \"all-chaos\" }],\n    \"Interplanar Tunnel\": [{ name: \"top-5\" }],\n    \"Kilnspire District\": [counterProp(\"Charge\")],\n    \"Mount Keralia\": [counterProp(\"Pressure\")],\n    \"Naar Isle\": [counterProp(\"Flame\")],\n    \"Spatial Merging\": [{ name: \"two-planes\" }],\n    \"Stairs to Infinity\": [CHAOS_TRIGGER_PROP, { name: \"scry-1\" }],\n    \"Pools of Becoming\": [CHAOS_TRIGGER_PROP, { name: \"triple-chaos\" }],\n    // Archenemy\n    \"Your Inescapable Doom\": [{ name: \"unabandonable\" }, counterProp(\"Doom\")],\n    // Hike Mode\n    Agyrem: [\n      errataProp(\n        \"When you planeswalk to or at the beginning of your upkeep, choose a color at random (replacing White).\"\n      ),\n    ],\n    \"Earl of Squirrel\": [\n      errataProp(\n        \"All creature tokens are Squirrels in addition to their other types.\\n All Squirrels get +1/+1\\n All nontoken creatures gain Squirrellink (Whenever they deal damage, create that many 1/1 green Squirrel tokens)\"\n      ),\n    ],\n    Pramikon: [\n      errataProp(\n        \"When you planeswalk to Pramikon, choose a SYB pattern at random based on the numbers in play. For as long as you remain on Pramikon, players can only attack in the screwing direction.\\nWhen a player loses, reselect a screwing pattern with the remaining number of players.\"\n      ),\n    ],\n    \"Problematic Volcano\": [\n      errataProp(\n        \"When you planeswalk to Problematic Volcano or at the beginning of your upkeep, deal 4 damage to any target chosen at random.\\n Then if you planeswalked to Problematic Volcano, starting with you, each player assigns their creatures to the left or right of the volcano.\\nCreatures enter the battlefield to the left or right of the volcano.\\nCreatures can't block creatures on the other side of the volcano.\"\n      ),\n    ],\n    \"Omen Machine\": [\n      errataProp(\n        \"Players can't draw cards.\\nWhen you planeswalk to Omen machine and at the beginning of your upkeep, exile the top card of your library. If it's a land, put it onto the battlefield. Otherwise, cast it without paying its mana cost if able\"\n      ),\n    ],\n    Timesifter: [\n      errataProp(\n        \"When you planeswalk to Timesifter and at the beginning of each upkeep, each player exiles the top card of their library. The player who exiled the card with the highest mana value takes an extra turn after this one. If two or more players' cards are tied for highest, the tied players repeat this process until the tie is broken.\"\n      ),\n    ],\n    \"Teferi's Puzzle Box\": [\n      errataProp(\n        \"When you planeswalk to Teferi's Puzzle Box and at the beginning of your draw step, put the cards from your hand onto the bottom of your library, then draw that many cards.\"\n      ),\n    ],\n    \"Goblin Grappler\": [\n      errataProp(\"All creatures gain Provoke\"),\n      urlProp({\n        text: \"GET OVER HERE\",\n        url: \"https://www.youtube.com/watch?v=3C3poU_0sK4\",\n      }),\n    ],\n    \"Swirl the Mists\": [\n      errataProp(\n        \"When you planeswalk to Swirl the Mists, choose a color word and a basic land type at random.  All instances of color words in the text of spells and permanents are changed to the chosen color word. All instances of basic land types are replaced with the chosen basic land type\"\n      ),\n    ],\n    \"Teferi's Realm\": [\n      errataProp(\n        \"When you planeswalk to Teferi's Realm and at the beginning of your upkeep, choose artifact, creature, land, or non-Aura enchantment. All nontoken permanents of that type phase out.\"\n      ),\n    ],\n    \"The Countdown Is at One\": [PHENOMENON_PROP],\n    \"Enter the Dungeon\": [PHENOMENON_PROP],\n    Necropotence: [\n      errataProp(\n        \"Players skip their draw step.\\n Whenever a player discards a card, exile that card from their graveyard.\\n All players have: 'Pay 1 life to exile the top card of your library face down, and then put it into your hand at the beginning of your next end step.\"\n      ),\n    ],\n    \"Psychic Vortex\": [\n      errataProp(\n        \"When you planeswalk to or at the beginning of your upkeep, put a fun counter on Psychic Vortex, then draw a card for each fun counter on it. At the beginning of your end step, discard your hand and sacrifice a land.\"\n      ),\n      counterProp(\"Fun\"),\n    ],\n    \"Mirror March\": [errataProp(\"All Players\")],\n    \"Wild Evocation\": [\n      errataProp(\n        \"When you planeswalk to Wild Evocation and at the beginning of your upkeep, reveal a card at random from your hand. If it's a land, put it onto the battlefield. Otherwise, cast it without paying its mana cost if able\"\n      ),\n    ],\n    Fatespinner: [\n      errataProp(\n        \"At the beginning of each player's upkeep, they choose draw step, main phase, or combat phase. The player skips each instance of the chosen step or phase this turn.\"\n      ),\n    ],\n    \"Forced Fruition\": [\n      errataProp(\"Whenever a player casts a spell, they draw 7 cards.\"),\n    ],\n    \"Frankie Peanuts\": [\n      errataProp(\n        \"When you planeswalk to Frankie Peanuts and at the beginning of your upkeep, ask target opponent a yes or no question. That player must answer truthfully and abide by their answer for as long as you remain on Frankie Peanuts\"\n      ),\n    ],\n    \"Maelstrom Nexus\": [\n      errataProp(\n        \"Whenever a player casts a spell from their hand, it gains cascade.\"\n      ),\n    ],\n    \"Tombstone Stairwell\": [\n      errataProp(\n        \"When you planeswalk to Tombstone Stairwell and at the beginning of each upkeep, each player creates a 2/2 black Zombie creature token with haste named Tombspawn for each creature card in their graveyard.\\nAt the beginning of each end step or if you planeswalk away from Tombstone Stairwell, destroy all tokens created with Tombstone Stairwell. They can't be regenerated.\"\n      ),\n    ],\n    \"Seek Bolas's Counsel\": [\n      errataProp(\n        \"When you planeswalk to or at the beginning of your upkeep, Seek Bola's Counsel choosing a mode at random.\"\n      ),\n    ],\n    \"Thousand-Year Storm\": [\n      errataProp(\n        \"Whenever any player casts an instant or sorcery spell, they copy it for each instant or sorcery spell cast before it this turn.\"\n      ),\n    ],\n    \"Free-for-All\": [\n      errataProp(\n        \"When you planeswalk to Free-For-All, exile all creatures AND PLANESWALKERS face down. The active player chooses one card at random from what they exiled and puts it into play.\\nAt the beginning of each player's upkeep, that player chooses a card exiled with Free-for-All at random and puts it onto the battlefield.\\nWhen you planeswalk away from Free-For-All, put all cards exiled with it into their owners' graveyards.\"\n      ),\n    ],\n    \"Chaos Moon\": [\n      errataProp(\n        \"When you planeswalk to Chaos Moon and at the beginning of each upkeep, select a color at random then count the number of permanents in play. If the number is odd, all creatures of the chosen color get +1/+1 and whenever a permanent is tapped for mana of the chosen color add one additional mana of that type. If even, creatures of the chosen color get -1/-1 and whenever a permanent is tapped for mana of the chosen color, add {C}\"\n      ),\n    ],\n    \"Conjured Currency\": [\n      errataProp(\n        \"When you planeswalker to and at the beginning of your upkeep, exchange control of a permanent you own and control and target permanent you neither own nor control.\"\n      ),\n    ],\n    \"Rooftop Storm\": [\n      errataProp(\n        \"When you planeswalk to Rooftop Storm and at the beginning of each upkeep, choose a creature type. Creature spells you cast of the chosen type cost 0 until end of turn.\"\n      ),\n    ],\n    \"Warp World\": [CHAOSOMENON_PROP, CHAOS_ONCE_PROP],\n    \"Thieves' Auction\": [CHAOSOMENON_PROP, CHAOS_ONCE_PROP],\n    Scrambleverse: [CHAOSOMENON_PROP, CHAOS_ONCE_PROP],\n    \"Wrath of God\": [CHAOSOMENON_PROP, CHAOS_ONCE_PROP],\n    \"Wheel of Fortune\": [CHAOS_PLAYER_CHOICE_PROP],\n    Gamble: [CHAOS_PLAYER_CHOICE_PROP],\n    \"Last One Standing\": [CHAOSOMENON_PROP, CHAOS_ONCE_PROP],\n    \"Raving Dead\": [CHAOS_MAX_PROP],\n    \"Crack the Earth\": [CHAOS_MAX_PROP],\n    \"Whims of the Fates\": [CHAOS_ONCE_PROP],\n    \"Life and Limb\": [\n      errataProp(\n        \"Plains - Citizen\\n Island - Camarid\\n Swamp - Minion\\n Mountain - Dwarf\\n Forest - Squirrel\"\n      ),\n    ],\n    Boompile: [\n      errataProp(\n        \"Flip a coin. If you win the flip, destroy all nonland permanents then Chaos Hike away.\"\n      ),\n      CHAOSOMENON_PROP,\n      CHAOS_ONCE_PROP,\n    ],\n    \"Tyrant of Discord\": [\n      errataProp(\n        \"Target opponent chooses a permanent they control at random and sacrifices it. If a nonland permanent is sacrificed this way, repeat this process.\"\n      ),\n      CHAOS_PLAYER_CHOICE_PROP,\n    ],\n    \"Marchesa, the Black Rose\": [\n      errataProp(\n        \"All Creatures Gain Dethrone\\n Whenever a creature with a +1/+1 counter on it dies return that card to the battlefield under its owner's control at the beginning of the next end step.\"\n      ),\n    ],\n    \"Fiery Gambit\": [CHAOS_ONCE_PROP],\n    \"Game of Chaos\": [CHAOS_EACH_OP_PROP],\n    \"Mana Clash\": [CHAOS_EACH_OP_PROP],\n    \"Puppet's Verdict\": [CHAOS_ONCE_PROP],\n    \"Order of Succession\": [CHAOS_MAX_PROP],\n    \"Rakdos, the Showstopper\": [\n      errataProp(\n        \"Flip a coin for each creature that isn't a Demon, Devil, or Imp. Destroy each creature whose coin comes up tails.\"\n      ),\n      CHAOSOMENON_PROP,\n      CHAOS_ONCE_PROP,\n    ],\n    Mirrorweave: [\n      errataProp(\n        \"Each other creature permanently becomes a copy of target nonlegendary creature.\"\n      ),\n      CHAOS_ONCE_PROP,\n    ],\n    \"Dimensional Breach\": [CHAOSOMENON_PROP, CHAOS_ONCE_PROP],\n    \"Perplexing Chimera\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Aeon Engine\": [\n      errataProp(\"Reverse the game's turn order\"),\n      CHAOS_ONCE_PROP,\n    ],\n    \"Sphinx Ambassador\": [\n      errataProp(\n        \"Choose an opponent.  Search that player's library for a card, then that player chooses a card name. If you searched for a creature card that doesn't have that name, you may put it onto the battlefield under your control. Then that player shuffles.\"\n      ),\n      CHAOS_PLAYER_CHOICE_PROP,\n    ],\n    \"Aminatou, the Fateshifter\": [\n      errataProp(\n        \"Choose left or right at random. Each player gains control of all non-land permanents controlled by the next player in the chosen direction.\"\n      ),\n      CHAOS_MAX_PROP,\n    ],\n    \"Choice of Damnations\": [CHAOS_EACH_OP_PROP],\n    \"Nascent Metamorph\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Pain's Reward\": [CHAOS_ONCE_PROP],\n    Amplifire: [tokenProp(1), CHAOS_MAX_PROP],\n    \"Akroan Horse\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Walking Archive\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Vulshok Sorcerer\": [tokenProp(3), CHAOS_MAX_PROP],\n    \"Serrated Arrows\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Interplanar Brushwagg\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Illicit Auction\": [CHAOS_MAX_PROP],\n    \"Oddly Uneven\": [\n      errataProp(\n        \"Flip a coin. If heads, destroy each creature with an odd number of words in its name. If tails, Destroy each creature with an even number of words in its name\"\n      ),\n      CHAOS_ONCE_PROP,\n    ],\n    Gerrymandering: [CHAOS_PLAYER_CHOICE_PROP],\n    \"Naughty // Nice\": [errataProp(\"Both sides\"), CHAOS_MAX_PROP],\n    \"Norin the Wary\": [errataProp(\"Conjure a Norin the Wary\"), CHAOS_MAX_PROP],\n    \"Wrath of Sod\": [CHAOSOMENON_PROP, CHAOS_ONCE_PROP],\n    \"Haphazard Bombardment\": [\n      errataProp(\"When you roll chaos, destroy a permanent at random\"),\n      CHAOS_MAX_PROP,\n    ],\n    \"Evil Presents\": [\n      errataProp(\n        \"Put a creature card from your hand into play under target opponent’s control. That creature is goaded\"\n      ),\n      CHAOS_PLAYER_CHOICE_PROP,\n    ],\n    \"Gifts Given\": [CHAOS_EACH_OP_PROP],\n    \"Season's Beatings\": [CHAOS_EACH_OP_PROP],\n    \"Present Arms\": [CHAOS_ONCE_PROP],\n    \"Stuffy Doll\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Tempting Wurm\": [tokenProp(1), CHAOS_MAX_PROP],\n    Phytohydra: [tokenProp(1), CHAOS_MAX_PROP],\n    \"Nyx-Fleece Ram\": [tokenProp(1), CHAOS_MAX_PROP],\n    Boomstacker: [tokenProp(1), CHAOS_MAX_PROP],\n    \"Goldenglow Moth\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Karplusan Minotaur\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Goblin Festival\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Goblin Traprunner\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Stitch in Time\": [CHAOS_MAX_PROP, CHAOS_MAX_PROP],\n    \"You Meet in a Tavern\": [CHAOS_PLAYER_CHOICE_PROP],\n    \"Tavern Swindler\": [tokenProp(1)],\n    \"Mass Mutiny\": [CHAOS_PLAYER_CHOICE_PROP],\n    Chatterstorm: [CHAOS_MAX_PROP],\n    Revitalize: [CHAOS_PLAYER_CHOICE_PROP],\n    \"Through the Breach\": [CHAOS_PLAYER_CHOICE_PROP],\n    \"Urza, Academy Headmaster\": [\n      tokenProp(1),\n      urlProp({\n        url: \"https://magic.wizards.com/en/products/unstable/askurza\",\n        text: \"Ask Urza\",\n      }),\n      CHAOS_ONCE_PROP,\n    ],\n    \"Black Lotus\": [CHAOS_ONCE_PROP],\n    \"Zada's Commando\": [tokenProp(2), CHAOS_MAX_PROP],\n    \"Ondu War Cleric\": [tokenProp(2), CHAOS_MAX_PROP],\n    \"Lord of the Pit\": [tokenProp(1), CHAOS_ONCE_PROP],\n    \"Door to Nothingness\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Relic Robber\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Poisonbelly Ogre\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Aetherflux Reservoir\": [tokenProp(1), CHAOS_ONCE_PROP],\n    \"Happily Ever After\": [tokenProp(1), CHAOS_ONCE_PROP],\n    \"Knight of the Holy Nimbus\": [tokenProp(1), CHAOS_MAX_PROP],\n    \"Beacon of Unrest\": [\n      errataProp(\n        \"Choose a creature or artifact card in a graveyard at random.  Return that card to the battlefield under your control\"\n      ),\n      CHAOS_PLAYER_CHOICE_PROP,\n    ],\n    \"Adventurous Impulse\": [CHAOS_PLAYER_CHOICE_PROP],\n    \"Commune with Dinosaurs\": [CHAOS_PLAYER_CHOICE_PROP],\n    \"Time Spiral\": [CHAOS_ONCE_PROP],\n    \"Profane Transfusion\": [CHAOS_ONCE_PROP],\n    \"Cruel Entertainment\": [CHAOS_ONCE_PROP],\n    \"Escape to the Wilds\": [CHAOS_ONCE_PROP],\n    \"Dubious Challenge\": [\n      CHAOS_ONCE_PROP,\n      errataProp(\n        \"When you roll chaos, reveal the top 10 cards of your library.  An opponent may put a creature card from among them onto the battlefield under their control. Put all other creature cards onto the battlefield under your control.\"\n      ),\n    ],\n    Triskaidekaphobia: [\n      CHAOS_ONCE_PROP,\n      errataProp(\"Any Player at Exactly 13 life loses the game.\"),\n    ],\n    \"Allure of the Unknown\": [CHAOS_ONCE_PROP],\n    \"Chaos Warp\": [CHAOS_MAX_PROP, errataProp(\"Chose Target at random\")],\n    \"Mogg Infestation\": [\n      errataProp(\n        \"Whenever you roll chaos, choose a player at random. Destroy each creature that player controls, then that player creates two 1/1 red goblin creatures tokens for each creature destroyed this way\"\n      ),\n      CHAOS_MAX_PROP,\n    ],\n    Sharktocrab: [\n      CHAOS_MAX_PROP,\n      tokenProp(1),\n      errataProp(\"Create a Sharktocrab token, then put a +1/+1 counter on it.\"),\n    ],\n    \"Spore Frog\": [\n      tokenProp(1),\n      errataProp(\"{ability-landfall} Landfall - Create a Spore Frog token.\"),\n    ],\n  };\n\n  if (properties[card.name]) {\n    card.customProperties = properties[card.name];\n  } else if (isEmpty(card.customProperties)) {\n    card.customProperties = [];\n  }\n\n  if (card.oracle_text) {\n    card.oracle_html = createMarkup(card.oracle_text);\n  }\n\n  return card;\n};\n","import {\n  CHAOSOMENON_PROP,\n  errataProp,\n  urlProp,\n  CHAOS_ONCE_PROP,\n  CHAOS_PLAYER_CHOICE_PROP,\n  CHAOS_MAX_PROP,\n  randomTokenProp,\n  CHAOS_TRIGGER_PROP,\n  ASSEMBLE_PROP,\n} from \"../../../util/additionalProps\";\n\nexport const CUSTOM_CHAOS = [\n  {\n    name: \"Hike Timeout\",\n    type_line: \"Plane - Hike\",\n    oracle_text:\n      \"Each player suspend all creatures with time counters equal to their mana value.\",\n    show_blank: true,\n    customProperties: [CHAOSOMENON_PROP, CHAOS_ONCE_PROP],\n  },\n  {\n    name: \"Hike Handout\",\n    type_line: \"Plane - Hike\",\n    oracle_text:\n      \"Each player reveals their hand and suspends all nonland cards with time counters equal to mana value, with minimum of 1.\",\n    show_blank: true,\n    customProperties: [CHAOS_ONCE_PROP],\n  },\n  {\n    name: \"Hikey Turvy\",\n    type_line: \"Plane - Hike\",\n    oracle_text: \"Randomly change the game mode. (Reasonable Switches only)\",\n    show_blank: true,\n    customProperties: [CHAOS_ONCE_PROP],\n  },\n  {\n    name: \"Sqwak Thy Neighbor\",\n    type_line: \"Plane - Hike\",\n    oracle_text:\n      \"All players randomly change positions at the table. You now play the Hand, Library, Graveyard, Life Total, et all of the new position\",\n    show_blank: true,\n    customProperties: [CHAOS_ONCE_PROP],\n  },\n  {\n    name: \"Hike's Cliffside Market\",\n    type_line: \"Plane - Hike\",\n    oracle_text: \"Randomly redistribute life totals.\",\n    show_blank: true,\n    customProperties: [CHAOS_ONCE_PROP],\n  },\n  {\n    name: \"The Hike Millining\",\n    type_line: \"Plane - Hike\",\n    oracle_text:\n      \"Each player mills 10, then exiles three cards at random from their graveyard. Players may put any lands exiled this way into play, and may cast any spells exiled this way without paying their mana cost. Any player with no cards left in their library then shuffles their graveyard into their library.\",\n    show_blank: true,\n    customProperties: [CHAOS_PLAYER_CHOICE_PROP],\n  },\n  {\n    name: \"Sproket Sproket\",\n    type_line: \"Plane - UnHike\",\n    oracle_text: \"Assemble a Random Contraption\",\n    show_blank: true,\n    customProperties: [CHAOS_TRIGGER_PROP, ASSEMBLE_PROP],\n  },\n  {\n    name: \"Gather Party\",\n    type_line: \"Plane - Faerûn\",\n    oracle_text:\n      \"Draw 1 card plus 1 additional card for each creature in your party.\",\n    show_blank: true,\n    customProperties: [\n      errataProp(\n        \"(Your party consists of up to one each of Cleric, Rogue, Warrior, and Wizard.)\"\n      ),\n      CHAOS_PLAYER_CHOICE_PROP,\n    ],\n  },\n  {\n    name: \"Summon Goatdrazi\",\n    type_line: \"Plane - Goatdrazi\",\n    oracle_text:\n      \"Create a tapped 0/1 White Goat with Annihilator 4, this creature doesn't untap during your untap step, and {8}: Untap all Goats you control\",\n    show_blank: true,\n    customProperties: [CHAOS_MAX_PROP],\n  },\n  {\n    name: \"Y'All Start In a Tavern\",\n    type_line: \"Plane - Faerûn\",\n    oracle_text:\n      \"Choose a D&D Class that you have played as a PC with at least one other player, create a token of the corresponding class.\",\n    show_blank: true,\n    customProperties: [\n      urlProp({\n        url: \"https://scryfall.com/search?q=t%3Aclass&unique=cards&as=grid&order=name\",\n        text: \"Classes\",\n      }),\n      CHAOS_ONCE_PROP,\n    ],\n  },\n  {\n    name: \"Shaken, not Stirred\",\n    type_line: \"Plane - 007\",\n    oracle_text:\n      \"Create a 3/2 colorless legendary Eldrazi token named 'Sheweena, Martini Princess of the Night'.\",\n    show_blank: true,\n    customProperties: [CHAOS_MAX_PROP],\n  },\n  {\n    name: \"Double Trouble\",\n    type_line: \"Plane - Hike\",\n    oracle_text:\n      \"Until end of turn, whenever you cast a nonlegenday spell, you may copy it\",\n    show_blank: true,\n    customProperties: [\n      CHAOS_PLAYER_CHOICE_PROP,\n      urlProp({\n        text: \"Lithoform Engine\",\n        url: \"https://scryfall.com/card/znr/245/lithoform-engine\",\n      }),\n    ],\n  },\n  {\n    name: \"MTG Borg\",\n    type_line: \"Plane - Hike\",\n    oracle_text: \"Each player creates a random Sliver token\",\n    show_blank: true,\n    customProperties: [\n      CHAOS_TRIGGER_PROP,\n      randomTokenProp({\n        text: \"Create A Token\",\n        symbol: \"ms ms-token ss-rare ss-grad ms-2x mx-4\",\n        url: \"https://api.scryfall.com/cards/random?q=t%3Asliver%20t%3Acreature%20include%3Aextras\",\n      }),\n    ],\n  },\n  {\n    name: \"Stangg and Friends\",\n    type_line: \"Plane - Hike\",\n    oracle_text: \"Create a random Legandary Creature token\",\n    show_blank: true,\n    customProperties: [\n      CHAOS_TRIGGER_PROP,\n      randomTokenProp({\n        text: \"Create A Token\",\n        symbol: \"ms ms-token ss-rare ss-grad ms-2x mx-4\",\n        url: \"https://api.scryfall.com/cards/random?q=t%3Alegend%20t%3Acreature%20include%3Aextras\",\n      }),\n    ],\n  },\n];\n\n// Curated and Truncated Scryfall API Results\nexport const BASE_CHAOS = [\n  {\n    name: \"Warp World\",\n    id: \"aa6e1fb5-a06b-4e10-8cc7-785e0f0b298e\",\n  },\n  {\n    name: \"Thieves' Auction\",\n    id: \"c9e8ad32-a701-4b77-bb7e-0e440e4072da\",\n  },\n  {\n    name: \"Scrambleverse\",\n    id: \"2b61fa9d-3f69-4632-be0e-09924ca88501\",\n  },\n  {\n    name: \"Wrath of God\",\n    id: \"caff117f-844b-4d11-a104-930d7f238114\",\n  },\n  {\n    name: \"Wheel of Fortune\",\n    id: \"4a7a420a-d924-422a-afd9-81a821ace048\",\n  },\n  {\n    name: \"Gamble\",\n    id: \"81e57561-17d4-48db-8e40-f41019010bc9\",\n  },\n  {\n    name: \"Haphazard Bombardment\",\n    id: \"e558a5bd-e8f9-477f-a514-1bf0708f4e9e\",\n  },\n  {\n    name: \"Last One Standing\",\n    id: \"87e2ee71-293d-452b-89a5-b15990186f5b\",\n  },\n  {\n    name: \"Raving Dead\",\n    id: \"5d24d153-a014-4524-a496-9fe1c41cbc2b\",\n  },\n  {\n    name: \"Crack the Earth\",\n    id: \"8ab16152-4617-4deb-b995-195e21f8f485\",\n  },\n  {\n    name: \"Whims of the Fates\",\n    id: \"aeb8d3fc-99e4-49dd-b1f1-bb479b361743\",\n  },\n  {\n    name: \"Tyrant of Discord\",\n    id: \"e8f7c8ea-e9c1-4d78-972c-15c4014915a0\",\n  },\n  {\n    name: \"Boompile\",\n    id: \"e27c6a13-d19f-44c5-9e68-0153a627b343\",\n  },\n  {\n    name: \"Fiery Gambit\",\n    id: \"a91376ed-5868-4887-8389-5ef5b9471786\",\n  },\n  {\n    name: \"Game of Chaos\",\n    id: \"95b44933-6b0b-426a-97d4-7a7cf6ad1d65\",\n  },\n  {\n    name: \"Mana Clash\",\n    id: \"740b85ff-61a3-4de0-a055-60daad13ac2a\",\n  },\n  {\n    name: \"Puppet's Verdict\",\n    id: \"052b743a-456d-49c3-881e-4f30c7645fa5\",\n  },\n  {\n    name: \"Rakdos, the Showstopper\",\n    id: \"4e3c30c7-c52e-41a0-b7c2-21d39c05160b\",\n  },\n  {\n    name: \"Order of Succession\",\n    id: \"11f68867-a46c-447f-9061-2bc4dbdde206\",\n  },\n  {\n    name: \"Mirrorweave\",\n    id: \"1c77925b-0944-4b2b-b389-42bf17907b34\",\n  },\n  {\n    name: \"Perplexing Chimera\",\n    id: \"f9cff40b-9cae-47d0-8df4-c287a17a33e4\",\n  },\n  {\n    name: \"Sphinx Ambassador\",\n    id: \"b0937274-d5cb-4790-8c10-804f537c5581\",\n  },\n  {\n    name: \"Aminatou, the Fateshifter\",\n    id: \"16b9f43a-9c3f-4bfa-9eb1-734189a4bb1f\",\n  },\n  {\n    name: \"Choice of Damnations\",\n    id: \"05939f15-2d95-47df-b66f-131c3e7ea95f\",\n  },\n  {\n    name: \"Dimensional Breach\",\n    id: \"f18f2832-07c5-47be-8966-b250fb997f78\",\n  },\n  {\n    name: \"Aeon Engine\",\n    id: \"ea4dfdd7-f35a-45d6-9fc7-2c096f92dd5f\",\n  },\n  {\n    name: \"Nascent Metamorph\",\n    id: \"61e7984b-8c20-4867-8045-4fb52cd6e2d4\",\n  },\n  {\n    name: \"Pain's Reward\",\n    id: \"6d16da68-85f6-4d54-9751-9cf046f5e99a\",\n  },\n  {\n    name: \"Amplifire\",\n    id: \"7a58c77f-7c15-44f4-8011-6046482a2d08\",\n  },\n  {\n    name: \"Akroan Horse\",\n    id: \"31a8954f-467d-4eb9-8a48-d25bae9529b8\",\n  },\n  {\n    name: \"Walking Archive\",\n    id: \"c390e074-bd30-4564-a39a-176af7df79f4\",\n  },\n  {\n    name: \"Norin the Wary\",\n    id: \"f61ea59a-1db0-4e6b-bcde-19787c76a49b\",\n  },\n  {\n    name: \"Vulshok Sorcerer\",\n    id: \"b7153854-c548-48de-b9e2-72b7d9397563\",\n  },\n  {\n    name: \"Serrated Arrows\",\n    id: \"a2a31bc7-cb98-4199-b0dc-3f496e9f9dca\",\n  },\n  {\n    name: \"Illicit Auction\",\n    id: \"9c3f633f-538c-4581-b3cc-9285ed6bc4fe\",\n  },\n  {\n    name: \"Interplanar Brushwagg\",\n    id: \"c0da6c46-e4f4-40bd-87d2-14154707131b\",\n  },\n  {\n    name: \"Wrath of Sod\",\n    id: \"a734f1d9-17a1-4dea-bdec-b070ababe31d\",\n  },\n  {\n    name: \"Naughty // Nice\",\n    id: \"7ed5261d-4bf1-4cb4-8ffe-a51439eb40c9\",\n  },\n  {\n    name: \"Season's Beatings\",\n    id: \"e177c12e-551a-4688-aa34-740f873dd37d\",\n  },\n  {\n    name: \"Evil Presents\",\n    id: \"af171b8b-05cd-4a05-ae0b-6e80935addab\",\n  },\n  {\n    name: \"Gifts Given\",\n    id: \"ba72c564-0ca6-4f52-b19a-175646965291\",\n  },\n  {\n    name: \"Decorated Knight // Present Arms\",\n    id: \"6cbda4a6-e01b-4df2-aee9-b6f14336b85f\",\n  },\n  {\n    name: \"Oddly Uneven\",\n    id: \"830d5f87-1c8b-414a-a91e-4805f5bdca54\",\n  },\n  {\n    name: \"Gerrymandering\",\n    id: \"aea8ab0f-6898-4312-9989-915d6357515f\",\n  },\n  {\n    name: \"Stuffy Doll\",\n    id: \"ce427213-4ce5-478e-83d8-fe80ec446a58\",\n  },\n  {\n    name: \"Phytohydra\",\n    id: \"86c336d2-cc14-4b74-a6f9-aab7a084d0de\",\n  },\n  {\n    name: \"Nyx-Fleece Ram\",\n    id: \"ad98e518-4ec9-403e-a978-217244262c8f\",\n  },\n  {\n    name: \"Boomstacker\",\n    id: \"747788b4-42ab-4e3e-bdbe-eb5040432db1\",\n  },\n  {\n    name: \"Goldenglow Moth\",\n    id: \"8d6e31cb-98c5-4145-bdef-666f3cea7eab\",\n  },\n  {\n    name: \"Karplusan Minotaur\",\n    id: \"963f45d7-ce84-47af-ae1c-727172a31f0f\",\n  },\n  {\n    name: \"Adventurous Impulse\",\n    id: \"e7b44893-e6d1-48d0-ba69-06b9569e1e38\",\n  },\n  {\n    name: \"Commune with Dinosaurs\",\n    id: \"de4b9a07-6631-477a-8c77-3b04f211439d\",\n  },\n  {\n    name: \"Time Spiral\",\n    id: \"641b21e1-9188-4bc3-96e8-cda2acbc5ed5\",\n  },\n  {\n    name: \"Goblin Festival\",\n    id: \"ac067eb8-427f-4bfa-b392-0bb41ac8370e\",\n  },\n  {\n    name: \"Goblin Traprunner\",\n    id: \"36f0fd37-eb34-418d-b136-03d816c93034\",\n  },\n  {\n    name: \"Stitch in Time\",\n    id: \"4a57766e-8966-4e14-b78f-48ecb5d889c1\",\n  },\n  {\n    name: \"You Meet in a Tavern\",\n    id: \"593aa59a-4025-4df8-9f27-188fc7712fde\",\n  },\n  {\n    name: \"Tavern Swindler\",\n    id: \"d00850e4-6be3-4246-ae45-c0e990e6d6e1\",\n  },\n  {\n    name: \"Mass Mutiny\",\n    id: \"6d18e6fb-e4ae-4ff4-9412-f16edb2e56c6\",\n  },\n  {\n    name: \"Chatterstorm\",\n    id: \"b34f0ac1-6894-4761-b62c-b85d927acf09\",\n  },\n  {\n    name: \"Urza, Academy Headmaster\",\n    id: \"e4581455-5fa1-4c96-96b3-e9e9654f5a28\",\n  },\n  {\n    name: \"Zada's Commando\",\n    id: \"f4ad826d-c7e6-4dfd-991f-15d75b87d504\",\n  },\n  {\n    name: \"Ondu War Cleric\",\n    id: \"9b255d34-04fa-4d3b-9fc1-8f980ef1f054\",\n  },\n  {\n    name: \"Revitalize\",\n    id: \"f8da7312-91e8-4f8d-84ef-6888360b3718\",\n  },\n  {\n    name: \"Through the Breach\",\n    id: \"789196df-143d-4a60-a8e4-5bdcfdfd7ba8\",\n  },\n  {\n    name: \"Tempting Wurm\",\n    id: \"857c2b6c-cfdf-4c88-a334-2937cb7db603\",\n  },\n  {\n    name: \"Lord of the Pit\",\n    id: \"56ea363c-ec09-4d79-aaf9-f8ff2e2a34c0\",\n  },\n  {\n    name: \"Profane Transfusion\",\n    id: \"c3387cfc-2dbe-409e-bfc7-b399f05a817d\",\n  },\n  {\n    name: \"Beacon of Unrest\",\n    id: \"1ee97c64-39ab-4967-a7e4-3fc5e793d534\",\n  },\n  {\n    name: \"Door to Nothingness\",\n    id: \"c30c41aa-4c83-489f-84db-d53634d43ea2\",\n  },\n  {\n    name: \"Mogg Infestation\",\n    id: \"bfeb1145-3729-481e-a314-c325ed2f2a35\",\n  },\n  {\n    name: \"Chaos Warp\",\n    id: \"6d0a3996-5a03-481b-9bda-15c6f6e5f9c4\",\n  },\n  {\n    name: \"Black Lotus\",\n    id: \"11e5a2c6-dcc4-4ad3-a4b5-b9095d77c4f8\",\n  },\n  {\n    name: \"Relic Robber\",\n    id: \"49f6a537-fa85-44ab-a853-7a32812a4b32\",\n  },\n  {\n    name: \"Poisonbelly Ogre\",\n    id: \"a168b953-eac4-472e-ac74-598febb05f83\",\n  },\n  {\n    name: \"Aetherflux Reservoir\",\n    id: \"96b6b2e1-c3e6-464c-8a13-b15deb34e862\",\n  },\n  {\n    name: \"Happily Ever After\",\n    id: \"c38c9120-ac20-4f81-b8d8-9d490cc2a913\",\n  },\n  {\n    name: \"Knight of the Holy Nimbus\",\n    id: \"d4ac76c0-54ce-41b2-9000-e21eecaf7e99\",\n  },\n  {\n    name: \"Sharktocrab\",\n    id: \"db490f74-977f-476d-b8ee-da7b0a98b4c4\",\n  },\n  {\n    name: \"Cruel Entertainment\",\n    id: \"3e304424-4a50-43bb-aee0-e9f960583aac\",\n  },\n  {\n    name: \"Triskaidekaphobia\",\n    id: \"813995f5-e49a-431d-8a3a-8ec569844e11\",\n  },\n  {\n    name: \"Escape to the Wilds\",\n    id: \"1bff641e-aad3-414f-ad5b-8d32c734efa9\",\n  },\n  {\n    name: \"Dubious Challenge\",\n    id: \"3c2f72f7-69e1-4944-98ad-66d88ee2d727\",\n  },\n  {\n    name: \"Allure of the Unknown\",\n    id: \"c543e785-2c6b-4347-a9c3-25940bbadcff\",\n  },\n];\n","import axios from \"axios\";\nimport moment from \"moment\";\nimport chunk from \"lodash/chunk\";\nimport pick from \"lodash/pick\";\nimport store from \"store/dist/store.modern\";\nimport { BASE_PLANES } from \"../pages/hike/data/planes\";\nimport { BASE_CHAOS } from \"../pages/hike/data/chaos\";\nimport { addAdditionalProperties } from \"./additionalProps\";\n// TODO use expire store\nexport const internet = axios.create();\n\nconst PLANES_URL =\n  \"https://api.scryfall.com/cards/search?include_extras=1&q=t%3Aplane+or+t%3Aphenomenon&unique=cards\";\n\nconst SCHEMES_URL =\n  \"https://api.scryfall.com/cards/search?include_extras=1&q=t%3Ascheme&unique=cards\";\n\nconst CONTRAPTIONS_URL =\n  \"https://api.scryfall.com/cards/search?include_extras=1&q=t%3Acontraption&unique=cards\";\n\nconst COLLECTION_URL = \"https://api.scryfall.com/cards/collection\";\n\nexport const filterAPI = (card) =>\n  pick(card, [\n    \"object\",\n    \"id\",\n    \"oracle_id\",\n    \"multiverse_ids\",\n    \"name\",\n    \"uri\",\n    \"scryfall_uri\",\n    \"layout\",\n    \"image_uris\",\n    \"mana_cost\",\n    \"set\",\n    \"cmc\",\n    \"type_line\",\n    \"oracle_text\",\n    \"colors\",\n    \"color_identity\",\n    \"rulings_uri\",\n    \"artist\",\n    \"flavor_text\",\n    \"related_uris.gatherer\",\n    // Custom Properties\n    \"customProperties\",\n    \"oracle_html\",\n    \"show_blank\",\n  ]);\n\nexport const getAllPlanechaseCards = async () => {\n  try {\n    let planes = cached(\"planes\");\n    if (!planes) {\n      console.log(\"Loading planes from Axios\");\n      let response = await internet.get(PLANES_URL);\n      planes = response.data.data;\n      planes = planes.map((p) => addAdditionalProperties(filterAPI(p)));\n      cache(\"planes\", planes);\n      // TODO use the expire store parameter\n    } else {\n      console.log(\"Loaded planes from store\");\n    }\n    return planes;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const getAllArchenemyCards = async () => {\n  try {\n    let schemes = cached(\"schemes\");\n    if (!schemes) {\n      console.log(\"Loading archenemy from Axios\");\n      let response = await internet.get(SCHEMES_URL);\n      schemes = response.data.data;\n      schemes = schemes.map((p) => addAdditionalProperties(filterAPI(p)));\n      cache(\"schemes\", schemes);\n      // TODO use the expire store parameter\n    } else {\n      console.log(\"Loaded archenemy from store\");\n    }\n    return schemes;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const getAllContraptionsCards = async () => {\n  try {\n    let contraptions = cached(\"contraptions\");\n    if (!contraptions) {\n      console.log(\"Loading contraptions from Axios\");\n      let response = await internet.get(CONTRAPTIONS_URL);\n      contraptions = response.data.data;\n      contraptions = contraptions.map((p) =>\n        addAdditionalProperties(filterAPI(p))\n      );\n      cache(\"contraptions\", contraptions);\n      // TODO use the expire store parameter\n    } else {\n      console.log(\"Loaded contraptions from store\");\n    }\n    return contraptions;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const getAllHikeModePlaneCards = async () => {\n  try {\n    let hikePlanes = cached(\"hikePlanes\");\n    let ids = BASE_PLANES.map((c) => pick(c, \"id\"));\n    if (!hikePlanes || hikePlanes.length !== ids.length) {\n      console.log(\"Loading hike planes from Axios\");\n      hikePlanes = await fetchAllCards(ids);\n      cache(\"hikePlanes\", hikePlanes);\n      // TODO use the expire store parameter\n    } else {\n      console.log(\"Loaded hike planes from store\");\n    }\n    return hikePlanes;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const getAllHikeModeChaosCards = async () => {\n  try {\n    let hikeChaos = cached(\"hikeChaos\");\n    let ids = BASE_CHAOS.map((c) => pick(c, \"id\"));\n    if (!hikeChaos || hikeChaos.length !== ids.length) {\n      console.log(\"Loading hike chaos from Axios\");\n      hikeChaos = await fetchAllCards(ids);\n      cache(\"hikeChaos\", hikeChaos);\n      // TODO use the expire store parameter\n    } else {\n      console.log(\"Loaded hike chaos from store\");\n    }\n    return hikeChaos;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nconst fetchAllCards = async (ids) => {\n  const chunks = chunk(ids, 75);\n  let cards = [];\n  for (let identifiers of chunks) {\n    let response = await internet.post(COLLECTION_URL, {\n      identifiers,\n    });\n    cards = cards.concat([...response?.data?.data]);\n  }\n  return cards.map((p) => addAdditionalProperties(filterAPI(p)));\n};\n\nfunction cached(prefix) {\n  let data = store.get(prefix);\n  let cacheDate = store.get(`${prefix}-fetched`);\n  if (data && !old(cacheDate)) {\n    return data;\n  }\n  return null;\n}\n\nfunction cache(prefix, data) {\n  store.set(prefix, data);\n  store.set(`${prefix}-fetched`, moment().unix());\n}\n\nfunction old(time) {\n  return time && moment().diff(moment.unix(time), \"days\") > 5;\n}\n","import React, { useState, useEffect } from \"react\";\n\nexport const Loading = ({\n  label = \"Loading\",\n  start = 0,\n  numDots = 3,\n  interval = 500,\n  className,\n}) => {\n  const [dotsCount, setDotsCount] = useState(start);\n\n  useEffect(() => {\n    const dotsInterval = setInterval(() => {\n      setDotsCount(dotsCount + 1);\n    }, interval);\n\n    return () => {\n      clearInterval(dotsInterval);\n    };\n  });\n\n  const dots = getDotString(dotsCount, numDots);\n  const classes = `loading-dots ${className}`;\n\n  return (\n    <span className={classes}>\n      {label}\n      {dots}\n    </span>\n  );\n};\n\nconst getDotString = (count, max, char = \".\") => char.repeat((count % max) + 1);\n","import React, { useState } from \"react\";\n\nimport { Button, Col, Modal } from \"react-bootstrap\";\n\nexport const Confirm = ({\n  onConfirm,\n  triggerButtonParams,\n  triggerText,\n  headerText = \"Confirm?\",\n  bodyText,\n  confirmText = \"Save\",\n  confirmVariant = \"primary\",\n}) => {\n  const [open, setOpen] = useState(false);\n  const close = (confirmed) => {\n    setOpen(false);\n    if (confirmed) {\n      onConfirm();\n    }\n  };\n\n  const header = (\n    <Modal.Header>\n      <Modal.Title>{headerText}</Modal.Title>\n    </Modal.Header>\n  );\n\n  const body = <Modal.Body>{bodyText || \"Confirm?\"}</Modal.Body>;\n\n  return (\n    <>\n      <Modal\n        show={open}\n        onHide={close}\n        animation={true}\n        contentClassName=\"bg-dark text-light noselect\"\n      >\n        {header}\n        {bodyText && body}\n        <Modal.Footer>\n          <Col>\n            <Button variant=\"secondary\" onClick={() => close(false)} block>\n              Close\n            </Button>\n          </Col>\n          <Col>\n            <Button variant={confirmVariant} onClick={() => close(true)} block>\n              {confirmText}\n            </Button>\n          </Col>\n        </Modal.Footer>\n      </Modal>\n      <Button onClick={() => setOpen(true)} {...triggerButtonParams}>\n        {triggerText}\n      </Button>\n    </>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/planechase-back.e5e428e7.jpg\";","import React, { useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { getCounterType } from \"../../mtg/card.js\";\n\nexport const CounterIcon = ({ type, className = \"\", style = {} }) => {\n  const icon = (ms, verticalAlign = \"initial\") => (\n    <i\n      className={`ms mm-fw ${ms} ${className}`}\n      style={{ verticalAlign, ...style }}\n    ></i>\n  );\n\n  switch (type) {\n    case \"Doom\":\n      return icon(\"ms-counter-doom\");\n    case \"Scroll\":\n      return icon(\"ms-counter-lore\", \"bottom\");\n    case \"Charge\":\n      return icon(\"ms-counter-charge\");\n    case \"Pressure\":\n      return icon(\"ms-counter-mining\");\n    case \"Flame\":\n      return icon(\"ms-counter-flame\");\n    case \"Fun\":\n      return icon(\"ms-counter-vortex\", \"bottom\");\n    default:\n      return null;\n  }\n};\n\nexport const Counter = ({ card, style = {} }) => {\n  const [counter, setCounter] = useState(card?.counter || 0);\n  const type = getCounterType(card);\n  const incrementCounter = () => {\n    card.counter = counter + 1;\n    setCounter(counter + 1);\n  };\n  return (\n    <div style={style}>\n      <h1 className=\"text-shadow noselect\">\n        {counter} <CounterIcon type={type} />\n      </h1>\n      <Button\n        onClick={incrementCounter}\n        variant=\"dark\"\n        size=\"lg\"\n        className=\"btn-translucent\"\n      >\n        <h3 className=\"mb-0\">Add {type} Counter</h3>\n      </Button>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport { useSettings } from \"../../hooks/useSettings\";\n\nexport const CardText = ({ card, showText = false }) => {\n  const settings = useSettings();\n\n  if (showText || settings.displayText) {\n    if (card) {\n      const html =\n        card.oracle_html ||\n        card.oracle_text ||\n        card.card_faces?.map((f) => f.oracle_text).join(\"<br/>\");\n      return (\n        <>\n          <Card.Title>\n            <h5>{card.name}</h5>\n          </Card.Title>\n          <Card.Subtitle>{card.type_line}</Card.Subtitle>\n          <Card.Text dangerouslySetInnerHTML={{ __html: html }} />\n        </>\n      );\n    } else {\n      return <Card.Title>None</Card.Title>;\n    }\n  }\n\n  return null;\n};\n","import React, { useState } from \"react\";\nimport { Card, ListGroup, Modal } from \"react-bootstrap\";\nimport { gathererImageURL } from \"../../mtg/card\";\nimport back from \"../../images/planechase-back.jpg\";\nimport { Counter } from \"./Counter\";\nimport \"./planes.scss\";\n\nimport { hasCustomProperty } from \"../../mtg/card.js\";\nimport { CardText } from \"./CardText\";\nimport cn from \"classnames\";\nimport { useSettings } from \"../../hooks/useSettings\";\n\nexport const Plane = ({ listDisplay, card, displayActions, children }) => {\n  const [modalOpen, setModalOpen] = useState(false);\n  const [fullscreen, setFullscreen] = useState(false);\n\n  const settings = useSettings();\n  const { displayImages, displayGatherer } = settings;\n\n  const hasCounters = hasCustomProperty(\"counter\", card);\n  const emptyChildren = children?.type === null;\n\n  // Use Scryfall and rotate or use Gatherer\n  // scryfall (rotated) card.image_uris[\"border_crop\"]\n  const imageURI = card ? gathererImageURL(card) : back;\n\n  const counter = displayActions && hasCounters && <Counter card={card} />;\n\n  const toggleModal = () => {\n    console.log(\"Toggle Modal\");\n    setModalOpen((isOpen) => !isOpen);\n  };\n\n  const toggleFullScreen = () => {\n    console.log(\"Toggle FullScreen\");\n    setFullscreen((isFullscreen) => !isFullscreen);\n  };\n\n  const renderBody = () => {\n    const text = CardText({ card });\n    const hasBody = !!text;\n\n    return hasBody && <Card.Body>{text}</Card.Body>;\n  };\n\n  const renderActions = () => {\n    if (displayGatherer && card) {\n      return (\n        <Card.Footer>\n          <Card.Link\n            href={card.related_uris[\"gatherer\"]}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Gatherer\n          </Card.Link>\n        </Card.Footer>\n      );\n    }\n  };\n\n  const renderCardImage = () => (\n    <Card.Img\n      variant=\"top\"\n      width=\"100%\"\n      src={imageURI}\n      className=\"mtg-card mtg-card-plane\"\n    />\n  );\n\n  const renderImage = () => {\n    if (displayImages) {\n      return (\n        <>\n          <div onDoubleClick={toggleFullScreen}>{renderCardImage()}</div>\n          <Modal\n            show={fullscreen}\n            onHide={toggleFullScreen}\n            backdrop={true}\n            dialogClassName=\"modal-content-full bg-transparent\"\n            centered={true}\n          >\n            <Modal.Body\n              className=\"p-0\"\n              centered=\"true\"\n              onClick={toggleFullScreen}\n            >\n              {renderCardImage()}\n            </Modal.Body>\n          </Modal>\n        </>\n      );\n    }\n  };\n\n  const renderComponents = () => {\n    if (displayImages) {\n      return (\n        <Card.ImgOverlay\n          className={cn(\"text-center plane-overlay\", {\n            \"child-overlay\": !emptyChildren,\n            \"counter-overlay\": emptyChildren && hasCounters,\n          })}\n        >\n          <Card.Title className=\"text-center\">\n            {counter}\n            {children}\n          </Card.Title>\n        </Card.ImgOverlay>\n      );\n    } else {\n      return (\n        <Card.Body className=\"text-center pb-0\">\n          {counter}\n          {children}\n        </Card.Body>\n      );\n    }\n  };\n\n  if (listDisplay) {\n    return (\n      <>\n        <ListGroup.Item variant=\"dark\" onClick={toggleModal}>\n          <div>{card.name}</div>\n        </ListGroup.Item>\n        <Modal\n          show={modalOpen}\n          onHide={toggleModal}\n          size=\"md\"\n          backdrop={true}\n          dialogClassName=\"modal-content-no-border\"\n        >\n          <Modal.Body className=\"p-0\" centered=\"true\">\n            <Plane card={card} />\n            {children}\n          </Modal.Body>\n        </Modal>\n      </>\n    );\n  } else {\n    return (\n      <Card bg=\"black\" text=\"light\" className=\"mtg-plane-card\">\n        {renderImage()}\n        {renderComponents()}\n        {renderBody()}\n        {renderActions()}\n      </Card>\n    );\n  }\n};\n","import React from \"react\";\nimport ReactDice from \"react-dice-complete\";\nimport \"react-dice-complete/dist/react-dice-complete.css\";\nimport \"./planar-die.scss\";\nimport noop from \"lodash/noop\";\n\nconst translateRoll = (roll) => {\n  switch (roll) {\n    case 1:\n      return \"Planeswalk\";\n    case 6:\n      return \"Chaos\";\n    default:\n      return \"Blank\";\n  }\n};\n\nexport const PlanarDie = ({ rollDone = noop }) => {\n  return (\n    <div className=\"planar\">\n      <ReactDice\n        numDice={1}\n        rollDone={(r) => rollDone(translateRoll(r))}\n        defaultRoll={1}\n        outline={true}\n        outlineColor=\"#808080\"\n      />\n    </div>\n  );\n};\n","import React from \"react\";\nimport cn from \"classnames\";\n\nexport const DoubleFaceIcon = ({\n  enabled,\n  backdrop = false,\n  invert = false,\n  style = {},\n}) => {\n  const classes = {\n    \"ms-dfc-day\": enabled,\n    \"ms-dfc-night\": !enabled,\n    \"text-light\": enabled && invert,\n    \"text-dark\": !enabled && invert,\n    \"bg-white\": backdrop,\n  };\n  return (\n    <span>\n      <i className={cn(\"ms ms-dfc\", classes)} style={style} />\n    </span>\n  );\n};\n","import React from \"react\";\nimport { Button, ButtonGroup } from \"react-bootstrap\";\nimport { DoubleFaceIcon } from \"./DoubleFaceIcon\";\n\nexport const LoyaltyDownButton = (props) => (\n  <Button {...props} variant=\"secondary\">\n    <i className=\"ms ms-loyalty-down ms-loyalty-1 ms-2x\" />\n  </Button>\n);\nexport const LoyaltyUpButton = (props) => (\n  <Button {...props} variant=\"secondary\">\n    <i className=\"ms ms-loyalty-up ms-loyalty-1 ms-2x\" />\n  </Button>\n);\n\nexport const LoyaltyButtonGroup = ({\n  upProps,\n  downProps,\n  reverse,\n  ...props\n}) => (\n  <ButtonGroup {...props}>\n    {reverse ? (\n      <>\n        <LoyaltyUpButton {...upProps} />\n        <LoyaltyDownButton {...downProps} />\n      </>\n    ) : (\n      <>\n        <LoyaltyDownButton {...downProps} />\n        <LoyaltyUpButton {...upProps} />\n      </>\n    )}\n  </ButtonGroup>\n);\n\nexport const UnTapButton = (props) => (\n  <Button {...props} variant=\"secondary\">\n    <i className=\"ms ms-untap ms-2x ss-mythic ss-grad\" />\n  </Button>\n);\n\nexport const TapButton = (props) => (\n  <Button {...props} variant=\"secondary\">\n    <i className=\"ms ms-tap ms-2x ss-mythic ss-grad\" />\n  </Button>\n);\n\nexport const TapButtonGroup = ({ unTapProps, tapProps, reverse, ...props }) => (\n  <ButtonGroup {...props}>\n    {reverse ? (\n      <>\n        <TapButton {...tapProps} />\n        <UnTapButton {...unTapProps} />\n      </>\n    ) : (\n      <>\n        <UnTapButton {...unTapProps} />\n        <TapButton {...tapProps} />\n      </>\n    )}\n  </ButtonGroup>\n);\n\nexport const DoubleFaceButton = ({ enabled, text, ...props }) => (\n  <Button {...props} block variant=\"secondary\">\n    <span className=\"mr-2\">{text}</span>\n    <DoubleFaceIcon enabled={enabled} backdrop />\n  </Button>\n);\n\nexport const DoubleFaceHighlightButton = ({ enabled, text, ...props }) => (\n  <Button size=\"sm\" block {...props} variant={enabled ? \"info\" : \"secondary\"}>\n    <div className=\"float-left\">\n      <DoubleFaceIcon enabled={enabled} invert />\n    </div>\n    <div className=\"d-inline\">{text}</div>\n  </Button>\n);\n\nexport const TenthEditionButton = (props) => (\n  <Button variant=\"danger\" {...props}>\n    <i className=\"ss ss-x ss-10e ss-rare ss-grad ss-2x\" />\n  </Button>\n);\n","import React, { useContext } from \"react\";\nimport uuidv4 from \"uuid/v4\";\nimport { useLocalState } from \"../hooks/useLocalState\";\nimport { shuffleArray } from \"../util/shuffleArray\";\n\nexport const DeckContext = React.createContext({});\nexport const useDeckContext = () => useContext(DeckContext);\n\nexport const DeckProvider = ({ prefix = null, children }) => {\n  const [deck, setDeck] = useLocalState(`${prefix}-deck`, []);\n  const [isInit, setInit] = useLocalState(`${prefix}-deck-init`, false);\n  const [history, setHistory] = useLocalState(`${prefix}-history`, []);\n\n  const initDeck = (cards, reset = false) => {\n    if (!isInit || deck.length === 0 || reset) {\n      console.log(`Creating New ${prefix} Deck`);\n      const clonedCards = cards?.map((card) => {\n        return {\n          // Add Deck Card Id so that each card in the deck has a unique value\n          deck_card_id: uuidv4(),\n          // Clone all the cards so that we aren't modifying original objects\n          ...card,\n        };\n      });\n      const newDeck = clonedCards && shuffleArray(clonedCards);\n      setDeck(newDeck);\n      resetHistory();\n      setInit(true);\n    }\n  };\n\n  const reInit = () => {\n    setDeck([]);\n    setInit(false);\n    resetHistory();\n  };\n\n  const moveCard = (from, to) => {\n    deck.splice(to, 0, deck.splice(from, 1)[0]);\n    setDeck([...deck]);\n  };\n\n  const drawCard = () => {\n    const card = deck?.shift();\n    setDeck([...deck]);\n    if (card) {\n      updateHistory(card);\n    }\n    return card;\n  };\n\n  const updateHistory = (card) => {\n    setHistory([card, ...history]);\n  };\n\n  const resetHistory = () => {\n    setHistory([]);\n  };\n\n  const undoDraw = () => {\n    const card = history.shift();\n    if (card) {\n      addCardsToTop([card]);\n    }\n    setHistory([...history]);\n    const lastCard = history[0];\n    return lastCard;\n  };\n\n  const addCardsToTop = (topCards) => {\n    setDeck((prevDeck) => [...topCards, ...prevDeck]);\n  };\n\n  const addCardsToBottom = (bottomCards) => {\n    setDeck((prevDeck) => [...prevDeck, ...bottomCards]);\n  };\n\n  const findCard = (card) => {\n    return findCardByDeckCardId(card.deck_card_id);\n  };\n\n  const findCardByDeckCardId = (deckCardId) => {\n    return deck.find((c) => c.deck_card_id === deckCardId);\n  };\n\n  const findAndPutOnTop = (deckCardId) => {\n    const tmpCard = findCardByDeckCardId(deckCardId);\n\n    if (tmpCard) {\n      removeCards([tmpCard]);\n      addCardsToTop([tmpCard]);\n    }\n  };\n\n  const findAndPutOnBottom = (deckCardId) => {\n    const tmpCard = findCardByDeckCardId(deckCardId);\n\n    if (tmpCard) {\n      removeCards([tmpCard]);\n      addCardsToBottom([tmpCard]);\n    }\n  };\n\n  const removeCards = (cardsToRemove) => {\n    setDeck((prevDeck) => {\n      const filteredDeck = [...prevDeck].filter(\n        (c) => !cardsToRemove.find((r) => r.deck_card_id === c.deck_card_id)\n      );\n      return filteredDeck;\n    });\n  };\n\n  // TODO: Move this\n  const revealCards = (numReveal, onlyPlanes = false) => {\n    const revealedCards = [];\n    const count = Math.min(deck.length, numReveal);\n\n    let planes = 0;\n    let tmpCount = count;\n    for (let i = 0; i < tmpCount; i++) {\n      revealedCards.push(deck[i]);\n\n      if (onlyPlanes) {\n        if (deck[i].type_line.search(\"Plane\") >= 0) {\n          planes++;\n        }\n\n        if (i === tmpCount - 1 && planes < count) {\n          tmpCount++;\n        }\n      }\n    }\n\n    return revealedCards;\n  };\n\n  const shuffle = () => {\n    setDeck(shuffleArray(deck));\n  };\n\n  return (\n    <DeckContext.Provider\n      value={{\n        prefix,\n        isInit,\n        reInit,\n        deck,\n        history,\n        initDeck,\n        moveCard,\n        drawCard,\n        updateHistory,\n        resetHistory,\n        undoDraw,\n        addCardsToTop,\n        addCardsToBottom,\n        findCard,\n        findCardByDeckCardId,\n        findAndPutOnTop,\n        findAndPutOnBottom,\n        removeCards,\n        revealCards,\n        shuffle,\n      }}\n    >\n      {children}\n    </DeckContext.Provider>\n  );\n};\n","import { useState } from \"react\";\nimport { Button, Fade, ListGroup } from \"react-bootstrap\";\n\nexport const History = ({ history, CardType }) => {\n  const [showHistory, setShowHistory] = useState(false);\n\n  return (\n    <div className=\"my-2\">\n      <Button\n        onClick={() => setShowHistory(!showHistory)}\n        variant=\"secondary\"\n        block\n      >\n        {showHistory ? \"Hide\" : \"Show\"} History\n      </Button>\n      <Fade in={showHistory}>\n        <div>\n          {showHistory && history && (\n            <ListGroup>\n              {history.map((p) => (\n                <CardType card={p} key={p.deck_card_id} listDisplay={true} />\n              ))}\n            </ListGroup>\n          )}\n        </div>\n      </Fade>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport {\n  Button,\n  ButtonGroup,\n  ButtonToolbar,\n  Fade,\n  ListGroup,\n} from \"react-bootstrap\";\nimport { useDeckContext } from \"../../mtg/DeckContext\";\nimport {\n  LoyaltyButtonGroup,\n  TapButtonGroup,\n  TenthEditionButton,\n} from \"../magic/Buttons\";\n\nexport const Deck = ({ CardType, name = \"\" }) => {\n  const [showDeck, setShowDeck] = useState(false);\n  const [showDeckImages, setShowDeckImages] = useState(false);\n  const context = useDeckContext();\n  const deck = context.deck;\n\n  return (\n    <div className=\"my-2\">\n      <Button onClick={() => setShowDeck(!showDeck)} variant=\"secondary\" block>\n        {showDeck ? \"Hide\" : \"Show\"} {name} Deck\n      </Button>\n      <Fade in={showDeck}>\n        <div>\n          {showDeck && (\n            <>\n              <Button\n                onClick={() => setShowDeckImages(!showDeckImages)}\n                variant=\"secondary\"\n                block\n              >\n                {showDeckImages ? \"Hide\" : \"Show\"} Full Card\n              </Button>\n              <ListGroup>\n                {deck.map((card, i) => (\n                  <React.Fragment key={card.deck_card_id}>\n                    <CardType card={card} listDisplay={!showDeckImages} />\n                    <ListGroup.Item className=\"text-center justify-content-center d-flex\">\n                      <ButtonToolbar>\n                        <LoyaltyButtonGroup\n                          reverse\n                          downProps={{\n                            disabled: i === deck.length - 1,\n                            onClick: () => context.moveCard(i, i + 1),\n                          }}\n                          upProps={{\n                            disabled: i === 0,\n                            onClick: () => context.moveCard(i, i - 1),\n                          }}\n                        />\n                        <TapButtonGroup\n                          className=\"ml-2\"\n                          unTapProps={{\n                            disabled: i === 0,\n                            onClick: () =>\n                              context.findAndPutOnTop(card.deck_card_id),\n                          }}\n                          tapProps={{\n                            disabled: i === deck.length - 1,\n                            onClick: () =>\n                              context.findAndPutOnBottom(card.deck_card_id),\n                          }}\n                        />\n\n                        <ButtonGroup className=\"ml-2\">\n                          <TenthEditionButton\n                            onClick={() => context.removeCards([card])}\n                          />\n                        </ButtonGroup>\n                      </ButtonToolbar>\n                    </ListGroup.Item>\n                  </React.Fragment>\n                ))}\n              </ListGroup>\n            </>\n          )}\n        </div>\n      </Fade>\n    </div>\n  );\n};\n","import { useSettings } from \"../hooks/useSettings\";\n\nexport const DevTools = ({ children }) => {\n  const settings = useSettings();\n\n  if (settings.devTools) {\n    return (\n      <div className=\"my-4\">\n        <h5 className=\"text-center noselect\">Dev Tools</h5>\n        {children}\n      </div>\n    );\n  }\n\n  return null;\n};\n","import { Button } from \"react-bootstrap\";\n\nexport const ActionButton = ({\n  onClick,\n  disabled,\n  icon,\n  text,\n  children,\n  ...rest\n}) => (\n  <div className=\"fixed-top mt-1 ml-1 w-25 text-left\">\n    <Button\n      onClick={onClick}\n      className=\"mb-2\"\n      variant=\"success\"\n      disabled={disabled}\n      block\n      {...rest}\n    >\n      {icon}\n      <span className=\"mx-2 d-none d-md-inline\">{text}</span>\n    </Button>\n    {children}\n  </div>\n);\n","import React from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport { Plane } from \"../../components/magic/Plane\";\n\nexport const ScryModal = ({ scryCards, open, onScryTop, onScryBottom }) => {\n  if (scryCards && open) {\n    return (\n      <Modal\n        show={!!open}\n        size=\"md\"\n        dialogClassName=\"bg-secondary\"\n        variant=\"secondary\"\n        backdrop=\"static\"\n      >\n        <Modal.Header className=\"justify-content-center text-white noselect\">\n          <Modal.Title>\n            <i className=\"ms ms-chaos mx-4\" />\n            Scry Card\n            <i className=\"ms ms-chaos mx-4\" />\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Button variant=\"info\" block onClick={onScryTop}>\n            Top\n          </Button>\n          {scryCards.map((c) => (\n            <Plane card={c} key={c.deck_card_id} />\n          ))}\n          <Button variant=\"info\" block onClick={onScryBottom}>\n            Bottom\n          </Button>\n        </Modal.Body>\n      </Modal>\n    );\n  }\n\n  return null;\n};\n","import React from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { hasCustomProperty } from \"../../mtg/card.js\";\n\nexport const ChaosButton = ({ card, onClick }) => {\n  const hasChaos = hasCustomProperty(\"chaos-trigger\", card);\n  if (hasChaos) {\n    return (\n      <Button\n        onClick={() => onClick(card)}\n        variant=\"info\"\n        size=\"lg\"\n        className=\"btn-translucent\"\n      >\n        <i className=\"ms ms-chaos ms-2x mx-2\" />\n        <span className=\"mx-2 d-none d-md-inline\">Trigger Chaos</span>\n      </Button>\n    );\n  }\n  return null;\n};\n","import React from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport { Plane } from \"../../components/magic/Plane\";\nimport { ChaosButton } from \"./ChaosButton\";\n\nexport const TripleChaosModal = ({\n  open,\n  revealedCards,\n  onHide,\n  chaosClick,\n  close,\n}) => {\n  if (revealedCards && open) {\n    const revealedPlanes = revealedCards.filter(\n      (c) => c.type_line.search(\"Plane\") >= 0\n    );\n    return (\n      <Modal\n        show={!!open}\n        onHide={onHide}\n        size=\"md\"\n        backdrop={true}\n        dialogClassName=\"bg-secondary\"\n      >\n        <Modal.Header className=\"flex-column text-center text-white noselect\">\n          <div className=\"modal-title h5 mx-auto\">\n            <i className=\"ms ms-chaos mr-1\" />\n            <i className=\"ms ms-chaos mr-1\" />\n            <i className=\"ms ms-chaos mr-1\" />\n            <span className=\"mx-1\">Triple Chaos</span>\n            <i className=\"ms ms-chaos ml-1\" />\n            <i className=\"ms ms-chaos ml-1\" />\n            <i className=\"ms ms-chaos ml-1\" />\n          </div>\n          <div className=\"mx-auto\">\n            <small className=\"text-center\">You Pick Order</small>\n          </div>\n        </Modal.Header>\n        <Modal.Body className=\"text-center\">\n          {revealedPlanes.map((c) => (\n            <React.Fragment key={c.deck_card_id}>\n              <Plane card={c}>\n                <ChaosButton card={c} onClick={(c) => chaosClick(c)} />\n              </Plane>\n            </React.Fragment>\n          ))}\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"info\" block aria-label=\"Close\" onClick={close}>\n            Done\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n\n  return null;\n};\n","import React, { useContext } from \"react\";\nimport { useLocalState } from \"../hooks/useLocalState\";\n\nexport const GameContext = React.createContext({});\nexport const useGameContext = () => useContext(GameContext);\n\nexport const GameProvider = ({ prefix = null, children }) => {\n  const [currentCard, setCurrentCard] = useLocalState(\n    `${prefix}-currentCard`,\n    null\n  );\n  const [revealedCards, setRevealedCards] = useLocalState(\n    `${prefix}-revealedCards`,\n    []\n  );\n  const [additionalCards, setAdditionalCards] = useLocalState(\n    `${prefix}-additionalCards`,\n    []\n  );\n  const [scryCards, setScryCards] = useLocalState(`${prefix}-scryCards`, []);\n\n  const clearCurrentCard = () => setCurrentCard(null);\n  const clearRevealedCards = () => setRevealedCards([]);\n  const clearAdditionalCards = () => setAdditionalCards([]);\n  const clearScryCards = () => setScryCards([]);\n  const reset = () => {\n    clearCurrentCard();\n    clearRevealedCards();\n    clearAdditionalCards();\n    clearScryCards();\n  };\n\n  return (\n    <GameContext.Provider\n      value={{\n        prefix,\n        currentCard,\n        revealedCards,\n        additionalCards,\n        scryCards,\n        setCurrentCard,\n        setRevealedCards,\n        setAdditionalCards,\n        setScryCards,\n        clearCurrentCard,\n        clearRevealedCards,\n        clearAdditionalCards,\n        clearScryCards,\n        reset,\n      }}\n    >\n      {children}\n    </GameContext.Provider>\n  );\n};\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { Alert, Button, Fade } from \"react-bootstrap\";\nimport { PlanechaseHelmet } from \"./Helmet\";\nimport { shuffleArray } from \"../../util/shuffleArray\";\nimport { hasCustomProperty } from \"../../mtg/card.js\";\nimport { getAllPlanechaseCards } from \"../../util/api.js\";\nimport { Loading } from \"../../components/Loading\";\nimport { Confirm } from \"../../components/Confirm\";\nimport { Plane } from \"../../components/magic/Plane\";\nimport { PlanarDie } from \"../../components/magic/planar-die/PlanarDie\";\nimport { DoubleFaceButton } from \"../../components/magic/Buttons\";\nimport { useDeckContext } from \"../../mtg/DeckContext\";\nimport { History } from \"../../components/game/History\";\nimport { Deck } from \"../../components/game/Deck\";\nimport { DevTools } from \"../../components/DevTools\";\nimport { ActionButton } from \"../../components/game/ActionButton\";\nimport { ScryModal } from \"./ScryModal\";\nimport { ChaosButton } from \"./ChaosButton\";\nimport { TripleChaosModal } from \"./TripleChaosModal\";\nimport { useGameContext } from \"../../mtg/GameContext\";\nimport { useLocalState } from \"../../hooks/useLocalState\";\n\nexport const Planechase = () => {\n  const [loading, setLoading] = useState(true);\n  const [planes, setPlanes] = useState([]);\n  const [tripleChaosModalOpen, setTripleChaosModalOpen] = useState(false);\n  const [scryModalOpen, setScryModalOpen] = useState(false);\n  const [showPlanarDie, setShowPlanarDie] = useLocalState(\"planar-die\", true);\n\n  const game = useGameContext();\n  const { currentCard, additionalCards, revealedCards, scryCards } = game;\n\n  const deck = useDeckContext();\n  const history = deck.history;\n\n  const planeswalkDisabled = !!hasCustomProperty(\"top-5\", currentCard);\n\n  const fetchPlanes = useCallback(async () => {\n    const newPlanes = await getAllPlanechaseCards();\n    setPlanes([...newPlanes]);\n    setLoading(false);\n  }, [setPlanes, setLoading]);\n\n  useEffect(() => {\n    if (planes && planes.length <= 0) {\n      fetchPlanes();\n    }\n  }, [planes, fetchPlanes]);\n\n  useEffect(() => {\n    if (planes?.length > 0 && !deck.isInit) {\n      deck.initDeck(planes, true);\n    }\n  }, [planes, deck]);\n\n  useEffect(() => {\n    const open =\n      scryCards.length > 0 && !!hasCustomProperty(\"scry-1\", currentCard);\n    if (open) {\n      setScryModalOpen(open);\n    }\n  }, [setScryModalOpen, scryCards, currentCard]);\n\n  useEffect(() => {\n    const open =\n      revealedCards.length > 0 &&\n      !!hasCustomProperty(\"triple-chaos\", currentCard);\n    if (open) {\n      setTripleChaosModalOpen(open);\n    }\n  }, [setTripleChaosModalOpen, revealedCards, currentCard]);\n\n  const planeswalk = ({ card }) => {\n    const newCard = card || deck.drawCard();\n    game.setCurrentCard(newCard);\n    let newRevealedCards = [];\n    let newAdditionalCards = [];\n    if (hasCustomProperty(\"two-planes\", newCard)) {\n      newRevealedCards = deck.revealCards(2, true);\n      deck.removeCards(newRevealedCards);\n      const revealedPlanes = newRevealedCards.filter(\n        (c) => c.type_line.search(\"Plane\") >= 0\n      );\n      const revealedPhenomenon = newRevealedCards.filter(\n        (c) => c.type_line.search(\"Phenomenon\") >= 0\n      );\n      revealedPlanes.forEach((c) => deck.updateHistory(c));\n      deck.addCardsToBottom(revealedPhenomenon);\n      newRevealedCards = [];\n      newAdditionalCards = revealedPlanes;\n    }\n\n    if (hasCustomProperty(\"top-5\", newCard)) {\n      newRevealedCards = deck.revealCards(5, true);\n      deck.removeCards(newRevealedCards);\n    }\n\n    game.setRevealedCards(newRevealedCards);\n    game.setAdditionalCards(newAdditionalCards);\n  };\n\n  const reset = async () => {\n    setLoading(true);\n    fetchPlanes();\n    deck.reInit();\n    game.reset();\n    setLoading(false);\n  };\n\n  const undo = async () => {\n    const lastCard = deck.undoDraw();\n    game.reset();\n    if (lastCard) {\n      game.setCurrentCard(lastCard);\n    }\n  };\n\n  const triggerChaos = (card) => {\n    console.log(\"Chaos Triggered\");\n    if (hasCustomProperty(\"triple-chaos\", card)) {\n      const newRevealedCards = deck.revealCards(3, true);\n      deck.removeCards(newRevealedCards);\n      const shuffledCards = shuffleArray(newRevealedCards.slice());\n      deck.addCardsToBottom(shuffledCards);\n      game.setRevealedCards(newRevealedCards);\n      setTripleChaosModalOpen(true);\n    }\n\n    if (hasCustomProperty(\"scry-1\", card)) {\n      if (!scryCards || scryCards.length === 0) {\n        const newScryCards = deck.revealCards(1, false);\n        deck.removeCards(newScryCards);\n        game.setScryCards(newScryCards);\n        setScryModalOpen(true);\n      }\n    }\n  };\n\n  const renderTwoPlanes = () => {\n    if (hasCustomProperty(\"two-planes\", currentCard)) {\n      const revealedPlanes = additionalCards.filter(\n        (c) => c.type_line.search(\"Plane\") >= 0\n      );\n      return (\n        <div>\n          <Alert variant=\"info\" className=\"text-center mb-0\">\n            <i className=\"ms ms-planeswalker mx-2\" />\n            You Are On Both Planes\n            <i className=\"ms ms-planeswalker mx-2\" />\n          </Alert>\n          {revealedPlanes.map((c) => (\n            <React.Fragment key={c.deck_card_id}>\n              <Plane card={c} displayActions=\"true\">\n                <ChaosButton card={c} onClick={triggerChaos} />\n              </Plane>\n            </React.Fragment>\n          ))}\n        </div>\n      );\n    }\n  };\n\n  const selectPlane = (card) => {\n    const restCards = revealedCards.filter(\n      (c) => c.deck_card_id !== card.deck_card_id\n    );\n    const shuffledCards = shuffleArray(restCards.slice());\n    deck.addCardsToBottom([...shuffledCards]);\n    game.clearRevealedCards();\n    setTimeout(() => planeswalk({ card }));\n  };\n\n  const renderFivePlanes = () => {\n    if (hasCustomProperty(\"top-5\", currentCard)) {\n      console.log(\"Render 5 - Revealed Cards\", revealedCards);\n      const revealedPlanes = revealedCards.filter(\n        (c) => c.type_line.search(\"Plane\") >= 0\n      );\n      console.log(\"Render 5 - Revealed Planes\", revealedPlanes);\n      return (\n        <div>\n          <Alert variant=\"info\" className=\"text-center mb-0\">\n            <i className=\"ms ms-planeswalker mx-2\" />\n            Pick a Plane to Planeswalk To\n            <i className=\"ms ms-planeswalker mx-2\" />\n          </Alert>\n          {revealedPlanes.map((c) => (\n            <div key={c.deck_card_id}>\n              <Plane card={c}>\n                <Button\n                  onClick={() => selectPlane(c)}\n                  variant=\"primary\"\n                  className=\"btn-translucent\"\n                  size=\"lg\"\n                >\n                  <i className=\"ms ms-planeswalker mx-2\" />\n                  <span className=\"mx-2\">Planeswalk</span>\n                </Button>\n              </Plane>\n            </div>\n          ))}\n        </div>\n      );\n    }\n  };\n\n  const _tripleChaosModalClose = () => {\n    game.clearRevealedCards();\n    setTripleChaosModalOpen(false);\n  };\n\n  const _scryTop = () => {\n    deck.addCardsToTop(scryCards);\n    console.log(\"Scry Top\", scryCards);\n    game.clearScryCards();\n    setScryModalOpen(false);\n  };\n\n  const _scryBottom = () => {\n    deck.addCardsToBottom(scryCards);\n    console.log(\"Scry Bottom\", scryCards);\n    game.clearScryCards();\n    setScryModalOpen(false);\n  };\n\n  return (\n    <div className=\"planechase\">\n      <PlanechaseHelmet planes={planes} cardType={Plane} />\n      <ActionButton\n        text=\"Planeswalk\"\n        onClick={planeswalk}\n        disabled={planeswalkDisabled || loading}\n        icon={<i className=\"ms ms-planeswalker ms-2x mx-2\" />}\n      />\n      {loading ? (\n        <Loading className=\"text-muted\" />\n      ) : (\n        <div className=\"mb-2\">\n          {currentCard ? (\n            <Fade key={currentCard.deck_card_id} timeout={100}>\n              <Plane card={currentCard} displayActions=\"true\">\n                <ChaosButton card={currentCard} onClick={triggerChaos} />\n              </Plane>\n            </Fade>\n          ) : (\n            <Plane />\n          )}\n        </div>\n      )}\n      {renderTwoPlanes()}\n      {renderFivePlanes()}\n\n      <TripleChaosModal\n        open={tripleChaosModalOpen}\n        revealedCards={revealedCards}\n        onHide={_tripleChaosModalClose}\n        chaosClick={(c) => triggerChaos(c)}\n        close={_tripleChaosModalClose}\n      />\n\n      <ScryModal\n        scryCards={scryCards}\n        open={scryModalOpen}\n        onScryTop={() => _scryTop()}\n        onScryBottom={() => _scryBottom()}\n      />\n      <History history={history} CardType={Plane} />\n      <p className=\"text-center my-3 noselect\">\n        There are {deck.deck ? deck.deck.length : 0} cards remaining.\n      </p>\n      <Confirm\n        onConfirm={reset}\n        headerText=\"Reset Planes?\"\n        triggerText=\"Reset\"\n        confirmText=\"Reset\"\n        confirmVariant=\"danger\"\n        triggerButtonParams={{ variant: \"danger\", block: true }}\n      />\n      <DevTools>\n        <Button onClick={undo} variant=\"warning\" block>\n          Undo\n        </Button>\n        <Deck CardType={Plane} />\n        <DoubleFaceButton\n          text=\"Planar Die\"\n          onClick={() => setShowPlanarDie(!showPlanarDie)}\n          enabled={showPlanarDie}\n        />\n      </DevTools>\n      {showPlanarDie && !planeswalkDisabled && (\n        <div className=\"position-fixed\" style={{ bottom: \"5px\", right: \"5px\" }}>\n          <PlanarDie rollDone={(face) => console.log(`Rolled: ${face}`)} />\n        </div>\n      )}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\n\nexport const ArchenemyHelmet = ({ schemes }) => {\n  return (\n    <Helmet title=\"Archenemy\">\n      <link\n        rel=\"shortcut icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/archenemy.ico\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/archenemy_256.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"64x64\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/archenemy_64.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"128x128\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/archenemy_128.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"256x256\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/archenemy_256.png\"}\n      />\n      <link\n        rel=\"manifest\"\n        href={process.env.PUBLIC_URL + \"/archenemy-manifest.json\"}\n      />\n      {schemes &&\n        schemes.map((p) => (\n          <link\n            rel=\"preload\"\n            href={p.image_uris[\"large\"]}\n            as=\"image\"\n            key={p.id}\n          />\n        ))}\n    </Helmet>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/archenemy-back.db7ab250.jpg\";","import React, { useState } from \"react\";\nimport { Card, ListGroup, Modal } from \"react-bootstrap\";\nimport back from \"../../images/archenemy-back.jpg\";\nimport { Counter } from \"./Counter\";\nimport \"./planes.scss\";\n\nimport { hasCustomProperty } from \"../../mtg/card.js\";\nimport { CardText } from \"./CardText\";\nimport cn from \"classnames\";\nimport { useSettings } from \"../../hooks/useSettings\";\n\nexport const Scheme = ({ listDisplay, card, displayActions, children }) => {\n  const [modalOpen, setModalOpen] = useState(false);\n\n  const settings = useSettings();\n  const { displayImages, displayGatherer } = settings;\n\n  const hasCounters = hasCustomProperty(\"counter\", card);\n  const emptyChildren = children?.type === null;\n\n  const imageURI = card?.image_uris[\"large\"] || back;\n\n  const counter = displayActions && hasCounters && <Counter card={card} />;\n\n  const image = displayImages && (\n    <Card.Img\n      variant=\"top\"\n      width=\"100%\"\n      src={imageURI}\n      className=\"mtg-card mtg-card-scheme\"\n    />\n  );\n  const toggleModal = () => {\n    setModalOpen((isOpen) => !isOpen);\n  };\n\n  const renderBody = () => {\n    const text = CardText({ card });\n    const hasBody = !!text;\n\n    return hasBody && <Card.Body>{text}</Card.Body>;\n  };\n\n  const renderActions = () => {\n    if (displayGatherer && card) {\n      return (\n        <Card.Footer>\n          <Card.Link\n            href={card.related_uris[\"gatherer\"]}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Gatherer\n          </Card.Link>\n        </Card.Footer>\n      );\n    }\n  };\n\n  const renderComponents = () => {\n    if (displayImages) {\n      return (\n        <Card.ImgOverlay\n          className={cn(\"text-center scheme-overlay\", {\n            \"child-overlay\": !emptyChildren,\n            \"counter-overlay\": emptyChildren && hasCounters,\n          })}\n        >\n          <Card.Title className=\"text-center pt-5 mt-sm-5\">\n            {counter}\n            {children}\n          </Card.Title>\n        </Card.ImgOverlay>\n      );\n    } else {\n      return (\n        <Card.Body className=\"text-center pb-0\">\n          {counter}\n          {children}\n        </Card.Body>\n      );\n    }\n  };\n\n  if (listDisplay) {\n    return (\n      <>\n        <ListGroup.Item variant=\"dark\" onClick={toggleModal}>\n          {card.name}\n        </ListGroup.Item>\n        <Modal\n          show={modalOpen}\n          onHide={toggleModal}\n          size=\"md\"\n          backdrop={true}\n          dialogClassName=\"modal-content-no-border\"\n        >\n          <Modal.Body className=\"p-0\" centered=\"true\">\n            <Scheme card={card} />\n            {children}\n          </Modal.Body>\n        </Modal>\n      </>\n    );\n  } else {\n    return (\n      <Card bg=\"black\" text=\"light\" className=\"mtg-scheme-card\">\n        {image}\n        {renderComponents()}\n        {renderBody()}\n        {renderActions()}\n      </Card>\n    );\n  }\n};\n","import React from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { hasCustomProperty } from \"../../mtg/card.js\";\n\nexport const AbandonButton = ({ card, onClick }) => {\n  const isOngoing = card.type_line === \"Ongoing Scheme\";\n  if (isOngoing && !hasCustomProperty(\"unabandonable\", card)) {\n    return (\n      <Button\n        onClick={() => onClick(card)}\n        variant=\"danger\"\n        size=\"lg\"\n        className=\"btn-translucent\"\n      >\n        <h2 className=\"mb-0\">\n          <i className=\"ss ss-bok ss-2x ss-grad ss-rare mx-2\" />\n          <span className=\"mx-2 d-none d-md-inline\">Abandon Scheme</span>\n        </h2>\n      </Button>\n    );\n  }\n  return null;\n};\n","import React from \"react\";\nimport { Card } from \"react-bootstrap\";\n\nconst deckIcon = (name, type = \"ss-mythic ss-grad\") => {\n  switch (name) {\n    case \"All Schemes\":\n      return <i className={`ss ${type} ss-lea`}></i>;\n    case \"Custom Deck\":\n      return <i className={`ss ${type} ss-chr`}></i>;\n    case \"Assemble the Doomsday Machine\":\n      return <i className={`ss ${type} ss-usg`}></i>;\n    case \"Scorch the World with Dragonfire\":\n      return <i className={`ss ${type} ss-scg`}></i>;\n    case \"Trample Civilization Underfoot\":\n      return <i className={`ss ${type} ss-c20`}></i>;\n    case \"Bring About the Undead Apocalypse\":\n      return <i className={`ss ${type} ss-pd3`}></i>;\n    case \"Archenemy Nicol Bolas\":\n      return <i className={`ss ${type} ss-hou`}></i>;\n    default:\n      return null;\n  }\n};\nexport const DeckCardTitle = ({ name }) => (\n  <Card.Title className=\"d-flex\">\n    <div className=\"h3 text-center align-self-center\">{deckIcon(name)}</div>\n    <div className=\"flex-grow-1\">\n      <h3 className=\"text-center\">{name}</h3>\n    </div>\n    <div className=\"h3 text-center align-self-center\">{deckIcon(name)}</div>\n  </Card.Title>\n);\n","export const getDeckList = () => {\n  return DECKS.map((s) => s.name);\n};\n\nexport const getCardList = (deckname, schemes) => {\n  const deck = DECKS.find((s) => s.name === deckname);\n  return deck.cards.map((c) => {\n    const scheme = schemes.find((s) => s.name === c[0]);\n    const clonedCard = JSON.parse(JSON.stringify(scheme));\n    clonedCard.count = c[1];\n    return clonedCard;\n  });\n};\nconst DECKS = [\n  {\n    name: \"Assemble the Doomsday Machine\",\n    cards: [\n      [\"All in Good Time\", 1],\n      [\"Behold the Power of Destruction\", 1],\n      [\"Embrace My Diabolical Vision\", 1],\n      [\"Feed the Machine\", 2],\n      [\"I Delight in Your Convulsions\", 1],\n      [\"I Know All, I See All\", 2],\n      [\"Ignite the Cloneforge!\", 2],\n      [\"Introductions Are in Order\", 1],\n      [\"The Iron Guardian Stirs\", 2],\n      [\"My Genius Knows No Bounds\", 1],\n      [\"Nothing Can Stop Me Now\", 1],\n      [\"The Pieces Are Coming Together\", 2],\n      [\"Realms Befitting My Majesty\", 1],\n      [\"Your Fate Is Thrice Sealed\", 1],\n      [\"Your Puny Minds Cannot Fathom\", 1],\n    ],\n  },\n  {\n    name: \"Scorch the World with Dragonfire\",\n    cards: [\n      [\"All Shall Smolder in My Wake\", 2],\n      [\"Approach My Molten Realm\", 1],\n      [\"The Fate of the Flammable\", 1],\n      [\"I Bask in Your Silent Awe\", 2],\n      [\"I Delight in Your Convulsions\", 1],\n      [\"Introductions Are in Order\", 1],\n      [\"Know Naught but Fire\", 1],\n      [\"Look Skyward and Despair\", 2],\n      [\"My Crushing Masterstroke\", 1],\n      [\"My Wish Is Your Command\", 2],\n      [\"Realms Befitting My Majesty\", 1],\n      [\"Tooth, Claw, and Tail\", 1],\n      [\"Which of You Burns Brightest?\", 2],\n      [\"Your Fate Is Thrice Sealed\", 1],\n      [\"Your Puny Minds Cannot Fathom\", 1],\n    ],\n  },\n  {\n    name: \"Trample Civilization Underfoot\",\n    cards: [\n      [\"Every Last Vestige Shall Rot\", 2],\n      [\"Evil Comes to Fruition\", 1],\n      [\"I Call on the Ancient Magics\", 1],\n      [\"I Delight in Your Convulsions\", 1],\n      [\"Into the Earthen Maw\", 1],\n      [\"Introductions Are in Order\", 1],\n      [\"May Civilization Collapse\", 1],\n      [\"Nature Demands an Offering\", 2],\n      [\"Nature Shields Its Own\", 2],\n      [\"Realms Befitting My Majesty\", 1],\n      [\"Roots of All Evil\", 2],\n      [\"The Very Soil Shall Shake\", 1],\n      [\"Your Fate Is Thrice Sealed\", 1],\n      [\"Your Puny Minds Cannot Fathom\", 1],\n      [\"Your Will Is Not Your Own\", 2],\n    ],\n  },\n  {\n    name: \"Bring About the Undead Apocalypse\",\n    cards: [\n      [\"Choose Your Champion\", 2],\n      [\"Dance, Pathetic Marionette\", 1],\n      [\"The Dead Shall Serve\", 2],\n      [\"Every Hope Shall Vanish\", 2],\n      [\"I Delight in Your Convulsions\", 2],\n      [\"Introductions Are in Order\", 1],\n      [\"Mortal Flesh Is Weak\", 1],\n      [\"My Undead Horde Awakens\", 1],\n      [\"Only Blood Ends Your Nightmares\", 2],\n      [\"Realms Befitting My Majesty\", 1],\n      [\"Rotted Ones, Lay Siege\", 2],\n      [\"Surrender Your Thoughts\", 1],\n      [\"Your Fate Is Thrice Sealed\", 1],\n      [\"Your Puny Minds Cannot Fathom\", 1],\n    ],\n  },\n  {\n    name: \"Archenemy Nicol Bolas\",\n    cards: [\n      [\"Because I Have Willed It\", 1],\n      [\"Behold My Grandeur\", 1],\n      [\"Bow to My Command\", 1],\n      [\"Choose Your Demise\", 1],\n      [\"Delight in the Hunt\", 1],\n      [\"Every Dream a Nightmare\", 1],\n      [\"For Each of You, a Gift\", 1],\n      [\"Know Evil\", 1],\n      [\"Make Yourself Useful\", 1],\n      [\"The Mighty Will Fall\", 1],\n      [\"My Forces Are Innumerable\", 1],\n      [\"My Laughter Echoes\", 1],\n      [\"No One Will Hear Your Cries\", 1],\n      [\"Pay Tribute to Me\", 1],\n      [\"Power Without Equal\", 1],\n      [\"A Reckoning Approaches\", 1],\n      [\"There Is No Refuge\", 1],\n      [\"This World Belongs to Me\", 1],\n      [\"What's Yours Is Now Mine\", 1],\n      [\"When Will You Learn?\", 1],\n    ],\n  },\n];\n","import React from \"react\";\nimport { Accordion, Badge, Button, Card, ListGroup } from \"react-bootstrap\";\nimport { getDeckList, getCardList } from \"../../mtg/prebuilt-decks\";\nimport { Scheme } from \"../../components/magic/Scheme\";\nimport { DeckCardTitle } from \"./DeckCardTitle\";\n\nexport const Prebuilts = ({ schemes, onSelectDeck }) => {\n  const prebuilts = getDeckList();\n  const prebuiltItems = prebuilts.map((prebuilt, i) => {\n    const cardList = getCardList(prebuilt, schemes);\n    const cardListItems = cardList.map((card, i) => (\n      <ListGroup.Item key={i} variant=\"dark\">\n        <Scheme card={card} />\n        <h1 className=\"text-center\">\n          <Badge pill variant={card.count > 0 ? \"success\" : \"dark\"}>\n            x{card.count}\n          </Badge>\n        </h1>\n      </ListGroup.Item>\n    ));\n    return (\n      <Accordion key={i}>\n        <Card>\n          <Card.Body>\n            <DeckCardTitle name={prebuilt} />\n            <Accordion.Toggle\n              as={Button}\n              block\n              eventKey={`prebuilt-${i}`}\n              variant=\"secondary\"\n            >\n              Decklist\n            </Accordion.Toggle>\n            <Accordion.Collapse eventKey={`prebuilt-${i}`}>\n              <ListGroup>{cardListItems}</ListGroup>\n            </Accordion.Collapse>\n            <Button\n              block\n              variant=\"success\"\n              onClick={() => onSelectDeck(prebuilt, cardList)}\n            >\n              Use Deck\n            </Button>\n          </Card.Body>\n        </Card>\n      </Accordion>\n    );\n  });\n\n  return <>{prebuiltItems}</>;\n};\n","import React, { useEffect, useState } from \"react\";\nimport {\n  Accordion,\n  Alert,\n  Badge,\n  Button,\n  ButtonGroup,\n  Card,\n  ListGroup,\n} from \"react-bootstrap\";\nimport { Scheme } from \"../../components/magic/Scheme\";\nimport { LoyaltyButtonGroup } from \"../../components/magic/Buttons\";\nimport { DeckCardTitle } from \"./DeckCardTitle\";\n\nexport const CustomDeckBuilder = ({ schemes, onSelectDeck }) => {\n  const [customDeck, setCustomDeck] = useState([]);\n  const deckName = \"Custom Deck\";\n\n  useEffect(() => {\n    const newCustomDeck = schemes.map((scheme) => {\n      return { ...scheme, count: 0 };\n    });\n    setCustomDeck(newCustomDeck);\n  }, [schemes, setCustomDeck]);\n\n  const customDeckSize = () => {\n    const reducer = (a, b) => a + b;\n    return customDeck.map((c) => c.count).reduce(reducer, 0);\n  };\n\n  const resetCustomDeck = () => {\n    customDeck.forEach((c) => (c.count = 0));\n    setCustomDeck([...customDeck]);\n  };\n\n  const incrementCount = (card) => {\n    customDeck.forEach((c) => {\n      if (c.id === card.id) {\n        c.count += 1;\n        c.count = Math.min(c.count, 2);\n      }\n    });\n    setCustomDeck([...customDeck]);\n  };\n\n  const decrementCount = (card) => {\n    customDeck.forEach((c) => {\n      if (c.id === card.id) {\n        c.count -= 1;\n        c.count = Math.max(c.count, 0);\n      }\n    });\n    setCustomDeck([...customDeck]);\n  };\n\n  const cardListItems = customDeck.map((card) => (\n    <ListGroup.Item key={card.id} variant=\"dark\" className=\"noselect\">\n      <Scheme card={card} />\n      <div className=\"text-center\">\n        <h1>\n          <Badge pill variant={card.count > 0 ? \"success\" : \"dark\"}>\n            x{card.count}\n          </Badge>\n        </h1>\n        <LoyaltyButtonGroup\n          downProps={{\n            disabled: card.count <= 0,\n            onClick: () => decrementCount(card),\n          }}\n          upProps={{\n            disabled: card.count >= 2,\n            onClick: () => incrementCount(card),\n          }}\n        />\n      </div>\n    </ListGroup.Item>\n  ));\n\n  return (\n    <Accordion>\n      <Card className=\"noselect\">\n        <Card.Body>\n          <DeckCardTitle name={deckName} />\n          <Accordion.Toggle\n            as={Button}\n            block\n            eventKey=\"custom-deck-toggle\"\n            variant=\"secondary\"\n          >\n            Build Custom\n          </Accordion.Toggle>\n          <Accordion.Collapse eventKey=\"custom-deck-toggle\">\n            <>\n              <div className=\"fixed-top mt-1 ml-1 text-left\">\n                <Alert variant=\"info\" className=\"clearfix\">\n                  <h4 className=\"float-left\">\n                    Custom Deck Size: {customDeckSize()}\n                  </h4>\n                  <ButtonGroup className=\"float-right\">\n                    <Button variant=\"danger\" onClick={resetCustomDeck}>\n                      Reset\n                    </Button>\n                    <Button\n                      variant=\"success\"\n                      onClick={() => onSelectDeck(\"Custom\", customDeck)}\n                    >\n                      Use Deck\n                    </Button>\n                  </ButtonGroup>\n                </Alert>\n              </div>\n\n              <ListGroup>{cardListItems}</ListGroup>\n            </>\n          </Accordion.Collapse>\n          <Button\n            block\n            variant=\"success\"\n            onClick={() => onSelectDeck(\"Custom\", customDeck)}\n          >\n            Use Custom Deck\n          </Button>\n        </Card.Body>\n      </Card>\n    </Accordion>\n  );\n};\n","import React from \"react\";\nimport { Button, Card } from \"react-bootstrap\";\nimport { DeckCardTitle } from \"./DeckCardTitle\";\nimport { Prebuilts } from \"./Prebuilts\";\nimport { CustomDeckBuilder } from \"./CustomDeckBuilder\";\n\nexport const DeckSelect = ({ schemes, onSelectDeck }) => (\n  <>\n    <Card className=\"noselect\">\n      <Card.Body>\n        <DeckCardTitle name={\"All Schemes\"} />\n        <Button\n          block\n          variant=\"success\"\n          onClick={() => onSelectDeck(\"All\", schemes)}\n        >\n          Use All\n        </Button>\n      </Card.Body>\n    </Card>\n    <Prebuilts schemes={schemes} onSelectDeck={onSelectDeck} />\n    <CustomDeckBuilder schemes={schemes} onSelectDeck={onSelectDeck} />\n  </>\n);\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { Alert, Button, Fade, Jumbotron, Container } from \"react-bootstrap\";\n\nimport { ArchenemyHelmet } from \"./Helmet\";\nimport { getAllArchenemyCards } from \"../../util/api.js\";\nimport { Scheme } from \"../../components/magic/Scheme\";\nimport { Confirm } from \"../../components/Confirm\";\nimport { Loading } from \"../../components/Loading\";\n\nimport { useDeckContext } from \"../../mtg/DeckContext\";\nimport { History } from \"../../components/game/History\";\nimport { Deck } from \"../../components/game/Deck\";\nimport { DevTools } from \"../../components/DevTools\";\nimport { ActionButton } from \"../../components/game/ActionButton\";\nimport { AbandonButton } from \"./AbandonButton\";\nimport { DeckSelect } from \"./DeckSelect\";\nimport { useGameContext } from \"../../mtg/GameContext\";\nimport { useLocalState } from \"../../hooks/useLocalState\";\n\nexport const Archenemy = () => {\n  const [loading, setLoading] = useState(true);\n  const [schemes, setSchemes] = useState([]);\n  const [deckSelection, setDeckSelection] = useState(true);\n\n  const game = useGameContext();\n  const currentCard = game.currentCard;\n  const ongoingSchemes = game.additionalCards;\n\n  const deck = useDeckContext();\n\n  const [abandonedOngoing, setAbandonedOnGoing] = useLocalState(\n    `archenemy-abandonedOngoing`,\n    false\n  );\n\n  const fetchSchemes = useCallback(async () => {\n    const newSchemes = await getAllArchenemyCards();\n    setSchemes(newSchemes);\n    setLoading(false);\n  }, [setSchemes, setLoading]);\n\n  useEffect(() => {\n    if (schemes && schemes.length <= 0) {\n      fetchSchemes();\n    }\n  }, [schemes, fetchSchemes]);\n\n  useEffect(() => {\n    setDeckSelection(!deck.isInit);\n  }, [deck.isInit]);\n\n  const scheme = () => {\n    if (currentCard) {\n      if (currentCard.type_line === \"Ongoing Scheme\") {\n        ongoingSchemes.push(currentCard);\n      }\n    }\n    const newCard = deck.drawCard();\n    game.setCurrentCard(newCard);\n    game.setAdditionalCards(ongoingSchemes);\n    game.setCurrentCard(newCard);\n    setAbandonedOnGoing(false);\n  };\n\n  const reset = async () => {\n    setLoading(true);\n    fetchSchemes();\n    deck.reInit();\n    game.reset();\n    setAbandonedOnGoing(false);\n    setLoading(false);\n    setDeckSelection(true);\n  };\n\n  const undo = async () => {\n    const lastCard = deck.undoDraw();\n    if (lastCard) {\n      game.setCurrentCard(lastCard);\n      setAbandonedOnGoing(false);\n    }\n  };\n\n  const renderGamePlay = () => {\n    const history = deck.history;\n\n    return (\n      <>\n        <ActionButton\n          text=\"Scheme\"\n          onClick={scheme}\n          disabled={loading}\n          icon={<i className=\"ss ss-arc ss-3x mx-2\" />}\n        />\n\n        {loading ? (\n          <Loading className=\"text-muted\" />\n        ) : (\n          <div className=\"pt-2 mb-2 d-flex justify-content-center\">\n            {abandonedOngoing ? (\n              <Jumbotron className=\"bg-danger text-center\" fluid>\n                <Container fluid>\n                  <h1>Current Scheme Has Been Foiled!</h1>\n                </Container>\n              </Jumbotron>\n            ) : currentCard ? (\n              <Fade key={currentCard?.deck_card_id} timeout={100}>\n                <Scheme card={currentCard} displayActions=\"true\">\n                  <AbandonButton card={currentCard} onClick={abandonScheme} />\n                </Scheme>\n              </Fade>\n            ) : (\n              <Scheme />\n            )}\n          </div>\n        )}\n\n        {renderOngoingSchemes()}\n\n        <History history={history} CardType={Scheme} />\n\n        <p className=\"text-center my-3 noselect\">\n          There are {deck.deck ? deck.deck.length : 0} cards remaining.\n        </p>\n        <Confirm\n          onConfirm={reset}\n          headerText=\"Reset Schemes?\"\n          triggerText=\"Reset\"\n          confirmText=\"Reset\"\n          confirmVariant=\"danger\"\n          triggerButtonParams={{ variant: \"danger\", block: true }}\n        />\n      </>\n    );\n  };\n\n  const renderOngoingSchemes = () => {\n    if (ongoingSchemes && ongoingSchemes.length > 0) {\n      return (\n        <>\n          <Alert variant=\"info\" className=\"text-center\">\n            <h5>Ongoing Schemes</h5>\n          </Alert>\n          <div className=\"d-flex justify-content-center flex-wrap \">\n            {ongoingSchemes.map((c) => (\n              <React.Fragment key={c.deck_card_id}>\n                <Scheme card={c} displayActions=\"true\">\n                  <AbandonButton card={c} onClick={abandonScheme} />\n                </Scheme>\n              </React.Fragment>\n            ))}\n          </div>\n        </>\n      );\n    }\n  };\n\n  const abandonScheme = (card) => {\n    if (currentCard?.deck_card_id === card.deck_card_id) {\n      console.log(\"Abandon Current Scheme\", card);\n      game.clearCurrentCard();\n      setAbandonedOnGoing(true);\n    } else {\n      console.log(\"Abandon Scheme\", card);\n      const newOngoing = ongoingSchemes.filter(\n        (s) => s.deck_card_id !== card.deck_card_id\n      );\n      game.setAdditionalCards(newOngoing);\n    }\n  };\n\n  const selectDeck = (name, cards) => {\n    console.log(`Selected ${name}`, cards);\n\n    const newCards = name === \"All\" ? cards : [];\n    cards.forEach((c) => {\n      for (let i = 0; i < c.count; i++) {\n        newCards.push(c);\n      }\n    });\n    deck.initDeck(newCards, true);\n  };\n\n  return (\n    <div className=\"archenemy\">\n      <ArchenemyHelmet schemes={schemes} />\n      {loading ? (\n        <Loading className=\"text-muted\" />\n      ) : deckSelection ? (\n        <DeckSelect\n          schemes={schemes}\n          onSelectDeck={(name, cards) => selectDeck(name, cards)}\n        />\n      ) : (\n        renderGamePlay()\n      )}\n      <DevTools>\n        <Button onClick={undo} variant=\"warning\" block>\n          Undo\n        </Button>\n        <Deck CardType={Scheme} />\n      </DevTools>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\n\nexport const SYBHelmet = () => {\n  return (\n    <Helmet title=\"SYB\">\n      <link\n        rel=\"shortcut icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/starter.ico\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/starter_256.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"64x64\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/starter_64.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"128x128\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/starter_128.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"256x256\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/starter_256.png\"}\n      />\n      <link\n        rel=\"manifest\"\n        href={process.env.PUBLIC_URL + \"/syb-manifest.json\"}\n      />\n    </Helmet>\n  );\n};\n","export const TAGS = [\n  {\n    name: \"Chode Mode\",\n    defaultEnabled: true,\n  },\n  {\n    name: \"Deck Swaps\",\n    defaultEnabled: true,\n  },\n  {\n    name: \"Planechase\",\n    defaultEnabled: true,\n  },\n  {\n    name: \"EDH\",\n    defaultEnabled: true,\n  },\n  {\n    name: \"2 Headed Giant\",\n    defaultEnabled: true,\n  },\n  {\n    name: \"SYB\",\n    defaultEnabled: true,\n  },\n  {\n    name: \"Range 1\",\n    defaultEnabled: true,\n  },\n  {\n    name: \"Free for All\",\n    defaultEnabled: true,\n  },\n  {\n    name: \"Pentacle\",\n    defaultEnabled: true,\n  },\n  {\n    name: \"Secret Partners\",\n    defaultEnabled: true,\n  },\n  {\n    name: \"Archenemy\",\n    defaultEnabled: true,\n  },\n  {\n    name: \"Emperor\",\n    defaultEnabled: true,\n  },\n  {\n    name: \"Teams\",\n    defaultEnabled: false,\n  },\n  {\n    name: \"Star\",\n    defaultEnabled: false,\n  },\n];\n\nconst canAny = (p) => true;\nconst canEven = (p) => p % 2 === 0;\nconst canOdd = (p) => p % 2 === 1;\nconst can2Hg = (p) => p > 2 && canEven(p);\nconst canFreeForAll = (p) => p > 2;\nconst canEmperor = (p) => p >= 6 && p % 3 === 0;\nconst canSecretPartner = (p) => p >= 6 && canEven(p);\nconst canRange1 = (p) => p > 3;\nconst canPentacle = (p) => p >= 5;\nexport const canStar = (p) => p >= 5 && canOdd(p);\nconst canTeams = (p) => p > 2 && canEven(p);\n\nexport const FORMATS = [\n  {\n    id: 1,\n    name: \"Chode Mode\",\n    initial: 0.5,\n    tags: [\"Chode Mode\"],\n    players: canAny,\n  },\n  {\n    id: 2,\n    name: \"Planechase \",\n    initial: 0.5,\n    tags: [\"Planechase\"],\n    players: canAny,\n  },\n  {\n    id: 3,\n    name: \"Planechase EDH\",\n    initial: 0.5,\n    tags: [\"Planechase\", \"EDH\"],\n    players: canAny,\n  },\n  {\n    id: 4,\n    name: \"EDH Free for All\",\n    initial: 0.5,\n    tags: [\"EDH\", \"Free for All\"],\n    players: canFreeForAll,\n  },\n  {\n    id: 5,\n    name: \"EDH SYB\",\n    initial: 0.5,\n    tags: [\"EDH\", \"SYB\"],\n    showSwaps: true,\n    players: canAny,\n  },\n  {\n    id: 6,\n    name: \"EDH SYB Deck Swaps\",\n    displayName: \"EDH SYB\",\n    initial: 0.25,\n    tags: [\"EDH\", \"SYB\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canAny,\n  },\n  {\n    id: 7,\n    name: \"EDH Emperor\",\n    initial: 0.5,\n    tags: [\"EDH\", \"Emperor\"],\n    showSwaps: true,\n    players: canEmperor,\n  },\n  {\n    id: 8,\n    name: \"EDH Emperor Deck Swaps\",\n    displayName: \"EDH Emperor\",\n    initial: 0,\n    tags: [\"EDH\", \"Emperor\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canEmperor,\n  },\n  {\n    id: 9,\n    name: \"2 Headed Giant SYB\",\n    initial: 0.5,\n    tags: [\"2 Headed Giant\"],\n    players: can2Hg,\n  },\n  {\n    id: 10,\n    name: \"2 Headed Giant Free for All\",\n    initial: 0.5,\n    tags: [\"2 Headed Giant\", \"Free for All\"],\n    players: (p) => can2Hg(p) && canFreeForAll(p) && p > 4,\n  },\n  {\n    id: 11,\n    name: \"Emperor\",\n    initial: 0.5,\n    tags: [\"Emperor\"],\n    showSwaps: true,\n    players: canEmperor,\n  },\n  {\n    id: 12,\n    name: \"Emperor Deck Swaps\",\n    displayName: \"Emperor\",\n    initial: 0,\n    tags: [\"Emperor\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canEmperor,\n  },\n  {\n    id: 13,\n    name: \"Range 1\",\n    initial: 0.5,\n    tags: [\"Range 1\"],\n    players: canRange1,\n  },\n  {\n    id: 14,\n    name: \"Free for All\",\n    initial: 0.5,\n    tags: [\"Free for All\"],\n    players: canFreeForAll,\n  },\n  {\n    id: 15,\n    name: \"SYB\",\n    initial: 0.5,\n    tags: [\"SYB\"],\n    showSwaps: true,\n    players: canAny,\n  },\n  {\n    id: 16,\n    name: \"SYB Deck Swaps\",\n    displayName: \"SYB\",\n    initial: 0.5,\n    tags: [\"SYB\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canAny,\n  },\n  {\n    id: 17,\n    name: \"Secret Partners\",\n    initial: 0.5,\n    tags: [\"Secret Partners\"],\n    showSwaps: true,\n    players: canSecretPartner,\n  },\n  {\n    id: 18,\n    name: \"Secret Partners Deck Swaps\",\n    displayName: \"Secret Partners\",\n    initial: 0.5,\n    tags: [\"Secret Partners\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canSecretPartner,\n  },\n  {\n    id: 19,\n    name: \"EDH Secret Partners\",\n    initial: 0.5,\n    tags: [\"EDH\", \"Secret Partners\"],\n    showSwaps: true,\n    players: canSecretPartner,\n  },\n  {\n    id: 20,\n    name: \"EDH Secret Partners Deck Swaps\",\n    displayName: \"EDH Secret Partners\",\n    initial: 0.25,\n    tags: [\"EDH\", \"Secret Partners\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canSecretPartner,\n  },\n  {\n    id: 21,\n    name: \"EDH Pentacle\",\n    initial: 0.5,\n    tags: [\"EDH\", \"Pentacle\"],\n    showSwaps: true,\n    players: canPentacle,\n  },\n  {\n    id: 22,\n    name: \"EDH Pentacle Deck Swaps\",\n    displayName: \"EDH Pentacle\",\n    initial: 0.25,\n    tags: [\"EDH\", \"Pentacle\", \"Deck Swaps\"],\n    players: canPentacle,\n  },\n  {\n    id: 23,\n    name: \"Pentacle\",\n    initial: 0.5,\n    tags: [\"Pentacle\"],\n    showSwaps: true,\n    players: canPentacle,\n  },\n  {\n    id: 24,\n    name: \"Pentacle Deck Swaps\",\n    displayName: \"Pentacle\",\n    initial: 0.5,\n    tags: [\"Pentacle\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canPentacle,\n  },\n  {\n    id: 25,\n    name: \"Archenemy\",\n    initial: 0.5,\n    tags: [\"Archenemy\"],\n    players: (p) => p === 4,\n  },\n  {\n    id: 26,\n    name: \"EDH 2 Headed Giant SYB\",\n    initial: 0.5,\n    tags: [\"EDH\", \"2 Headed Giant\"],\n    players: can2Hg,\n  },\n  {\n    id: 27,\n    name: \"EDH 2 Headed Giant FFA\",\n    initial: 0.5,\n    tags: [\"EDH\", \"2 Headed Giant\", \"Free for All\"],\n    players: (p) => can2Hg(p) && canFreeForAll(p) && p > 4,\n  },\n  {\n    id: 28,\n    name: \"EDH Range 1\",\n    initial: 0.5,\n    tags: [\"EDH\", \"Range 1\"],\n    players: canRange1,\n  },\n  {\n    id: 29,\n    name: \"Teams\",\n    initial: 0.5,\n    tags: [\"Teams\"],\n    players: canTeams,\n  },\n  {\n    id: 30,\n    name: \"EDH Teams\",\n    initial: 0.5,\n    tags: [\"Teams\", \"EDH\"],\n    players: canTeams,\n  },\n  {\n    id: 31,\n    name: \"Star\",\n    initial: 0.5,\n    tags: [\"Star\"],\n    players: canStar,\n  },\n  {\n    id: 32,\n    name: \"EDH Star\",\n    initial: 0.5,\n    tags: [\"Star\", \"EDH\"],\n    players: canStar,\n  },\n];\n\nexport const HIKE_FORMATS = [\n  {\n    id: 33,\n    name: \"Hike Mode\",\n    initial: 0.5,\n    weight: 0.5,\n    tags: [\"Hike Mode\"],\n    showSwaps: true,\n    players: canAny,\n  },\n  {\n    id: 34,\n    name: \"Hike Mode Deck Swaps\",\n    displayName: \"Hike Mode\",\n    initial: 0.5,\n    weight: 0.5,\n    tags: [\"Hike Mode\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canAny,\n  },\n  {\n    id: 35,\n    name: \"EDH Hike Mode\",\n    initial: 0.5,\n    weight: 0.5,\n    tags: [\"EDH\", \"Hike Mode\"],\n    showSwaps: true,\n    players: canAny,\n  },\n  {\n    id: 36,\n    name: \"EDH Hike Mode Deck Swaps\",\n    displayName: \"EDH Hike Mode\",\n    initial: 0.5,\n    weight: 0.5,\n    tags: [\"EDH\", \"Hike Mode\", \"Deck Swaps\"],\n    showSwaps: true,\n    players: canAny,\n  },\n];\n","const SOURCE_COLOR = \"#17a2b8\";\nconst TARGET_COLOR = \"#FF4444\";\n\nexport const cytoStyle = ({ square } = { square: false }) => [\n  {\n    selector: \"node\",\n    style: {\n      padding: \"50%\",\n      width: \"50%\",\n      height: \"50%\",\n      \"background-color\": SOURCE_COLOR,\n      \"text-valign\": \"center\",\n      \"text-halign\": \"center\",\n      content: \"data(label)\",\n    },\n  },\n  {\n    selector: \"node[label]\",\n    style: {\n      label: \"data(label)\",\n      \"font-size\": \"2em\",\n      color: \"white\",\n    },\n  },\n  {\n    selector: \".screw\",\n    style: {\n      width: \"5%\",\n      \"curve-style\": square ? \"unbundled-bezier\" : \"straight\",\n      \"target-arrow-shape\": \"triangle \",\n      \"arrow-scale\": 2.5,\n      \"target-arrow-color\": TARGET_COLOR,\n      \"line-fill\": \"linear-gradient\",\n      \"line-gradient-stop-colors\": [SOURCE_COLOR, TARGET_COLOR],\n      \"z-index\": 2,\n    },\n  },\n  {\n    selector: \".turn\",\n    style: {\n      width: \"2%\",\n      \"curve-style\": \"unbundled-bezier\",\n      \"control-point-distances\": [-20, -25, -20],\n      \"control-point-weights\": [0.25, 0.5, 0.75],\n      \"target-arrow-shape\": \"vee \",\n      \"line-style\": \"dashed\",\n      \"arrow-scale\": 1.5,\n      \"target-arrow-color\": \"#707070\",\n      \"line-color\": \"#707070\",\n      opacity: 0.5,\n      \"z-index\": 1,\n    },\n  },\n  {\n    selector: \"node.highlight\",\n    style: {\n      \"background-color\": \"#218838\",\n      \"border-color\": \"#218838\",\n      \"border-width\": \"2px\",\n    },\n  },\n  {\n    selector: \"node.highlight.incoming\",\n    style: {\n      \"background-color\": SOURCE_COLOR,\n      \"border-color\": SOURCE_COLOR,\n      \"border-width\": \"2px\",\n    },\n  },\n  {\n    selector: \"node.highlight.outgoing\",\n    style: {\n      \"background-color\": TARGET_COLOR,\n      \"border-color\": TARGET_COLOR,\n      \"border-width\": \"2px\",\n    },\n  },\n  {\n    selector: \"node.highlight.outgoing.incoming\",\n    style: {\n      \"border-color\": SOURCE_COLOR,\n      \"border-width\": \"2px\",\n    },\n  },\n  {\n    selector: \"node.semitransparent\",\n    style: { opacity: \"0.5\" },\n  },\n  {\n    selector: \"edge.highlight\",\n    style: {\n      \"curve-style\": \"unbundled-bezier\",\n    },\n  },\n  {\n    selector: \"edge.highlight.incoming\",\n    style: {\n      \"curve-style\": \"unbundled-bezier\",\n      \"target-arrow-color\": SOURCE_COLOR,\n      \"line-gradient-stop-colors\": [SOURCE_COLOR, SOURCE_COLOR],\n      \"z-index\": 3,\n    },\n  },\n  {\n    selector: \"edge.highlight.outgoing\",\n    style: {\n      \"target-arrow-color\": TARGET_COLOR,\n      \"line-gradient-stop-colors\": [TARGET_COLOR, TARGET_COLOR],\n      \"z-index\": 4,\n    },\n  },\n  {\n    selector: \"edge.semitransparent\",\n    style: { opacity: \"0.2\" },\n  },\n];\n","import React, { useRef, useState, useEffect, useCallback } from \"react\";\nimport { Button, ButtonGroup, Col, Row, Spinner } from \"react-bootstrap\";\nimport Dialog from \"react-bootstrap-dialog\";\nimport CytoscapeComponent from \"react-cytoscapejs\";\nimport debounce from \"lodash/debounce\";\n\nimport { shuffleArray } from \"../../util/shuffleArray\";\n\nimport { SYBHelmet } from \"./Helmet\";\nimport { canStar } from \"../formats/formats\";\nimport { cytoStyle } from \"./Cyto\";\nimport {\n  DoubleFaceButton,\n  LoyaltyButtonGroup,\n} from \"../../components/magic/Buttons.js\";\nimport { useLocalState } from \"../../hooks/useLocalState\";\nimport { DevTools } from \"../../components/DevTools.js\";\n\nconst TABLE_SHAPE_SQUARE = \"square\";\nconst TABLE_SHAPE_CIRCLE = \"circle\";\nconst DEFAULT_TABLE_SHAPE = TABLE_SHAPE_CIRCLE;\nconst TARGET_OFFSET = 2;\nconst DEFAULT_PLAYER_COUNT = 4;\nconst DEFAULT_PLAYER_TARGETS = 1;\nconst DEFAULT_LABELS = { 0: \"J\" };\n\nconst circleLayout = { name: \"circle\", nodeDimensionsIncludeLabels: true };\nconst gridLayout = { name: \"grid\", nodeDimensionsIncludeLabels: true, rows: 2 };\n\nexport const SYB = () => {\n  const [playerCount, setPlayerCount] = useLocalState(\n    \"syb-playerCount\",\n    DEFAULT_PLAYER_COUNT\n  );\n  const [playerTargets, setPlayerTargets] = useLocalState(\n    \"syb-playerTargets\",\n    DEFAULT_PLAYER_TARGETS\n  );\n  const [targets, setTargets] = useLocalState(\"syb-targets\", null);\n  const [labels, setLabels] = useLocalState(\"syb-labels\", DEFAULT_LABELS);\n  const [tableShape, setTableShape] = useLocalState(\n    \"syb-tableShape\",\n    DEFAULT_TABLE_SHAPE\n  );\n\n  // Dev Controls: These may only need to be setState\n  const [showTurnEdges, setShowTurnEdges] = useLocalState(\n    \"syb-showTurnEdges\",\n    true\n  );\n  const [starTurn, setStarTurn] = useLocalState(\"syb-starTurn\", false);\n  const [showScrewEdges, setShowScrewEdges] = useLocalState(\n    \"syb-showScrewEdges\",\n    true\n  );\n\n  const [cySet, setCySet] = useState(false);\n  const [loadingDirection, setLoadingDirection] = useState(false);\n\n  const cyContainer = useRef(null);\n  const dialog = useRef(null);\n\n  useEffect(() => {\n    cyContainer.current.nodes().each((d) => {\n      const currentLabel = d.data(\"label\");\n      const playerNumber = d.id().split(\"-\")[1];\n      const newLabel = labels[playerNumber] || currentLabel;\n      if (currentLabel !== newLabel) {\n        d.data(\"label\", newLabel);\n      }\n    });\n  }, [cyContainer, labels]);\n\n  const generateNodes = () => {\n    const players = Array.from(Array(playerCount).keys());\n    return players.map((p) => {\n      const label = labels[p] || p;\n      return { data: { id: `player-${p}`, label, type: \"triangle-tee\" } };\n    });\n  };\n\n  const generateEdges = () => {\n    if (!targets) return [];\n\n    const screwEdges = showScrewEdges\n      ? targets.flatMap((player, i) => {\n          return Array(playerTargets)\n            .fill(1)\n            .map((_, b) => {\n              const targetIndex = (i + b + 1) % playerCount;\n              const target = targets[targetIndex];\n              return {\n                data: {\n                  source: `player-${player}`,\n                  target: `player-${target}`,\n                  label: `Edge from ${player} to ${target}`,\n                },\n                classes: \"screw\",\n              };\n            });\n        })\n      : [];\n\n    const turnEdges = showTurnEdges\n      ? targets.map((_, i) => {\n          const starNum = i + 2;\n          const starTurnTarget =\n            starNum > targets.length\n              ? 1\n              : starNum >= targets.length\n              ? 0\n              : starNum;\n          const normalTurnTarget = i + 1 >= targets.length ? 0 : i + 1;\n          const target =\n            starTurn && canStar(targets.length)\n              ? starTurnTarget\n              : normalTurnTarget;\n          return {\n            data: {\n              source: `player-${i}`,\n              target: `player-${target}`,\n              label: `Turn from ${i} to ${target}`,\n            },\n            classes: \"turn\",\n          };\n        })\n      : [];\n\n    return screwEdges.concat(turnEdges);\n  };\n\n  const regenerateOrder = (c) => {\n    const players = Array.from(Array(c || playerCount).keys());\n    setTargets(shuffleArray(players));\n  };\n\n  const handleCy = (cy) => {\n    const layout = isSquare() ? gridLayout : circleLayout;\n    const SELECT_THRESHOLD = 100;\n\n    // Refresh Layout if needed\n    const refreshLayout = debounce(() => {\n      cy.layout(layout).run();\n    }, SELECT_THRESHOLD);\n\n    const nodeClick = debounce((e) => {\n      const clickedNode = e.target;\n      setLabel(clickedNode.id().split(\"-\")[1]);\n    }, SELECT_THRESHOLD);\n\n    if (!cySet) {\n      cy.on(\"add remove\", () => {\n        refreshLayout();\n      });\n\n      cy.nodes().on(\"tap click\", nodeClick);\n\n      cy.on(\"mouseover touchstart\", \"node\", function (e) {\n        let sel = e.target;\n\n        sel.addClass(\"highlight\");\n\n        const incomers = sel.incomers(\".screw\");\n        const allIncomers = incomers.union(incomers.sources());\n        allIncomers.addClass(\"highlight incoming\");\n\n        const outgoers = sel.outgoers(\".screw\");\n        const allOutgoers = outgoers.union(outgoers.targets());\n        allOutgoers.addClass(\"highlight outgoing\");\n\n        cy.elements()\n          .difference(allOutgoers.union(allIncomers))\n          .not(sel)\n          .addClass(\"semitransparent\");\n      });\n\n      cy.on(\"mouseout touchend\", \"node\", function (e) {\n        cy.elements().removeClass(\n          \"semitransparent highlight incoming outgoing\"\n        );\n      });\n\n      setCySet(true);\n    }\n    cyContainer.current = cy;\n  };\n\n  const setLabel = useCallback(\n    (number) => {\n      console.log(\"Setting label\", number);\n      dialog.current.show({\n        title: \"Who is this?\",\n        bsSize: \"sm\",\n        actions: [\n          Dialog.CancelAction(),\n          Dialog.OKAction((a) => {\n            labels[number] = a.value;\n            setLabels({ ...labels });\n          }),\n        ],\n        prompt: Dialog.TextPrompt({ initialValue: labels[number] || number }),\n      });\n    },\n    [dialog, labels, setLabels]\n  );\n\n  const renderCyto = () => {\n    const layout = isSquare() ? gridLayout : circleLayout;\n    const elements = {\n      nodes: generateNodes(),\n      edges: generateEdges(),\n    };\n    const stylesheet = cytoStyle({ square: isSquare() });\n\n    return (\n      <CytoscapeComponent\n        cy={(cy) => handleCy(cy)}\n        elements={CytoscapeComponent.normalizeElements(elements)}\n        style={{ width: \"100vw\", height: \"100vh\" }}\n        className={\"flex-grow\"}\n        stylesheet={stylesheet}\n        userPanningEnabled={false}\n        layout={layout}\n      />\n    );\n  };\n\n  const removeListeners = () => {\n    cyContainer.current.removeListener(\"add remove\");\n    cyContainer.current\n      .nodes()\n      .removeListener(\"click tap touchstart touchend mouseover mouseout\");\n    setCySet(false);\n  };\n\n  const isSquare = () => {\n    return false && tableShape === TABLE_SHAPE_SQUARE;\n  };\n\n  const incrementCount = () => {\n    const newPlayerCount = playerCount + 1;\n    adjustTargetCount(newPlayerCount);\n    regenerateOrder(newPlayerCount);\n    removeListeners();\n    setPlayerCount(newPlayerCount);\n  };\n\n  const decrementCount = () => {\n    const newPlayerCount = Math.max(playerCount - 1, 1);\n    adjustTargetCount(newPlayerCount);\n    regenerateOrder(newPlayerCount);\n    removeListeners();\n    setPlayerCount(newPlayerCount);\n  };\n\n  const adjustTargetCount = (playerCount) => {\n    const newPlayerTargets = Math.min(\n      playerTargets,\n      Math.max(playerCount - TARGET_OFFSET, 1)\n    );\n    if (playerTargets !== newPlayerTargets) {\n      setPlayerTargets(newPlayerTargets);\n    }\n  };\n\n  const incrementTargetCount = () => {\n    const newPlayerTargets = Math.min(playerTargets + 1, playerCount);\n    regenerateOrder(playerCount, newPlayerTargets);\n    removeListeners();\n    setPlayerTargets(newPlayerTargets);\n  };\n\n  const decrementTargetCount = () => {\n    const newPlayerTargets = Math.max(playerTargets - 1, 1);\n    regenerateOrder(playerCount, newPlayerTargets);\n    removeListeners();\n    setPlayerTargets(newPlayerTargets);\n  };\n\n  const whichWay = () => {\n    setTargets(null);\n    setLoadingDirection(true);\n\n    setTimeout(() => {\n      regenerateOrder();\n      setLoadingDirection(false);\n    }, 1500);\n  };\n\n  const reset = async () => {\n    setPlayerCount(DEFAULT_PLAYER_COUNT);\n    setPlayerTargets(DEFAULT_PLAYER_TARGETS);\n    setTargets(null);\n    setTableShape(DEFAULT_TABLE_SHAPE);\n    setLabels(DEFAULT_LABELS);\n    removeListeners();\n    regenerateOrder(DEFAULT_PLAYER_COUNT, DEFAULT_PLAYER_TARGETS);\n  };\n\n  return (\n    <div className=\"syb\">\n      <SYBHelmet />\n\n      <Row className=\"my-4 text-center\">\n        <Col>\n          <h1>{playerCount} Players</h1>\n          <LoyaltyButtonGroup\n            upProps={{\n              onClick: incrementCount,\n            }}\n            downProps={{\n              disabled: playerCount <= 1,\n              onClick: decrementCount,\n            }}\n          />\n        </Col>\n        <Col>\n          <h1>{playerTargets} Targets</h1>\n          <LoyaltyButtonGroup\n            upProps={{\n              disabled: playerTargets >= playerCount - TARGET_OFFSET,\n              onClick: incrementTargetCount,\n            }}\n            downProps={{\n              disabled: playerTargets <= 1,\n              onClick: decrementTargetCount,\n            }}\n          />\n        </Col>\n        {false && (\n          <ButtonGroup>\n            <Button\n              active={tableShape === TABLE_SHAPE_CIRCLE}\n              onClick={() => setTableShape(TABLE_SHAPE_CIRCLE)}\n              variant=\"secondary\"\n            >\n              <i className=\"ss ss-portal ss-2x\" />\n            </Button>\n            <Button\n              active={tableShape === TABLE_SHAPE_SQUARE}\n              onClick={() => setTableShape(TABLE_SHAPE_SQUARE)}\n              variant=\"secondary\"\n            >\n              <i className=\"ss ss-bfz ss-2x\" />\n            </Button>\n          </ButtonGroup>\n        )}\n      </Row>\n      <div className=\"text-center my-2\">\n        <Button\n          variant=\"danger\"\n          onClick={whichWay}\n          block\n          disabled={loadingDirection}\n        >\n          {loadingDirection ? \"Calculating...\" : \"Which way are we screwing?\"}\n        </Button>\n      </div>\n      <div className=\"d-flex\">\n        {loadingDirection && (\n          <div\n            className=\"position-absolute w-75 text-center\"\n            style={{ top: \"45%\", left: \"0%\" }}\n          >\n            <Spinner\n              variant=\"danger\"\n              animation=\"grow\"\n              className=\"position-absolute\"\n              style={{ width: \"10rem\", height: \"10rem\" }}\n            />\n          </div>\n        )}\n        {renderCyto()}\n      </div>\n      <Button onClick={reset} variant=\"danger\" block>\n        Reset\n      </Button>\n\n      <DevTools>\n        <DoubleFaceButton\n          text=\"Turn Edges\"\n          onClick={() => setShowTurnEdges(!showTurnEdges)}\n          enabled={showTurnEdges}\n        />\n        <DoubleFaceButton\n          text=\"Screw Edges\"\n          onClick={() => setShowScrewEdges(!showScrewEdges)}\n          enabled={showScrewEdges}\n        />\n        <DoubleFaceButton\n          text=\"Star Turn\"\n          onClick={() => setStarTurn(!starTurn)}\n          enabled={starTurn}\n        />\n      </DevTools>\n\n      <Dialog\n        ref={(component) => {\n          dialog.current = component;\n        }}\n      />\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\n\nexport const FormatsHelmet = () => {\n  return (\n    <Helmet title=\"Formats\">\n      <link\n        rel=\"shortcut icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/evg.ico\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/evg_180.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"180x180\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/evg_180.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"192x192\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/evg_192.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"512x512\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/evg_512.png\"}\n      />\n      <link\n        rel=\"manifest\"\n        href={process.env.PUBLIC_URL + \"/formats-manifest.json\"}\n      />\n    </Helmet>\n  );\n};\n","import React, { useState } from \"react\";\nimport { Button, Spinner } from \"react-bootstrap\";\nimport { FormatsHelmet } from \"./Helmet\";\nimport { TAGS, FORMATS, HIKE_FORMATS } from \"./formats\";\nimport { Confirm } from \"../../components/Confirm\";\n\nimport cloneDeep from \"lodash/cloneDeep\";\nimport flatMap from \"lodash/flatMap\";\nimport uniq from \"lodash/uniq\";\n\nimport \"rc-slider/assets/index.css\";\nimport \"rc-tooltip/assets/bootstrap.css\";\nimport Slider from \"rc-slider\";\nimport Tooltip from \"rc-tooltip\";\nimport {\n  DoubleFaceHighlightButton,\n  LoyaltyButtonGroup,\n} from \"../../components/magic/Buttons\";\nimport { useLocalState } from \"../../hooks/useLocalState\";\nimport { useSettings } from \"../../hooks/useSettings\";\n\nconst MIN_PLAYERS = 2;\nconst MAX_PLAYERS = 9;\nconst DEFAULT_PLAYERS = 5;\n\nconst handle = (props) => {\n  const { value, dragging, index, ...restProps } = props;\n  return (\n    <Tooltip\n      prefixCls=\"rc-slider-tooltip\"\n      overlay={value}\n      visible={dragging}\n      placement=\"top\"\n      key={index}\n    >\n      <Slider.Handle value={value} {...restProps} />\n    </Tooltip>\n  );\n};\n\nconst createTags = () => {\n  return TAGS.map((t) => {\n    return { name: t.name, enabled: t.defaultEnabled };\n  });\n};\n\nconst createFormats = () => {\n  let formats = {};\n\n  for (let i = MIN_PLAYERS; i <= MAX_PLAYERS; i++) {\n    formats[i] = cloneDeep(FORMATS.filter((f) => f.players && f.players(i)));\n    formats[i].forEach((f) => (f.weight = f.initial));\n  }\n\n  return formats;\n};\n\nconst rand = (min, max) => {\n  return Math.random() * (max - min) + min;\n};\n\nexport const Formats = () => {\n  const [playerCount, setPlayerCount] = useLocalState(\n    \"formats-playerCount\",\n    DEFAULT_PLAYERS\n  );\n  const [tags, setTags] = useLocalState(\"formats-tags\", createTags());\n  const [currentFormats, setCurrentFormats] = useLocalState(\n    \"formats-current\",\n    createFormats()\n  );\n\n  const [activeFormat, setActiveFormat] = useState(null);\n  const [loadingFormat, setLoadingFormat] = useState(false);\n  const [swapTriggered, setSwapTriggered] = useState(false);\n\n  const { hikeMode } = useSettings();\n\n  const reset = () => {\n    setPlayerCount(DEFAULT_PLAYERS);\n    setTags(createTags());\n    setCurrentFormats(createFormats());\n  };\n\n  const pickFormat = () => {\n    console.log(\"Generate Format\");\n    setLoadingFormat(true);\n    setSwapTriggered(false);\n    const formats = hikeMode ? HIKE_FORMATS : activeFormats();\n    const activeFormat = getRandomFormat(formats);\n    console.log(\"picked item\", activeFormat);\n    setTimeout(() => {\n      setLoadingFormat(false);\n      setActiveFormat(activeFormat);\n    }, 1000);\n  };\n\n  const getRandomFormat = (list) => {\n    const totalWeight = list.reduce((result, cur) => {\n      return result + cur.weight;\n    }, 0);\n    const randomNum = rand(0, totalWeight);\n    let weightSum = 0;\n\n    return list.find((item) => {\n      weightSum += item.weight;\n      return randomNum <= weightSum;\n    });\n  };\n\n  const incrementCount = () => {\n    setPlayerCount(Math.min(playerCount + 1, MAX_PLAYERS));\n    setActiveFormat(null);\n  };\n\n  const decrementCount = () => {\n    setPlayerCount(Math.max(playerCount - 1, MIN_PLAYERS));\n    setActiveFormat(null);\n  };\n\n  const updateFormatValue = (format, value) => {\n    currentFormats[playerCount].forEach((f) => {\n      if (f.name === format.name) {\n        format.weight = value / 100;\n      }\n    });\n    setCurrentFormats({ ...currentFormats });\n  };\n\n  const activeTags = () => {\n    return currentFormats\n      ? uniq(\n          flatMap(currentFormats[playerCount], (f) => {\n            return f.tags;\n          })\n        ).sort()\n      : [];\n  };\n\n  const toggleTag = (tag) => {\n    tags.forEach((t) => {\n      if (t.name === tag.name) {\n        t.enabled = !t.enabled;\n      }\n    });\n    setTags([...tags]);\n  };\n\n  const enabledTags = () => {\n    return tags ? tags.filter((t) => t.enabled).map((t) => t.name) : [];\n  };\n\n  const FormatToggles = () => {\n    if (tags) {\n      const active = activeTags();\n      const tagStates = tags.filter((t) => active.includes(t.name));\n\n      const values = tagStates.map((t, i) => {\n        return (\n          <div className=\"col-6 col-md-4 col-lg-3 mb-1\" key={i}>\n            <DoubleFaceHighlightButton\n              onClick={() => {\n                toggleTag(t);\n              }}\n              enabled={t.enabled}\n              text={t.name}\n            />\n          </div>\n        );\n      });\n\n      return <div className=\"row\">{values}</div>;\n    }\n  };\n\n  const activeFormats = () => {\n    let formats = null;\n    console.log(\"Player\", playerCount);\n    console.log(\"format\", currentFormats);\n    if (tags && currentFormats && playerCount) {\n      formats = currentFormats[playerCount];\n      const enabled = enabledTags();\n      console.log(\"enabledTags\", enabled);\n      formats = formats.filter((f) => f.tags.every((t) => enabled.includes(t)));\n      // formats.forEach(f => f.weight = f.initial) // Store weights\n      console.log(\"Formats\", formats);\n    }\n    return formats;\n  };\n\n  const activeFormatName = () => {\n    if (!activeFormat) {\n      return \"None\";\n    } else {\n      return swapTriggered\n        ? activeFormat.name\n        : activeFormat.displayName || activeFormat.name;\n    }\n  };\n\n  const ActiveFormats = () => {\n    const formats = activeFormats();\n    if (formats) {\n      const formatTags = formats.map((f) => {\n        return (\n          <div\n            className=\"row mb-2\"\n            key={`${playerCount}-${f.id}-${f.weight * 100}`}\n          >\n            <div className=\"col-5\">{f.name}</div>\n            <div className=\"col-7\">\n              <Slider\n                min={0}\n                max={100}\n                marks={{ 25: \"25\", 50: \"50\", 75: \"75\" }}\n                defaultValue={f.weight * 100}\n                included={true}\n                handle={handle}\n                onAfterChange={(value) => updateFormatValue(f, value)}\n              />\n            </div>\n          </div>\n        );\n      });\n      return formatTags;\n    }\n  };\n\n  const showDeckswapButton =\n    !loadingFormat &&\n    !swapTriggered &&\n    activeFormat &&\n    activeFormat.showSwaps &&\n    enabledTags().includes(\"Deck Swaps\");\n\n  return (\n    <div className=\"formats\">\n      <FormatsHelmet />\n      <div className=\"my-4 noselect\">\n        <div className=\"text-center\">\n          <h1>{playerCount} Players</h1>\n          <LoyaltyButtonGroup\n            className=\"my-4\"\n            upProps={{\n              disabled: playerCount >= MAX_PLAYERS,\n              onClick: incrementCount,\n            }}\n            downProps={{\n              disabled: playerCount <= MIN_PLAYERS,\n              onClick: decrementCount,\n            }}\n          />\n          <div className=\"text-center mb-5\">\n            <Button\n              block\n              variant=\"danger\"\n              onClick={pickFormat}\n              disabled={loadingFormat}\n            >\n              {loadingFormat ? \"Computing...\" : \"Which Format?\"}\n            </Button>\n            {loadingFormat ? (\n              <Spinner\n                size=\"lg\"\n                animation=\"border\"\n                variant=\"primary\"\n                className=\"mt-3 mb-2\"\n              >\n                <span className=\"sr-only\">Loading...</span>\n              </Spinner>\n            ) : (\n              <h1 className=\"my-2\">{activeFormatName()}</h1>\n            )}\n            {showDeckswapButton && (\n              <Button\n                onClick={() => setSwapTriggered(true)}\n                block\n                className={\"w-50 mx-auto\"}\n                variant=\"success\"\n              >\n                Deckswaps?\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n      <hr className=\"border-info\" />\n      <div className=\"mb-5\">\n        <FormatToggles />\n      </div>\n      <div className=\"mb-5 noselect\">\n        <ActiveFormats />\n      </div>\n      <div className=\"my-3\">\n        <Confirm\n          onConfirm={reset}\n          headerText=\"Reset Formats?\"\n          triggerText=\"Reset\"\n          confirmText=\"Reset\"\n          confirmVariant=\"danger\"\n          triggerButtonParams={{ variant: \"danger\", block: true }}\n        />\n      </div>\n    </div>\n  );\n};\n","import { Alert } from \"react-bootstrap\";\nimport { useSettings } from \"../hooks/useSettings\";\n\nexport const Disclaimer = () => {\n  const settings = useSettings();\n  const { disclaimerDismissed, setDisclaimerDismissed } = settings;\n  return (\n    <Alert\n      variant=\"warning\"\n      className=\"fixed-bottom mb-0 py-1\"\n      show={!disclaimerDismissed}\n      onClose={() => setDisclaimerDismissed(true)}\n      dismissible\n    >\n      <h6>Disclaimer</h6>\n      <small className=\"text-muted m-0\">\n        This site is created for personal use. Magic: The Gathering, the mana\n        symbols, the tap symbol and all other related images are owned by\n        Wizards of the Coast. jibbermaster.com is unaffiliated with Wizards of\n        the Coast.\n      </small>\n    </Alert>\n  );\n};\n","import React, { useState } from \"react\";\nimport { NavLink as RRNavLink } from \"react-router-dom\";\n\nimport { Dropdown, Navbar, Nav } from \"react-bootstrap\";\nimport { useSettings } from \"../hooks/useSettings\";\nimport { DoubleFaceIcon } from \"./magic/DoubleFaceIcon\";\n\nexport const Navigation = () => {\n  const [open, setOpen] = useState(false);\n  const settings = useSettings();\n\n  const {\n    disclaimerDismissed,\n    displayText,\n    displayImages,\n    devTools,\n    displayGatherer,\n    setDisclaimerDismissed,\n    setDisplayText,\n    setDisplayImages,\n    setDevTools,\n    setDisplayGatherer,\n  } = settings;\n\n  const toggle = () => setOpen(!open);\n  const closeNavbar = () => open && setOpen(false);\n\n  const Toggler = ({ value, text, onClick }) => (\n    <Dropdown.Item onClick={onClick}>\n      <DoubleFaceIcon enabled={value} />\n      <span className=\"ml-3\">{text}</span>\n    </Dropdown.Item>\n  );\n\n  const NavItem = ({ to, text }) => (\n    <Nav.Item>\n      <Nav.Link\n        as={RRNavLink}\n        exact\n        to={to}\n        activeClassName=\"active\"\n        onClick={closeNavbar}\n      >\n        {text}\n      </Nav.Link>\n    </Nav.Item>\n  );\n\n  return (\n    <Navbar\n      variant=\"dark\"\n      expand=\"md\"\n      className=\"text-right p-1 noselect\"\n      expanded={open}\n    >\n      <Navbar.Brand />\n      <Navbar.Toggle onClick={toggle} />\n      <Navbar.Collapse>\n        <Nav className=\"ml-auto\" navbar>\n          <NavItem to=\"/\" text=\"Home\" />\n          <NavItem to=\"/planechase\" text=\"Planechase\" />\n          <NavItem to=\"/archenemy\" text=\"Archenemy\" />\n          <NavItem to=\"/syb\" text=\"SYB\" />\n          <NavItem to=\"/formats\" text=\"Formats\" />\n          <NavItem to=\"/contraptions\" text=\"Contraptions\" />\n          <Dropdown navbar onToggle={(open) => !open && closeNavbar()}>\n            <Dropdown.Toggle as={Nav.Link}>Settings</Dropdown.Toggle>\n            <Dropdown.Menu alignRight>\n              <Toggler\n                value={disclaimerDismissed}\n                text=\"Disclaimer Dismissed\"\n                onClick={() => setDisclaimerDismissed(!disclaimerDismissed)}\n              />\n              <Toggler\n                value={displayText}\n                text=\"Display Text\"\n                onClick={() => setDisplayText(!displayText)}\n              />\n              <Toggler\n                value={displayImages}\n                text=\"Display Images\"\n                onClick={() => setDisplayImages(!displayImages)}\n              />\n              <Toggler\n                value={displayGatherer}\n                text=\"Display Gatherer\"\n                onClick={() => setDisplayGatherer(!displayGatherer)}\n              />\n              <Toggler\n                value={devTools}\n                text=\"Dev Tools\"\n                onClick={() => setDevTools(!devTools)}\n              />\n              <Dropdown.Divider />\n              <Dropdown.Item onClick={() => window.localStorage.clear()}>\n                Clear Everything\n              </Dropdown.Item>\n\n              {devTools && (\n                <>\n                  <Dropdown.Divider />\n                  <Dropdown.Item disabled>\n                    Version {settings.getSetting(\"version\")}\n                  </Dropdown.Item>\n                </>\n              )}\n            </Dropdown.Menu>\n          </Dropdown>\n        </Nav>\n      </Navbar.Collapse>\n    </Navbar>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/classic-back.a8e7574b.jpg\";","export default __webpack_public_path__ + \"static/media/arena-back.8aa7dc1f.png\";","export default __webpack_public_path__ + \"static/media/blank-front.16e3055f.png\";","import React, { useState } from \"react\";\nimport { Button, Card, ListGroup, Modal } from \"react-bootstrap\";\nimport { Textfit } from \"react-textfit\";\nimport classicBack from \"../../images/classic-back.jpg\";\nimport arenaBack from \"../../images/arena-back.png\";\nimport blankFront from \"../../images/blank-front.png\";\nimport { Counter } from \"./Counter\";\nimport \"./planes.scss\";\n\nimport { hasCustomProperty, rotatedLayout } from \"../../mtg/card.js\";\nimport { CardText } from \"./CardText\";\nimport cn from \"classnames\";\nimport { useSettings } from \"../../hooks/useSettings\";\nimport { createMarkup } from \"../../util/createMarkup\";\nimport ReactDOMServer from \"react-dom/server\";\n\nexport const MtgCard = ({\n  listDisplay,\n  card,\n  displayActions,\n  children,\n  altBack = false,\n  displayChildrenBelow = true,\n}) => {\n  const [modalOpen, setModalOpen] = useState(false);\n  const [fullscreen, setFullscreen] = useState(false);\n\n  const settings = useSettings();\n  const { displayImages, displayGatherer } = settings;\n\n  const hasCounters = hasCustomProperty(\"counter\", card);\n  const errata = hasCustomProperty(\"errata\", card);\n  const token = hasCustomProperty(\"token\", card);\n  const phenomenon = hasCustomProperty(\"phenomenon\", card);\n  const chaosomenon = hasCustomProperty(\"chaosomenon\", card);\n  const chaosX = hasCustomProperty(\"chaos_x\", card);\n  const urlProp = hasCustomProperty(\"url\", card);\n  const emptyChildren = !Boolean(ReactDOMServer.renderToStaticMarkup(children));\n\n  const back = altBack ? arenaBack : classicBack;\n  const isRotated = rotatedLayout(card);\n  const cardStyle = isRotated\n    ? { transform: \"rotate(90deg) scale(0.7) translate(-50%)\" }\n    : {};\n\n  const counterStyle = isRotated ? { transform: \"translateY(110%)\" } : {};\n  const isBlank = card?.show_blank;\n  const imageURI = card\n    ? isBlank\n      ? blankFront\n      : card.image_uris.border_crop\n    : back;\n\n  const counter = displayActions && hasCounters && (\n    <Counter card={card} style={counterStyle} />\n  );\n\n  const toggleModal = () => {\n    console.log(\"Toggle Modal\");\n    setModalOpen((isOpen) => !isOpen);\n  };\n\n  const toggleFullScreen = () => {\n    console.log(\"Toggle FullScreen\");\n    setFullscreen((isFullscreen) => !isFullscreen);\n  };\n\n  const renderBody = () => {\n    const text = CardText({ card, showText: isRotated });\n    const hasBody = !!text;\n\n    return (\n      hasBody && (\n        <Card>\n          <Card.Body>{text}</Card.Body>\n        </Card>\n      )\n    );\n  };\n\n  const renderAdditionalProps = () => {\n    const hasChildren = !emptyChildren && displayChildrenBelow;\n    const hasErrata = !!errata;\n    const hasToken = !!token;\n    const hasChaosX = !!chaosX;\n    const hasUrl = !!urlProp;\n    const isPhenomenon = !!phenomenon;\n    const isChaosomenon = !!chaosomenon;\n    const errataHtml = createMarkup(errata?.text);\n\n    return (\n      (hasChildren ||\n        hasErrata ||\n        hasToken ||\n        hasChaosX ||\n        hasUrl ||\n        isPhenomenon ||\n        isChaosomenon) && (\n        <Card>\n          <Card.Body className=\"px-1\">\n            {hasChildren && children}\n            {isPhenomenon && (\n              <Card.Text className=\"h5 font-italic mb-3\">\n                <i className=\"ss ss-fw ss-2x ss-timeshifted ss-grad ss-fut mx-2\"></i>\n                Phenomenon <i className=\"ss ss-btd rotate-180 mr-1\"></i>Planes\n                Hike away after encountering this.\n              </Card.Text>\n            )}\n            {chaosomenon && (\n              <Card.Text className=\"h5 font-italic mb-3\">\n                <i className=\"ms ms-fw ms-2x ss-timeshifted ss-grad ms-phenomenon mx-2\"></i>\n                Chaosomenon <i className=\"ss ss-btd rotate-180 mr-1\"></i>Chaos\n                Hike away after triggering this.\n              </Card.Text>\n            )}\n            {hasToken && (\n              <Card.Text className=\"h5 font-italic mb-3\">\n                <i className=\"ms ms-fw ms-2x ss-uncommon ss-grad ms-token\"></i>\n                <i className=\"ss ss-btd rotate-180 mr-1\"></i>\n                Create{\" \"}\n                <strong>\n                  {token.count} {card.name}\n                </strong>{\" \"}\n                Token\n              </Card.Text>\n            )}\n            {hasChaosX && (\n              <Card.Text className=\"h5 font-italic mb-3\">\n                <i className=\"ss ss-fw ss-2x ss-timeshifted ss-grad ss-plc\"></i>\n                Chaos <i className=\"ms ms-x\"></i>{\" \"}\n                <i className=\"ss ss-btd rotate-180 mr-1\"></i>\n                {chaosX.text}\n              </Card.Text>\n            )}\n            {hasUrl && (\n              <Card.Text className=\"h5 font-italic mb-3\">\n                <a href={urlProp.url} target=\"_blank\" rel=\"noreferrer\">\n                  <Button variant=\"outline-info\">\n                    <i className=\"fa fa-link mr-2\"></i>\n                    {urlProp.text}\n                  </Button>\n                </a>\n              </Card.Text>\n            )}\n            {hasErrata && (\n              <Card.Text\n                className=\"h5 font-italic\"\n                dangerouslySetInnerHTML={{ __html: errataHtml }}\n              ></Card.Text>\n            )}\n          </Card.Body>\n        </Card>\n      )\n    );\n  };\n\n  const renderActions = () => {\n    if (displayGatherer && card) {\n      return (\n        <Card.Footer>\n          <Card.Link\n            href={card.related_uris[\"gatherer\"]}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Gatherer\n          </Card.Link>\n        </Card.Footer>\n      );\n    }\n  };\n\n  const renderCardImage = () => (\n    <Card.Img\n      variant=\"top\"\n      width=\"100%\"\n      src={imageURI}\n      className=\"mtg-card mtg-card-card no-border\"\n      style={cardStyle}\n    />\n  );\n\n  const renderImage = () => {\n    if (displayImages) {\n      return (\n        <>\n          <div onDoubleClick={toggleFullScreen}>{renderCardImage()}</div>\n          <Modal\n            show={fullscreen}\n            onHide={toggleFullScreen}\n            backdrop={true}\n            dialogClassName=\"modal-content-full bg-transparent\"\n            centered={true}\n          >\n            <Modal.Body\n              className=\"p-0\"\n              centered=\"true\"\n              onClick={toggleFullScreen}\n            >\n              {renderCardImage()}\n            </Modal.Body>\n          </Modal>\n        </>\n      );\n    }\n  };\n\n  const renderCustomText = () => {\n    return (\n      isBlank && (\n        <>\n          <div\n            className=\"text-body text-left position-absolute d-flex align-items-center noselect\"\n            style={{\n              top: \"4%\",\n              left: \"7%\",\n              fontSize: \"clamp(10px, 3vw, 22px)\",\n              height: \"5%\",\n              width: \"90%\",\n            }}\n          >\n            <div className=\"text-nowrap\">{card.name}</div>\n          </div>\n          <div\n            className=\"h-100 noselect\"\n            style={{\n              paddingTop: \"12%\",\n              paddingLeft: \"4%\",\n              paddingRight: \"4%\",\n              paddingBottom: \"22%\",\n              fontSize: \"clamp(10px, 3vw, 30px)\",\n            }}\n          >\n            <Textfit mode=\"multi\" style={{ height: \"100%\" }} max={30}>\n              <span dangerouslySetInnerHTML={{ __html: card.oracle_html }} />\n            </Textfit>\n          </div>\n          <div\n            className=\"text-body position-absolute d-flex justify-content-center align-items-center noselect\"\n            style={{\n              bottom: \"10.5%\",\n              width: \"100%\",\n              fontSize: \"clamp(10px, 3vw, 22px)\",\n              marginLeft: \"-1.25rem\",\n              height: \"5%\",\n            }}\n          >\n            <div>{card.type_line}</div>\n          </div>\n        </>\n      )\n    );\n  };\n\n  const renderComponents = () => {\n    if (displayImages) {\n      return (\n        <Card.ImgOverlay\n          className={cn(\"text-center card-overlay\", {\n            \"child-overlay\": !emptyChildren && !isBlank,\n            \"counter-overlay\": emptyChildren && hasCounters,\n          })}\n        >\n          <Card.Title className={cn(\"text-center\", { \"h-100\": isBlank })}>\n            {counter}\n            {renderCustomText()}\n            {!isBlank && children}\n          </Card.Title>\n        </Card.ImgOverlay>\n      );\n    } else {\n      return (\n        <Card.Body className=\"text-center pb-0\">\n          {counter}\n          {renderCustomText()}\n          {!isBlank && children}\n        </Card.Body>\n      );\n    }\n  };\n\n  if (listDisplay) {\n    return (\n      <>\n        <ListGroup.Item variant=\"dark\" onClick={toggleModal}>\n          <div>{card.name}</div>\n        </ListGroup.Item>\n        <Modal\n          show={modalOpen}\n          onHide={toggleModal}\n          size=\"md\"\n          backdrop={true}\n          dialogClassName=\"modal-content-no-border\"\n        >\n          <Modal.Body className=\"p-0\" centered=\"true\">\n            <Card card={card} />\n            {children}\n          </Modal.Body>\n        </Modal>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <Card bg=\"black\" text=\"light\" className=\"mtg-standard-card\">\n          {renderImage()}\n          {renderComponents()}\n          {renderActions()}\n        </Card>\n        {renderAdditionalProps()}\n        {renderBody()}\n      </>\n    );\n  }\n};\n","import cloneDeep from \"lodash/cloneDeep\";\nimport random from \"lodash/random\";\nimport { shuffleArray } from \"../../../util/shuffleArray\";\n\nconst PLANESWALK_FACE = {\n  icon: \"ms ms-fw ms-2x ss-timeshifted ss-grad ms-planeswalker\",\n  effect: \"Planeswalk\",\n};\n\nconst SQUAK_FACE = {\n  icon: \"ss ss-fw ss-2x ss-uncommon ss-grad ss-stx\",\n  effect: \"Squak!\",\n};\n\nconst CHAOS_FACE = {\n  icon: \"ms ms-fw ms-2x ss-timeshifted ss-grad ms-chaos\",\n  effect: \"Chaos\",\n};\n\nconst SPROUT_FACE = {\n  icon: \"ms ms-fw ms-2x ms-counter-fungus\",\n  effect: \"Sprout Sprout - Create a 1/1 green Saproling creature token\",\n};\n\nconst RERANDOM_FACE = {\n  icon: \"ss ss-fw ss-2x ss-foil ss-grad ss-h09\",\n  effect: \"Re-Randomize Hike Die\",\n};\n\nconst FACES = [\n  {\n    icon: \"ss ss-fw ss-2x ss-timeshifted ss-grad ss-fut\",\n    effect: \"Change Plane, Keep Chaos\",\n  },\n  {\n    icon: \"ms ms-fw ms-2x ss-timeshifted ss-grad ms-phenomenon\",\n    effect: \"Change Chaos\",\n  },\n  {\n    icon: \"ss ss-fw ss-2x ss-timeshifted ss-grad ss-plc\",\n    effect: \"Chaos X Times *\",\n  },\n  {\n    icon: \"ss ss-fw ss-2x ss-timeshifted ss-grad ss-pls\",\n    effect: \"Chaos + Next X Chaos Abilities\",\n  },\n  {\n    icon: \"ms ms-fw ms-2x ss-rare ss-grad ms-land\",\n    effect: \"Add X Mana of Any Color\",\n  },\n  {\n    icon: \"ms ms-fw ms-2x ss-foil ss-grad ms-ability-d20\",\n    effect: \"Roll 2 More Times\",\n  },\n  // {\n  //   effect: \"Gain X Life\",\n  // },\n  // {\n  //   effect: \"Lose X Life\",\n  // },\n  {\n    icon: \"ms ms-fw ms-2x ss-rare ss-grad ms-dfc-modal-back\",\n    effect: \"Scry X\",\n  },\n  {\n    icon: \"ms ms-fw ms-2x ss-rare ss-grad ms-ability-surveil\",\n    effect: \"Mill X\",\n  },\n  {\n    icon: \"ms ms-fw ms-2x ss-rare ss-grad ms-guild-selesnya\",\n    effect: \"Populate X Times\",\n  },\n  {\n    icon: \"ss ss-fw ss-2x ss-rare ss-grad ss-arb\",\n    effect: \"Cascade < X\",\n  },\n  {\n    icon: \"ms ms-fw ms-2x ss-mythic ss-grad ms-scheme\",\n    effect: \"Scheme\",\n  },\n  {\n    icon: \"ms ms-fw ms-2x ss-rare ss-grad ms-ability-dungeon\",\n    effect: \"Venture into the Dungeon up to X Times\",\n  },\n  {\n    icon: \"ms ms-fw ms-2x ss-rare ss-grad ms-ability-proliferate\",\n    effect: \"Proliferate X Times\",\n  },\n];\n\nexport const ALL_FACES = [\n  PLANESWALK_FACE,\n  SQUAK_FACE,\n  CHAOS_FACE,\n  SPROUT_FACE,\n  RERANDOM_FACE,\n  ...FACES,\n];\n\nexport const randFace = () => random(1, 12);\n\nexport const createDie = () => {\n  const faces = [\n    PLANESWALK_FACE,\n    CHAOS_FACE,\n    SPROUT_FACE,\n    SQUAK_FACE,\n    SQUAK_FACE,\n    RERANDOM_FACE,\n    ...shuffleArray(FACES).slice(0, 6),\n  ];\n\n  return cloneDeep(shuffleArray(faces)).reduce((result, v, k) => {\n    v.effect = v.effect.replace(\"X\", `${k + 1}`);\n    result[k + 1] = v;\n    return result;\n  }, {});\n};\n","import map from \"lodash/map\";\nimport keys from \"lodash/keys\";\nimport { useCallback, useEffect } from \"react\";\nimport { Button, Table } from \"react-bootstrap\";\nimport { useLocalState } from \"../../hooks/useLocalState\";\nimport { useSettings } from \"../../hooks/useSettings\";\nimport { createDie, ALL_FACES } from \"./data/die\";\n\nexport const CurrentDie = ({ showAllEffect }) => {\n  const [die, setDie] = useLocalState(\"hike-die\", {});\n  const settings = useSettings();\n\n  const regenDie = useCallback(() => {\n    setDie({ ...createDie() });\n  }, [setDie]);\n\n  useEffect(() => {\n    if (keys(die).length === 0) {\n      regenDie();\n    }\n  }, [die, regenDie]);\n\n  return (\n    <div className=\"my-5\">\n      <h3>Hike Die</h3>\n      <Table size=\"sm\" variant=\"dark\" borderless striped>\n        <tbody>\n          {map(die, (v, k) => (\n            <tr key={k}>\n              <td className=\"text-center pr-2\">\n                <i className={`ms ms-${k} ms-cost ms-shadow ms-fw`}></i>\n              </td>\n              <td className=\"text-center\">\n                <i className={v?.icon}></i>\n              </td>\n              <td>{v?.effect}</td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n\n      {settings.devTools && showAllEffect && (\n        <>\n          <h3>All Effects</h3>\n          <Table size=\"sm\" variant=\"dark\" borderless striped>\n            <tbody>\n              {map(ALL_FACES, (v, k) => (\n                <tr key={k}>\n                  <td className=\"text-center pr-2\">\n                    <i className={`ms ms-${k} ms-cost ms-shadow ms-fw`}></i>\n                  </td>\n                  <td className=\"text-center\">\n                    <i className={v?.icon}></i>\n                  </td>\n                  <td>{v?.effect}</td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n        </>\n      )}\n\n      <Button onClick={regenDie} block>\n        Regenerate Die\n      </Button>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport { gathererImageURL } from \"../../mtg/card.js\";\n\nexport const HikeHelmet = ({ cards }) => {\n  return (\n    <Helmet title=\"Hike Mode\">\n      <link\n        rel=\"shortcut icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase.ico\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase_256.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"64x64\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase_64.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"128x128\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase_128.png\"}\n      />\n      <link\n        rel=\"apple-touch-icon\"\n        sizes=\"256x256\"\n        href={process.env.PUBLIC_URL + \"mtg/icon/planechase_256.png\"}\n      />\n      <link\n        rel=\"manifest\"\n        href={process.env.PUBLIC_URL + \"/planechase-manifest.json\"}\n      />\n      {cards &&\n        cards.map((p) => (\n          <link\n            rel=\"preload\"\n            href={gathererImageURL(p)}\n            as=\"image\"\n            key={p.id ?? p.name}\n          />\n        ))}\n    </Helmet>\n  );\n};\n","export const Rules = () => (\n  <div className=\"my-5\">\n    <h3>Rules</h3>\n    <ol>\n      <li>\n        At the beginning of each precombat main phase you must roll the Hike\n        Die. This is a free roll and does not count against normal rolls.\n      </li>\n      <li>\n        Beginning at <i className=\"ms ms-cost ms-0\"></i>, Each roll of the Hike\n        Die costs <i className=\"ms ms-cost ms-1\"></i> additional to cast\n      </li>\n      <li>\n        Any references to the Planar die on magic cards also applies to Hike\n        Die.\n      </li>\n      <li>\n        All ongoing effects that trigger during upkeep also trigger when you\n        planeswalk to it.\n      </li>\n      <li>\n        Most references to You on ongoing effects also apply to opponents.\n        Double check Hike mode errata.\n      </li>\n      <li>\n        Most color references on on going effects change color randomly. Double\n        check Hike mode errata.\n      </li>\n      <li>\n        All ongoing effects that trigger during upkeep also trigger when you\n        planeswalk to it.\n      </li>\n      <li>When in doubt Hike it out.</li>\n    </ol>\n  </div>\n);\n","import store from \"store/dist/store.modern\";\nimport uuidv4 from \"uuid/v4\";\n\nexport const moveCard = (prefix, from, to) => {\n  const deck = getCurrentDeck(prefix);\n  deck.splice(to, 0, deck.splice(from, 1)[0]);\n  storeCurrentDeck(prefix, deck);\n};\n\nexport const getOrCreateCurrentDeck = (prefix, cards, reset = false) => {\n  let deck = getCurrentDeck(prefix);\n  if (!deck || reset) {\n    console.log(`Creating New ${prefix} Deck`);\n    // Clone all the cards so that we aren't modifying original objects\n    const clonedCard = JSON.parse(JSON.stringify(cards));\n    // Add Deck Card Id so that each card in the deck has a unique value\n    clonedCard.forEach((c) => (c.deck_card_id = uuidv4()));\n    deck = shuffle(clonedCard);\n    store.set(`${prefix}-history`, []);\n    storeCurrentDeck(prefix, deck);\n  }\n  return deck;\n};\n\nexport const getCurrentDeck = (prefix) => {\n  return store.get(`${prefix}-deck`);\n};\n\nexport const storeCurrentDeck = (prefix, deck) => {\n  return store.set(`${prefix}-deck`, deck);\n};\n\nexport const drawCard = (prefix) => {\n  const deck = getCurrentDeck(prefix);\n  const card = deck?.shift();\n  if (card) {\n    updateHistory(prefix, card);\n  }\n  storeCurrentDeck(prefix, deck);\n  return card;\n};\n\nexport const updateHistory = (prefix, card) => {\n  const history = store.get(`${prefix}-history`);\n  history.push(card);\n  store.set(`${prefix}-history`, history);\n};\n\nexport const getHistory = (prefix, card) => {\n  return store.get(`${prefix}-history`);\n};\n\nexport const undoDraw = (prefix) => {\n  const history = store.get(`${prefix}-history`);\n  const card = history.pop();\n  if (card) {\n    addCardsToTop(prefix, [card]);\n  }\n  store.set(`${prefix}-history`, history);\n  return history[history.length - 1];\n};\n\nexport const addCardsToTop = (prefix, topCards) => {\n  const deck = getCurrentDeck(prefix);\n  storeCurrentDeck(prefix, topCards.concat(deck));\n};\n\nexport const addCardsToBottom = (prefix, bottomCards) => {\n  const deck = getCurrentDeck(prefix);\n  storeCurrentDeck(prefix, deck.concat(bottomCards));\n};\n\nexport const deckSize = (prefix) => {\n  return getCurrentDeck(prefix).length;\n};\n\nexport const findCard = (prefix, card) => {\n  return findCardByDeckCardId(prefix, card.deck_card_id);\n};\n\nexport const findCardByDeckCardId = (prefix, deckCardId) => {\n  const deck = getCurrentDeck(prefix);\n  return deck.find((c) => c.deck_card_id === deckCardId);\n};\n\nexport const findAndPutOnTop = (prefix, deckCardId) => {\n  const tmpCard = findCardByDeckCardId(prefix, deckCardId);\n\n  if (tmpCard) {\n    removeCards(prefix, [tmpCard]);\n    addCardsToTop(prefix, [tmpCard]);\n  }\n};\n\nexport const findAndPutOnBottom = (prefix, deckCardId) => {\n  const tmpCard = findCardByDeckCardId(prefix, deckCardId);\n\n  if (tmpCard) {\n    removeCards(prefix, [tmpCard]);\n    addCardsToBottom(prefix, [tmpCard]);\n  }\n};\n\nexport const removeCards = (prefix, cardsToRemove) => {\n  const deck = getCurrentDeck(prefix);\n  const filteredDeck = deck.filter(\n    (c) => !cardsToRemove.find((r) => r.deck_card_id === c.deck_card_id)\n  );\n  storeCurrentDeck(prefix, filteredDeck);\n};\n\nexport const revealCards = (prefix, numReveal, onlyPlanes = false) => {\n  const revealedCards = [];\n  const deck = getCurrentDeck(prefix);\n  const count = Math.min(deck.length, numReveal);\n\n  let planes = 0;\n  let tmpCount = count;\n  for (let i = 0; i < tmpCount; i++) {\n    revealedCards.push(deck[i]);\n\n    if (onlyPlanes) {\n      if (deck[i].type_line.search(\"Plane\") >= 0) {\n        planes++;\n      }\n\n      if (i === tmpCount - 1 && planes < count) {\n        tmpCount++;\n      }\n    }\n  }\n\n  return revealedCards;\n};\n\nexport const shuffle = (array) => {\n  let currentIndex = array.length,\n    temporaryValue,\n    randomIndex;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n};\n","import React from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport { MtgCard } from \"../../components/magic/Card\";\n\nexport const RandomTokenModal = ({\n  additionalCards,\n  onHide,\n  open,\n  randomTokenProps,\n  closeText = \"Done\",\n}) => {\n  if (additionalCards && open && randomTokenProps) {\n    return (\n      <Modal\n        show={!!open}\n        onHide={onHide}\n        size=\"md\"\n        dialogClassName=\"bg-secondary\"\n        variant=\"secondary\"\n        backdrop={true}\n      >\n        <Modal.Header className=\"justify-content-center text-white noselect\">\n          <Modal.Title>\n            <i className={randomTokenProps.symbol} />\n            {randomTokenProps.text}\n            <i className={randomTokenProps.symbol} />\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          {additionalCards.map((c) => (\n            <MtgCard card={c} key={c.id} />\n          ))}\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"info\" block aria-label=\"Close\" onClick={onHide}>\n            {closeText}\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n\n  return null;\n};\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { Button, Col, Row } from \"react-bootstrap\";\nimport { Confirm } from \"../../components/Confirm\";\nimport { DevTools } from \"../../components/DevTools\";\nimport { ActionButton } from \"../../components/game/ActionButton\";\nimport { Deck } from \"../../components/game/Deck\";\nimport { History } from \"../../components/game/History\";\nimport { Loading } from \"../../components/Loading\";\nimport { DoubleFaceButton } from \"../../components/magic/Buttons\";\n// import { PlanarDie } from \"../../components/magic/planar-die/PlanarDie\";\nimport { MtgCard } from \"../../components/magic/Card\";\nimport { useLocalState } from \"../../hooks/useLocalState\";\nimport { DeckProvider, useDeckContext } from \"../../mtg/DeckContext\";\nimport { useGameContext } from \"../../mtg/GameContext\";\nimport { ChaosButton } from \"../planechase/ChaosButton\";\nimport { CurrentDie } from \"./Die\";\nimport { HikeHelmet } from \"./Helmet\";\nimport { Rules } from \"./Rules\";\nimport { CUSTOM_CHAOS } from \"./data/chaos\";\nimport { CUSTOM_PLANES } from \"./data/planes\";\nimport { getOrCreateCurrentDeck, drawCard } from \"../../mtg/deck\";\nimport { hasCustomProperty } from \"../../mtg/card\";\nimport {\n  filterAPI,\n  getAllHikeModeChaosCards,\n  getAllHikeModePlaneCards,\n  internet,\n} from \"../../util/api\";\nimport { RandomTokenModal } from \"./RandomTokenModal\";\nimport { useSettings } from \"../../hooks/useSettings\";\nimport { addAdditionalProperties } from \"../../util/additionalProps\";\n\nconst PRE_CHAOS = \"hike-chaos\";\n\nconst customPlanes = CUSTOM_PLANES.map((c) => addAdditionalProperties(c));\nconst customChaos = CUSTOM_CHAOS.map((c) => addAdditionalProperties(c));\n\nexport const Hike = () => {\n  const [loading, setLoading] = useState(true);\n  const [cards, setCards] = useState([]);\n  const [chaosCards, setChaosCards] = useState([]);\n  const [currentChaosCard, setCurrentChaosCard] = useLocalState(\n    \"hikemode-chaos-current\",\n    null\n  );\n  // const [showPlanarDie, setShowPlanarDie] = useLocalState(\"planar-die\", true);\n  const [showAllEffect, setShowAllEffect] = useLocalState(\n    \"hike-all-effects\",\n    false\n  );\n  const [showAllCustom, setShowAllCustom] = useLocalState(\n    \"hike-all-custom\",\n    false\n  );\n  const [showRules, setShowRules] = useLocalState(\"hike-show-rules\", true);\n  const [randomTokenModalOpen, setRandomTokenModalOpen] = useState(false);\n  const [randomTokenProps, setRandomTokenProps] = useState(null);\n  // TODOs:\n  // mobile testing\n  // Reset planes / Chaos on empty\n  // Hike Die\n  // Coin Flipper link\n\n  const game = useGameContext();\n  const { hikeMode, setHikeMode } = useSettings();\n  const { currentCard } = game;\n\n  const deck = useDeckContext();\n  const history = deck.history;\n\n  const fetchCards = useCallback(async () => {\n    const hikePLanes = getAllHikeModePlaneCards();\n    const hikeChaos = getAllHikeModeChaosCards();\n\n    const planes = [...customPlanes, ...(await hikePLanes)];\n    const chaos = [...customChaos, ...(await hikeChaos)];\n    setCards(planes);\n    setChaosCards(chaos);\n    getOrCreateCurrentDeck(PRE_CHAOS, chaos);\n    setLoading(false);\n  }, [setCards, setLoading]);\n\n  useEffect(() => {\n    if (cards && cards.length <= 0) {\n      fetchCards();\n    }\n  }, [cards, fetchCards]);\n\n  useEffect(() => {\n    if (cards && cards.length > 0 && !deck.isInit) {\n      deck.initDeck(cards, true);\n    }\n  }, [cards, deck]);\n\n  const planeswalk = () => {\n    const newCard = deck.drawCard();\n    game.setCurrentCard(newCard ?? null);\n  };\n\n  const chaosWalk = () => {\n    const newCard = drawCard(PRE_CHAOS);\n    setCurrentChaosCard(newCard ?? null);\n  };\n\n  const planesAndChaosWalk = () => {\n    planeswalk();\n    chaosWalk();\n  };\n\n  const triggerChaos = (c) => {\n    console.log(\"Chaos Triggered\");\n    const randomTokenProp = hasCustomProperty(\n      \"random-token\",\n      c || currentChaosCard\n    );\n    if (!!randomTokenProp) {\n      console.log(\"fetching random token\");\n      const getToken = async () => {\n        let response = await internet.get(randomTokenProp.url);\n        let tokenCard = filterAPI(response.data);\n        console.log(\"Random Token\", tokenCard);\n\n        game.setAdditionalCards([tokenCard]);\n        setRandomTokenProps(randomTokenProp);\n        setRandomTokenModalOpen(true);\n      };\n      getToken();\n    }\n  };\n\n  const _randomTokenModalClose = () => {\n    game.clearAdditionalCards();\n    setRandomTokenProps(null);\n    setRandomTokenModalOpen(false);\n  };\n\n  const reset = async () => {\n    console.log(\"Resetting\");\n    setLoading(true);\n    setCurrentChaosCard(null);\n    fetchCards();\n    deck.reInit();\n    game.reset();\n    const hikeChaos = await getAllHikeModeChaosCards();\n    getOrCreateCurrentDeck(PRE_CHAOS, [...customChaos, ...hikeChaos], true);\n    setLoading(false);\n  };\n\n  const undo = () => {\n    console.log(\"🚀 TODO: ~ file: index.js ~ line 23 ~ undo ~ undo\");\n  };\n\n  // TODO: Chaos Card\n  return (\n    <div className=\"hikemode\">\n      <HikeHelmet cards={cards.concat(chaosCards)} />\n      <Row className=\"my-4 text-center\">\n        <Col>\n          <h1>Hike Mode</h1>\n        </Col>\n      </Row>\n      <ActionButton\n        text=\"Hike Hike\"\n        onClick={planesAndChaosWalk}\n        disabled={loading}\n        className=\"btn-translucent\"\n        icon={<i className=\"ms ms-planeswalker ms-2x mx-2\" />}\n      >\n        <Button\n          onClick={planeswalk}\n          className=\"btn-translucent my-3\"\n          variant=\"info\"\n          disabled={loading}\n          block\n        >\n          <i className=\"ss ss-fw ss-2x ss-fut mx-2\" />\n          <span className=\"mx-2 d-none d-md-inline\">Planes Hike</span>\n        </Button>\n        <Button\n          onClick={chaosWalk}\n          className=\"btn-translucent my-3\"\n          variant=\"warning\"\n          disabled={loading}\n          block\n        >\n          <i className=\"ms ms-fw ms-2x ms-phenomenon mx-2\" />\n          <span className=\"mx-2 d-none d-md-inline\">Chaos Hike</span>\n        </Button>\n      </ActionButton>\n\n      <Row className=\"mb-4 text-center\">\n        {loading ? (\n          <Loading className=\"text-muted\" />\n        ) : currentCard ? (\n          <>\n            <div className=\"col-6\">\n              <i className=\"ms ms-planeswalker ms-4x ms-mechanic mb-3\" />\n              <MtgCard card={currentCard} displayActions=\"true\">\n                <ChaosButton card={currentCard} onClick={triggerChaos} />\n              </MtgCard>\n            </div>\n            <div className=\"col-6\">\n              <i className=\"ms ms-chaos ms-4x ms-mechanic mb-3\" />\n              <MtgCard\n                card={currentChaosCard}\n                displayActions=\"true\"\n                altBack={true}\n              >\n                <ChaosButton card={currentChaosCard} onClick={triggerChaos} />\n              </MtgCard>\n            </div>\n          </>\n        ) : (\n          <>\n            <Col sm={6}>\n              <MtgCard />\n            </Col>\n            <Col sm={6}>\n              <MtgCard altBack={true} />\n            </Col>\n          </>\n        )}\n      </Row>\n\n      <CurrentDie showAllEffect={showAllEffect} />\n\n      {showRules && <Rules />}\n      {showAllCustom && (\n        <Row className=\"mb-4 text-center\">\n          {[...customPlanes, ...customChaos].map((c, i) => {\n            return (\n              <div className=\"col-6 mb-2\" key={i}>\n                <MtgCard card={c} displayActions=\"true\">\n                  <ChaosButton card={c} onClick={() => triggerChaos(c)} />\n                </MtgCard>\n              </div>\n            );\n          })}\n        </Row>\n      )}\n\n      <RandomTokenModal\n        open={randomTokenModalOpen}\n        additionalCards={game.additionalCards}\n        onHide={_randomTokenModalClose}\n        close={_randomTokenModalClose}\n        randomTokenProps={randomTokenProps}\n      />\n\n      <History history={history} CardType={MtgCard} />\n      <p className=\"text-center my-3 noselect\">\n        There are {deck.deck ? deck.deck.length : 0} cards remaining.\n      </p>\n      <Confirm\n        onConfirm={reset}\n        headerText=\"Reset Cards?\"\n        triggerText=\"Reset\"\n        confirmText=\"Reset\"\n        confirmVariant=\"danger\"\n        triggerButtonParams={{ variant: \"danger\", block: true }}\n      />\n      <DevTools>\n        <Button onClick={undo} variant=\"warning\" block>\n          Undo\n        </Button>\n        <Deck CardType={MtgCard} name=\"Plane\" />\n        <DeckProvider\n          prefix={PRE_CHAOS}\n          key={currentChaosCard?.id ?? currentChaosCard?.name}\n        >\n          <Deck CardType={MtgCard} name=\"Chaos\" />\n        </DeckProvider>\n        {/* <DoubleFaceButton\n          text=\"Planar Die\"\n          onClick={() => setShowPlanarDie(!showPlanarDie)}\n          enabled={showPlanarDie}\n        /> */}\n        <DoubleFaceButton\n          text=\"All Effects\"\n          onClick={() => setShowAllEffect(!showAllEffect)}\n          enabled={showAllEffect}\n        />\n        <DoubleFaceButton\n          text=\"All Custom\"\n          onClick={() => setShowAllCustom(!showAllCustom)}\n          enabled={showAllCustom}\n        />\n        <DoubleFaceButton\n          text=\"Show Rules\"\n          onClick={() => setShowRules(!showRules)}\n          enabled={showRules}\n        />\n      </DevTools>\n      <DoubleFaceButton\n        text=\"Hike Mode\"\n        onClick={() => setHikeMode(!hikeMode)}\n        enabled={hikeMode}\n      />\n      {/* TODO: Swap Planar Die */}\n      {/* {showPlanarDie && (\n        <div className=\"position-fixed\" style={{ bottom: \"5px\", right: \"5px\" }}>\n          <PlanarDie rollDone={face => console.log(`Rolled: ${face}`)} />\n        </div>\n      )} */}\n    </div>\n  );\n};\n","import cn from \"classnames\";\nimport { useState } from \"react\";\n// import \"./dice.scss\";\nimport \"./more.scss\";\n// https://codepen.io/vicentemundim/details/cenIh\nexport const Die = ({ sides = 20, initialSide = 1 }) => {\n  const [rolling, setRolling] = useState(false);\n  console.log(\"🚀 ~ file: die.js ~ line 8 ~ Die ~ rolling\", rolling);\n  const [face, setFace] = useState(1);\n  const [lastFace, setLastFace] = useState(null);\n\n  var timeoutId,\n    // transitionDuration = 500,\n    animationDuration = 3000;\n\n  const randomFace = () => {\n    const face = Math.floor(Math.random() * sides) + initialSide;\n    setLastFace(face === lastFace ? randomFace() : face);\n    return face;\n  };\n\n  const rollTo = (face) => {\n    clearTimeout(timeoutId);\n    setFace(face);\n  };\n\n  const roll = () => {\n    setRolling(true);\n    // $die.addClass('rolling')\n    clearTimeout(timeoutId);\n\n    timeoutId = setTimeout(() => {\n      setRolling(false);\n      // $die.removeClass('rolling')\n\n      rollTo(randomFace());\n    }, animationDuration);\n\n    return false;\n  };\n\n  const die = `d${sides}`;\n  // const _faces = Array(sides)\n  //   .fill(1)\n  //   .map((_, i) => (\n  //     <figure\n  //       key={i}\n  //       className={`d-face d-face-${i + 1}`}\n  //       data-side={i + 1}\n  //     ></figure>\n  //   ));\n  const faces2 = Array(sides)\n    .fill(1)\n    .map((_, i) => <div key={i} className={`${die}`} data-side={i + 1}></div>);\n  return (\n    <>\n      {/* <div className=\"content\">\n  <div className={cn(\"d-die\", {\"rolling\": rolling, \"d12\": faces===12, \"twenty\": faces === 20})} onClick={roll} data-face={face}>\n    {faces}\n  </div>\n</div> */}\n      {/* <div id=\"d4-wrap\">\n        <div id=\"d4\">\n            <div class=\"d4\" data-side=\"1\"><div data-number=\"2\"></div><div data-number=\"3\"></div><div data-number=\"4\"></div></div>\n            <div class=\"d4\" data-side=\"2\"><div data-number=\"1\"></div><div data-number=\"3\"></div><div data-number=\"4\"></div></div>\n            <div class=\"d4\" data-side=\"3\"><div data-number=\"1\"></div><div data-number=\"2\"></div><div data-number=\"4\"></div></div>\n            <div class=\"d4\" data-side=\"4\"><div data-number=\"1\"></div><div data-number=\"2\"></div><div data-number=\"3\"></div></div>\n        </div>\n    </div> */}\n      {/* <div id={`${die}-wrap`}> */}\n      <div\n        className={cn(\"react__die\", die, { rolling: rolling })}\n        onClick={roll}\n        data-face={face}\n      >\n        {faces2}\n      </div>\n    </>\n  );\n};\n","import React from \"react\";\nimport { Die } from \"../components/magic/die/die\";\nimport { createMarkup, MARKUP_TEXT } from \"../util/createMarkup\";\n\nexport const DebugPage = () => {\n  return (\n    <>\n      <h1>Mana</h1>\n      <div dangerouslySetInnerHTML={{ __html: createMarkup(MARKUP_TEXT) }} />\n\n      <div className=\"position-fixed\" style={{ top: \"10%\", right: \"150px\" }}>\n        <Die sides={4}></Die>\n      </div>\n      <div className=\"position-fixed\" style={{ top: \"20%\", right: \"150px\" }}>\n        <Die sides={6}></Die>\n      </div>\n      <div className=\"position-fixed\" style={{ top: \"30%\", right: \"150px\" }}>\n        <Die sides={8}></Die>\n      </div>\n      <div className=\"position-fixed\" style={{ top: \"50%\", right: \"150px\" }}>\n        <Die sides={10}></Die>\n      </div>\n      <div className=\"position-fixed\" style={{ top: \"70%\", right: \"150px\" }}>\n        <Die sides={12}></Die>\n      </div>\n      <div className=\"position-fixed\" style={{ top: \"80%\", right: \"150px\" }}>\n        <Die sides={20}></Die>\n      </div>\n    </>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/contraption-back.782864c5.jpg\";","import React, { useEffect, useState } from \"react\";\nimport { Button, Form, Modal } from \"react-bootstrap\";\nimport { MtgCard } from \"../../components/magic/Card\";\nimport { getAllContraptionsCards } from \"../../util/api\";\n\nexport const ContraptionListModal = ({\n  onHide,\n  onSelect,\n  open,\n  randomTokenProps,\n}) => {\n  const [contraptions, setContraptions] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  useEffect(() => {\n    const getContraps = async () => {\n      setContraptions(await getAllContraptionsCards());\n    };\n    getContraps();\n  }, [setContraptions]);\n\n  const filteredContraps = contraptions.filter((c) =>\n    c.name.toLowerCase().includes(search.toLowerCase() || \"\")\n  );\n\n  if (contraptions && open) {\n    return (\n      <Modal\n        show={!!open}\n        onHide={onHide}\n        size=\"lg\"\n        dialogClassName=\"bg-secondary\"\n        variant=\"secondary\"\n        backdrop={true}\n      >\n        <Modal.Header className=\"justify-content-center text-white noselect\">\n          <Modal.Title>\n            <i className={randomTokenProps.symbol} />\n            {randomTokenProps.text}\n            <i className={randomTokenProps.symbol} />\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Form.Control\n            placeholder=\"Search...\"\n            value={search}\n            onChange={(a) => setSearch(a.target.value)}\n          />\n          <p className=\"text-right text-light\">\n            {filteredContraps?.length} Matches\n          </p>\n          {filteredContraps?.map((card) => (\n            <MtgCard card={card} key={card.id} displayChildrenBelow={false}>\n              <Button\n                onClick={() => onSelect({ card })}\n                variant=\"primary\"\n                size=\"lg\"\n                className=\"btn-translucent\"\n              >\n                <h2 className=\"mb-0\">\n                  <i className=\"ss ss-ust ss-2x ss-grad ss-rare mx-2\" />\n                  <span className=\"mx-2 d-none d-md-inline\">Assemble</span>\n                </h2>\n              </Button>\n            </MtgCard>\n          ))}\n        </Modal.Body>\n      </Modal>\n    );\n  }\n\n  return null;\n};\n","import React, { useCallback, useRef, useState } from \"react\";\nimport { Button, Carousel, Col, Image, Row } from \"react-bootstrap\";\nimport get from \"lodash/get\";\nimport set from \"lodash/set\";\nimport concat from \"lodash/concat\";\nimport { LoyaltyButtonGroup } from \"../../components/magic/Buttons\";\nimport { MtgCard } from \"../../components/magic/Card\";\nimport { useLocalState } from \"../../hooks/useLocalState\";\nimport { filterAPI, internet } from \"../../util/api\";\nimport { RandomTokenModal } from \"../hike/RandomTokenModal\";\nimport Dialog from \"react-bootstrap-dialog\";\nimport uuidv4 from \"uuid/v4\";\nimport { Confirm } from \"../../components/Confirm\";\nimport contraptionBack from \"../../images/contraption-back.jpg\";\nimport { ContraptionListModal } from \"./ContraptionListModal\";\nimport { ASSEMBLE_PROP } from \"../../util/additionalProps\";\n\nconst DEFAULT_PLAYER_COUNT = 5;\nconst MAX_SPROKETS = 3;\n\nexport const Contraptions = () => {\n  const [playerCount, setPlayerCount] = useLocalState(\n    \"contraption-playerCount\",\n    DEFAULT_PLAYER_COUNT\n  );\n  const [sprokets, setSprokets] = useLocalState(\"contraption-sprokets\", {});\n  const [randomTokenModalOpen, setRandomTokenModalOpen] = useState(false);\n  const [selectContraptionModalOpen, setSelectContraptionModalOpen] =\n    useState(false);\n  const [additionalCards, setAdditionalCards] = useState([]);\n  const [currentPlayer, setCurrentPlayer] = useState(null);\n  const [labels, setLabels] = useLocalState(\"contraption-labels\", {});\n\n  const dialog = useRef(null);\n\n  const setLabel = useCallback(\n    (number) => {\n      console.log(\"Setting label\", number);\n      dialog.current.show({\n        title: \"Who is this?\",\n        bsSize: \"sm\",\n        actions: [\n          Dialog.CancelAction(),\n          Dialog.OKAction((a) => {\n            console.log(`Setting label ${a.value}`);\n            labels[number] = a.value;\n            setLabels({ ...labels });\n          }),\n        ],\n        prompt: Dialog.TextPrompt({ initialValue: labels[number] || number }),\n      });\n    },\n    [dialog, labels, setLabels]\n  );\n\n  const _randomTokenModalOpen = (player) => {\n    const getToken = async () => {\n      let response = await internet.get(ASSEMBLE_PROP.url);\n      let tokenCard = filterAPI(response.data);\n      tokenCard.deck_card_id = uuidv4();\n      console.log(\"Random Token\", tokenCard);\n\n      setAdditionalCards([tokenCard]);\n      setCurrentPlayer(player);\n      setRandomTokenModalOpen(true);\n    };\n    getToken();\n  };\n\n  const _randomTokenModalClose = useCallback(() => {\n    dialog.current.show({\n      title: \"Which Sproket?\",\n      bsSize: \"sm\",\n      actions: [\n        Dialog.CancelAction(() => {\n          setAdditionalCards([]);\n          setCurrentPlayer(null);\n          setRandomTokenModalOpen(false);\n        }),\n        Dialog.OKAction((a) => {\n          const newSprokets = { ...sprokets };\n          set(\n            newSprokets,\n            [`player${currentPlayer}`, `sproket${a.value}`],\n            concat(\n              get(\n                newSprokets,\n                [`player${currentPlayer}`, `sproket${a.value}`],\n                []\n              ),\n              additionalCards\n            )\n          );\n          setSprokets(newSprokets);\n\n          setAdditionalCards([]);\n          setCurrentPlayer(null);\n          setRandomTokenModalOpen(false);\n        }),\n      ],\n      prompt: Dialog.TextPrompt({ initialValue: 1 }),\n    });\n  }, [\n    dialog,\n    sprokets,\n    setSprokets,\n    additionalCards,\n    setAdditionalCards,\n    setRandomTokenModalOpen,\n    currentPlayer,\n    setCurrentPlayer,\n  ]);\n\n  const _selectContraptionModalOpen = (player) => {\n    setCurrentPlayer(player);\n    setSelectContraptionModalOpen(true);\n  };\n\n  const _hideSelectContraption = () => {\n    setCurrentPlayer(null);\n    setSelectContraptionModalOpen(false);\n  };\n\n  const _selectContraption = ({ card }) => {\n    dialog.current.show({\n      title: \"Which Sproket?\",\n      bsSize: \"sm\",\n      actions: [\n        Dialog.CancelAction(() => {\n          _hideSelectContraption();\n        }),\n        Dialog.OKAction((a) => {\n          const newSprokets = { ...sprokets };\n          set(\n            newSprokets,\n            [`player${currentPlayer}`, `sproket${a.value}`],\n            concat(\n              get(\n                newSprokets,\n                [`player${currentPlayer}`, `sproket${a.value}`],\n                []\n              ),\n              [{ deck_card_id: uuidv4(), ...card }]\n            )\n          );\n          setSprokets(newSprokets);\n\n          setCurrentPlayer(null);\n          _hideSelectContraption();\n        }),\n      ],\n      prompt: Dialog.TextPrompt({ initialValue: 1 }),\n    });\n  };\n\n  const incrementPlayerCount = () => {\n    const newPlayerCount = playerCount + 1;\n    setSprokets({});\n    setPlayerCount(newPlayerCount);\n  };\n\n  const decrementPlayerCount = () => {\n    const newPlayerCount = Math.max(playerCount - 1, 1);\n    setSprokets({});\n    setPlayerCount(newPlayerCount);\n  };\n\n  const unsproket = ({ card, sproket, player }) => {\n    const newSprokets = { ...sprokets };\n    const playerSproket = get(\n      newSprokets,\n      [`player${player}`, `sproket${sproket}`],\n      []\n    );\n    const filteredSproket = playerSproket.filter(\n      (c) => c.deck_card_id !== card.deck_card_id\n    );\n    set(newSprokets, [`player${player}`, `sproket${sproket}`], filteredSproket);\n    setSprokets(newSprokets);\n  };\n\n  const reset = async () => {\n    setSprokets({});\n    setLabels({});\n    setPlayerCount(DEFAULT_PLAYER_COUNT);\n  };\n\n  return (\n    <div className=\"contraptions\">\n      <Row className=\"my-4 text-center\">\n        <Col>\n          <h1>{playerCount} Players</h1>\n          <LoyaltyButtonGroup\n            upProps={{\n              onClick: incrementPlayerCount,\n            }}\n            downProps={{\n              disabled: playerCount <= 1,\n              onClick: decrementPlayerCount,\n            }}\n          />\n        </Col>\n      </Row>\n      <Carousel interval={null} touch={false}>\n        {[...Array(playerCount)].map((_v, p) => {\n          const player = p + 1;\n          return (\n            <Carousel.Item\n              key={player}\n              className=\"my-5\"\n              style={{ minHeight: \"1vh\" }}\n            >\n              <h2 className=\"text-center mb-3\" onClick={() => setLabel(player)}>\n                {labels[player] || `Player ${player}`}\n                <sup>\n                  <i className=\"fa fa-edit ml-2 text-secondary fa-xs\"></i>\n                </sup>\n              </h2>\n              <Row className=\"my-3 mx-5\">\n                <Col sm={6} className=\"mb-3 mb-sm-2\">\n                  <Button\n                    onClick={() => _randomTokenModalOpen(player)}\n                    block\n                    variant=\"primary\"\n                  >\n                    Assemble Random Contraption\n                  </Button>\n                </Col>\n                <Col sm={6} className=\"mb-3 mb-sm-2\">\n                  <Button\n                    onClick={() => _selectContraptionModalOpen(player)}\n                    block\n                    variant=\"info\"\n                    className=\"h-100\"\n                  >\n                    Assemble Select Contraption\n                  </Button>\n                </Col>\n              </Row>\n              <Row className=\"my-3\">\n                <Col md={{ span: 8, offset: 2 }}>\n                  <Image\n                    fluid\n                    src={contraptionBack}\n                    alt=\"Contraption Back\"\n                    className=\"px-4\"\n                  ></Image>\n                </Col>\n              </Row>\n              <Row>\n                {[...Array(MAX_SPROKETS)].map((_v, s) => {\n                  const sproket = s + 1;\n                  const playerSprokets = get(sprokets, [\n                    `player${player}`,\n                    `sproket${sproket}`,\n                  ]);\n                  return (\n                    <Col md={4} key={`${player}-${sproket}`} className=\"my-3\">\n                      <h3 className=\"text-center sticky-top bg-dark\">{`Sprocket ${sproket}`}</h3>\n                      {playerSprokets?.map((card) => (\n                        <React.Fragment key={card.deck_card_id}>\n                          <MtgCard card={card} displayChildrenBelow={false}>\n                            <Button\n                              onClick={() =>\n                                unsproket({ card, player, sproket })\n                              }\n                              variant=\"danger\"\n                              size=\"lg\"\n                              className=\"btn-translucent mb-2\"\n                            >\n                              <i className=\"ss ss-bok ss-2x ss-grad ss-rare mx-2\" />\n                            </Button>\n                          </MtgCard>\n                        </React.Fragment>\n                      ))}\n                      {playerSprokets?.length ? (\n                        \"\"\n                      ) : (\n                        <p className=\"text-center\">None</p>\n                      )}\n                    </Col>\n                  );\n                })}\n              </Row>\n            </Carousel.Item>\n          );\n        })}\n      </Carousel>\n\n      <Confirm\n        onConfirm={reset}\n        headerText=\"Reset Sprokets?\"\n        triggerText=\"Reset\"\n        confirmText=\"Reset\"\n        confirmVariant=\"danger\"\n        triggerButtonParams={{\n          variant: \"danger\",\n          block: true,\n          className: \"my-3\",\n        }}\n      />\n      <RandomTokenModal\n        open={randomTokenModalOpen}\n        additionalCards={additionalCards}\n        onHide={_randomTokenModalClose}\n        close={_randomTokenModalClose}\n        randomTokenProps={ASSEMBLE_PROP}\n        closeText=\"Assemble Contraption\"\n      />\n      <ContraptionListModal\n        open={selectContraptionModalOpen}\n        onHide={_hideSelectContraption}\n        onSelect={_selectContraption}\n        randomTokenProps={ASSEMBLE_PROP}\n      />\n      <Dialog\n        ref={(component) => {\n          dialog.current = component;\n        }}\n      />\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Helmet, HelmetProvider } from \"react-helmet-async\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\n\nimport \"./App.scss\";\n\nimport { Home } from \"./pages/home\";\nimport { Planechase } from \"./pages/planechase\";\nimport { Archenemy } from \"./pages/archenemy\";\nimport { SYB } from \"./pages/syb\";\nimport { Formats } from \"./pages/formats\";\n\nimport { DeckProvider } from \"./mtg/DeckContext\";\nimport { GameProvider } from \"./mtg/GameContext\";\nimport { Disclaimer } from \"./components/Disclaimer\";\nimport { Navigation } from \"./components/Navigation\";\nimport { SettingsProvider } from \"./hooks/useSettings\";\nimport { Hike } from \"./pages/hike\";\nimport { DebugPage } from \"./pages/DebugPage\";\nimport { Contraptions } from \"./pages/contraptions/Contraptions\";\n\nconst Providers = ({ children }) => {\n  return (\n    <BrowserRouter>\n      <HelmetProvider>\n        <SettingsProvider>{children}</SettingsProvider>\n      </HelmetProvider>\n    </BrowserRouter>\n  );\n};\n\nconst Main = () => {\n  return (\n    <Switch>\n      <Route path=\"/\" exact render={(props) => <Home {...props} />} />\n      <Route\n        path=\"/archenemy\"\n        exact\n        render={(props) => (\n          <GameProvider prefix=\"archenemy\">\n            <DeckProvider prefix=\"archenemy\">\n              <Archenemy {...props} />\n            </DeckProvider>\n          </GameProvider>\n        )}\n      />\n      <Route\n        path=\"/planechase\"\n        exact\n        render={(props) => (\n          <GameProvider prefix=\"planechase\">\n            <DeckProvider prefix=\"planechase\">\n              <Planechase {...props} />\n            </DeckProvider>\n          </GameProvider>\n        )}\n      />\n      <Route path=\"/syb\" exact render={(props) => <SYB {...props} />} />\n      <Route path=\"/formats\" exact render={(props) => <Formats {...props} />} />\n      <Route\n        path=\"/contraptions\"\n        exact\n        render={(props) => <Contraptions {...props} />}\n      />\n      <Route\n        path=\"/hike\"\n        exact\n        render={(props) => (\n          <GameProvider prefix=\"hikemode\">\n            <DeckProvider prefix=\"hikemode\">\n              <Hike {...props} />\n            </DeckProvider>\n          </GameProvider>\n        )}\n      />\n      <Route path=\"/debug\" exact render={(props) => <DebugPage {...props} />} />\n    </Switch>\n  );\n};\n\nconst App = () => {\n  return (\n    <Providers>\n      <Helmet titleTemplate=\"%s - Jibbermaster\" />\n      <Navigation />\n      <div className=\"app text-light bg-dark col-md-10 offset-md-1 col-lg-8 offset-lg-2 col-xl-6 offset-xl-3\">\n        <Main />\n        <Disclaimer />\n      </div>\n    </Providers>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}